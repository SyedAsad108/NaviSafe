(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5837:function(e,s,t){Promise.resolve().then(t.bind(t,8818))},8818:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return sg}});var a=t(7437),n=t(2265),r=t(2869),i=t(6070),l=t(5974),c=t(5613),o=t(8906),d=t(9322),m=t(6362),u=t(1804),x=t(1671),h=t(5929),p=t(7226),g=t(5922);function f(){let{theme:e,setTheme:s}=(0,g.F)(),[t,i]=n.useState(!1);return(n.useEffect(()=>{i(!0)},[]),t)?(0,a.jsxs)(r.z,{variant:"outline",size:"icon",onClick:()=>s("dark"===e?"light":"dark"),className:"h-9 w-9 bg-background border-border hover:bg-accent hover:text-accent-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","aria-label":"Toggle theme",children:[(0,a.jsx)(h.Z,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0 text-foreground"}),(0,a.jsx)(p.Z,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100 text-foreground"})]}):(0,a.jsx)(r.z,{variant:"outline",size:"icon",className:"h-9 w-9 bg-background border-border hover:bg-accent hover:text-accent-foreground","aria-label":"Toggle theme",children:(0,a.jsx)(h.Z,{className:"h-4 w-4 text-foreground"})})}var j=t(1035);function v(e){let{onGetStarted:s}=e,{connected:t,connecting:h,publicKey:p,balance:g,error:v,connectWallet:N,disconnectWallet:b,isWalletAvailable:y}=(0,j.K)(),[w,S]=(0,n.useState)(!1),k=async()=>{await N()&&S(!0)};return(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-primary/5 to-accent/5",children:[(0,a.jsx)("div",{className:"absolute top-4 right-4 animate-in fade-in-0 slide-in-from-top-2 duration-700 delay-500",children:(0,a.jsx)(f,{})}),(0,a.jsx)(i.Zb,{className:"w-full max-w-md animate-in fade-in-0 slide-in-from-bottom-8 duration-700 hover:shadow-2xl hover:scale-[1.02] transition-all duration-300 hover:shadow-primary/10",children:(0,a.jsxs)(i.aY,{className:"p-8 text-center space-y-6",children:[(0,a.jsx)("div",{className:"flex justify-center animate-in fade-in-0 zoom-in-50 duration-700 delay-200",children:(0,a.jsx)("div",{className:"p-4 bg-primary/10 rounded-full hover:bg-primary/20 transition-all duration-300 hover:scale-110 hover:rotate-3 group",children:(0,a.jsx)(o.Z,{className:"h-12 w-12 text-primary group-hover:text-primary/80 transition-colors duration-300"})})}),(0,a.jsxs)("div",{className:"space-y-2 animate-in fade-in-0 slide-in-from-bottom-4 duration-700 delay-300",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground hover:text-primary transition-colors duration-300 cursor-default",children:"NaviSafe"}),(0,a.jsx)("p",{className:"text-lg text-muted-foreground font-medium animate-pulse",children:"Navigate Safely, Travel Freely"})]}),(0,a.jsxs)("div",{className:"space-y-4 animate-in fade-in-0 slide-in-from-bottom-4 duration-700 delay-400",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Your personal safety companion for secure travel experiences. Get real-time protection, emergency assistance, and peace of mind wherever you go."}),(0,a.jsxs)("div",{className:"p-3 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-950/30 dark:to-blue-950/30 rounded-lg border border-purple-200 dark:border-purple-800",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 text-purple-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-purple-900 dark:text-purple-100",children:"Blockchain-Secured Registration"})]}),(0,a.jsx)("p",{className:"text-xs text-purple-800 dark:text-purple-200",children:"Your data is securely stored on Solana blockchain for maximum privacy and verification"})]}),t?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-950/30 rounded-lg border border-green-200 dark:border-green-800",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5 text-green-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Wallet Connected"})]}),w&&(0,a.jsxs)("div",{className:"space-y-2 text-xs text-green-700 dark:text-green-300",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Address:"}),(0,a.jsx)(l.C,{variant:"outline",className:"font-mono",children:"".concat(p.slice(0,4),"...").concat(p.slice(-4))})]}),null!==g&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Balance:"}),(0,a.jsxs)(l.C,{variant:"outline",children:[g.toFixed(4)," SOL"]})]}),(0,a.jsx)("div",{className:"flex items-center justify-center pt-2",children:(0,a.jsx)(l.C,{className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Devnet Connected"})})]})]}),(0,a.jsx)(r.z,{onClick:()=>{t&&s()},className:"w-full h-12 text-base font-semibold hover:scale-105 active:scale-95 transition-all duration-200 hover:shadow-lg hover:shadow-primary/25 group",size:"lg",children:(0,a.jsx)("span",{className:"group-hover:animate-pulse",children:"Continue to Registration"})}),(0,a.jsx)(r.z,{onClick:b,variant:"outline",size:"sm",className:"w-full text-sm bg-transparent",children:"Disconnect Wallet"})]}):(0,a.jsxs)("div",{className:"space-y-3",children:[y?(0,a.jsxs)(r.z,{onClick:k,disabled:h,className:"w-full h-12 text-base font-semibold hover:scale-105 active:scale-95 transition-all duration-200 hover:shadow-lg hover:shadow-primary/25 group bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",size:"lg",children:[(0,a.jsx)(u.Z,{className:"h-5 w-5 mr-2 group-hover:animate-pulse"}),(0,a.jsx)("span",{className:"group-hover:animate-pulse",children:h?"Connecting...":"Connect Wallet"})]}):(0,a.jsxs)(c.bZ,{className:"text-left",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4"}),(0,a.jsxs)(c.X,{className:"text-sm",children:["No Solana wallet detected. Please install"," ",(0,a.jsxs)("a",{href:"https://phantom.app/",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline hover:text-primary/80 inline-flex items-center",children:["Phantom ",(0,a.jsx)(m.Z,{className:"h-3 w-3 ml-1"})]})," ","or"," ",(0,a.jsxs)("a",{href:"https://solflare.com/",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline hover:text-primary/80 inline-flex items-center",children:["Solflare ",(0,a.jsx)(m.Z,{className:"h-3 w-3 ml-1"})]})," ","wallet to continue."]})]}),v&&(0,a.jsxs)(c.bZ,{variant:"destructive",className:"text-left",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4"}),(0,a.jsx)(c.X,{className:"text-sm",children:v})]})]})]}),(0,a.jsx)("div",{className:"pt-4 border-t border-border animate-in fade-in-0 duration-700 delay-600",children:(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["By continuing, I accept and agree to NaviSafe"," ",(0,a.jsx)("span",{className:"text-primary underline cursor-pointer hover:text-primary/80 transition-colors duration-200 hover:underline-offset-4",children:"Terms of Use"})," ","&"," ",(0,a.jsx)("span",{className:"text-primary underline cursor-pointer hover:text-primary/80 transition-colors duration-200 hover:underline-offset-4",children:"Privacy Policy"})]})})]})})]})}var N=t(1115),b=t(5186),y=t(6815),w=t(5056),S=t(875),k=t(401),C=t(2135),D=t(4508);function I(e){let{...s}=e;return(0,a.jsx)(w.fC,{"data-slot":"select",...s})}function T(e){let{...s}=e;return(0,a.jsx)(w.B4,{"data-slot":"select-value",...s})}function Z(e){let{className:s,size:t="default",children:n,...r}=e;return(0,a.jsxs)(w.xz,{"data-slot":"select-trigger","data-size":t,className:(0,D.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...r,children:[n,(0,a.jsx)(w.JO,{asChild:!0,children:(0,a.jsx)(S.Z,{className:"size-4 opacity-50"})})]})}function A(e){let{className:s,children:t,position:n="popper",...r}=e;return(0,a.jsx)(w.h_,{children:(0,a.jsxs)(w.VY,{"data-slot":"select-content",className:(0,D.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...r,children:[(0,a.jsx)(R,{}),(0,a.jsx)(w.l_,{className:(0,D.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,a.jsx)(z,{})]})})}function E(e){let{className:s,children:t,...n}=e;return(0,a.jsxs)(w.ck,{"data-slot":"select-item",className:(0,D.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...n,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(w.wU,{children:(0,a.jsx)(k.Z,{className:"size-4"})})}),(0,a.jsx)(w.eT,{children:t})]})}function R(e){let{className:s,...t}=e;return(0,a.jsx)(w.u_,{"data-slot":"select-scroll-up-button",className:(0,D.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(C.Z,{className:"size-4"})})}function z(e){let{className:s,...t}=e;return(0,a.jsx)(w.$G,{"data-slot":"select-scroll-down-button",className:(0,D.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(S.Z,{className:"size-4"})})}var L=t(2369),M=t(1817),O=t(7539);let P=N.z.string().email();function F(e){let{onSubmit:s}=e,[t,l]=(0,n.useState)({name:"",gender:"",age:"",idNumber:"",phone:"",nationality:"",email:""}),[u,h]=(0,n.useState)({}),[p,g]=(0,n.useState)([]),{connected:f,publicKey:v}=(0,j.K)(),{isLoading:N,error:w,result:S,isSuccess:k,registerTourist:C,getExplorerUrl:D,resetState:R}=(0,O.j)();(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("https://api.first.org/data/v1/countries");if(!e.ok)throw Error("Network response was not ok");let s=await e.json(),t=Object.values(s.data).map(e=>e.country);t.sort((e,s)=>e.localeCompare(s)),g(t)}catch(e){console.error("Failed to fetch countries",e)}})()},[]);let z=()=>{let e={};return t.name?t.name.length<2&&(e.name="Name must be at least 2 characters."):e.name="Full Name is required.",t.gender||(e.gender="Please select a gender."),t.age?(isNaN(Number(t.age))||0>=Number(t.age)||Number(t.age)>120)&&(e.age="Please enter a valid age."):e.age="Age is required.",t.nationality||(e.nationality="Country of Origin is required."),t.idNumber||(e.idNumber="ID Number is required."),t.phone?/^\+?\d{4,15}$/.test(t.phone)||(e.phone="Please enter a valid phone number."):e.phone="Phone number is required.",t.email&&!P.safeParse(t.email).success&&(e.email="Please enter a valid email address."),e},F=async e=>{e.preventDefault();let a=z();if(Object.keys(a).length>0){h(a);return}if(f&&v){h({}),R();try{let e={digitalId:"",name:t.name,gender:t.gender,age:Number.parseInt(t.age),idNumber:t.idNumber,phone:t.phone,nationality:t.nationality,email:t.email||void 0,registrationTimestamp:Date.now()};console.log("[v0] Submitting tourist data to blockchain:",e);let a=await C(e);a&&setTimeout(()=>{s({...t,blockchainData:{digitalId:a.touristAccountAddress,transactionSignature:a.signature,slot:a.slot,blockTime:a.blockTime,touristAccountAddress:a.touristAccountAddress}})},2e3)}catch(e){console.error("[v0] Blockchain submission failed:",e)}}},G=(e,s)=>{let t=s;"phone"===e&&(t=(t=t.replace(/[^\d+]/g,"")).includes("+")?"+"+t.replace(/\+/g,"").replace(/\D/g,""):t.replace(/\D/g,"")),l(s=>({...s,[e]:t})),u[e]&&h(s=>({...s,[e]:void 0}))};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-primary/5 to-accent/5",children:(0,a.jsxs)(i.Zb,{className:"w-full max-w-md animate-in fade-in-0 slide-in-from-bottom-4 duration-500",children:[(0,a.jsxs)(i.Ol,{className:"text-center space-y-2",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"p-3 bg-primary/10 rounded-full",children:(0,a.jsx)(L.Z,{className:"h-8 w-8 text-primary"})})}),(0,a.jsx)(i.ll,{className:"text-2xl",children:"Personal Information"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Please provide your details for safety monitoring"}),f&&v&&(0,a.jsxs)("div",{className:"p-3 bg-green-50 dark:bg-green-950/30 rounded-lg border border-green-200 dark:border-green-800",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Wallet Connected"})]}),(0,a.jsxs)("div",{className:"text-xs text-green-700 dark:text-green-300 mt-1",children:[v.slice(0,4),"...",v.slice(-4)]})]})]}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("form",{onSubmit:F,className:"space-y-6",children:[w&&(0,a.jsxs)(c.bZ,{variant:"destructive",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4"}),(0,a.jsx)(c.X,{children:w})]}),k&&S&&(0,a.jsxs)(c.bZ,{className:"border-green-200 bg-green-50 dark:bg-green-950/30",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)(c.X,{className:"text-green-800 dark:text-green-200",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{children:"Data successfully submitted to Solana blockchain!"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-xs",children:[(0,a.jsx)("span",{children:"Transaction:"}),(0,a.jsxs)("a",{href:D(S.signature),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline inline-flex items-center",children:[S.signature.slice(0,8),"...",(0,a.jsx)(m.Z,{className:"h-3 w-3 ml-1"})]})]})]})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(y._,{htmlFor:"name",children:"Full Name"}),(0,a.jsx)(b.I,{id:"name",placeholder:"Enter your full name",value:t.name,onChange:e=>G("name",e.target.value),disabled:N}),u.name&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:u.name})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(y._,{htmlFor:"gender",children:"Gender"}),(0,a.jsxs)(I,{value:t.gender,onValueChange:e=>G("gender",e),disabled:N,children:[(0,a.jsx)(Z,{id:"gender",children:(0,a.jsx)(T,{placeholder:"Select"})}),(0,a.jsxs)(A,{children:[(0,a.jsx)(E,{value:"male",className:"hover:bg-blue-700 focus:bg-blue-800 text-white",children:"Male"}),(0,a.jsx)(E,{value:"female",className:"hover:bg-blue-700 focus:bg-blue-800 text-white",children:"Female"}),(0,a.jsx)(E,{value:"other",className:"hover:bg-blue-700 focus:bg-blue-800 text-white",children:"Other"})]})]}),u.gender&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:u.gender})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(y._,{htmlFor:"age",children:"Age"}),(0,a.jsx)(b.I,{id:"age",type:"number",placeholder:"Age",value:t.age,onChange:e=>G("age",e.target.value),disabled:N}),u.age&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:u.age})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(y._,{htmlFor:"nationality",children:"Country of Origin"}),(0,a.jsxs)(I,{value:t.nationality,onValueChange:e=>G("nationality",e),disabled:0===p.length||N,children:[(0,a.jsx)(Z,{id:"nationality",children:(0,a.jsx)(T,{placeholder:0===p.length?"Loading countries...":"Select your country"})}),(0,a.jsx)(A,{className:"max-h-60 overflow-auto",children:p.map(e=>(0,a.jsx)(E,{value:e,className:"hover:bg-blue-700 focus:bg-blue-800 text-white",children:e},e))})]}),u.nationality&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:u.nationality})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(y._,{htmlFor:"idNumber",children:"Passport/Aadhaar Number"}),(0,a.jsx)(b.I,{id:"idNumber",placeholder:"Enter ID number",value:t.idNumber,onChange:e=>G("idNumber",e.target.value),disabled:N}),u.idNumber&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:u.idNumber})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(y._,{htmlFor:"phone",children:"Phone Number"}),(0,a.jsx)(b.I,{id:"phone",type:"tel",placeholder:"+91 XXXXX XXXXX",value:t.phone,onChange:e=>G("phone",e.target.value),disabled:N}),u.phone&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:u.phone})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(y._,{htmlFor:"email",children:"Email Address (Optional)"}),(0,a.jsx)(b.I,{id:"email",type:"email",placeholder:"your.email@example.com",value:t.email,onChange:e=>G("email",e.target.value),disabled:N}),u.email&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:u.email})]}),(0,a.jsxs)("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/30 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Blockchain Security"})]}),(0,a.jsx)("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:"Your data will be securely stored on Solana Devnet blockchain for verification and privacy protection."}),(0,a.jsxs)("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:[(0,a.jsx)("strong",{children:"Note:"})," You'll need to approve a blockchain transaction (no cost) to complete registration."]})]}),(0,a.jsxs)("div",{className:"pt-4",children:[(0,a.jsx)(r.z,{type:"submit",className:"w-full bg-blue-700 hover:bg-blue-800 text-white",disabled:N||!f,children:N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Submitting to Blockchain..."]}):"Continue"}),!f&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"Please connect your wallet to continue"})]})]})})]})})}function G(e){let{className:s,...t}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:(0,D.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...t})}var _=t(3774),U=t(1047),H=t(1723),Y=t(5805),B=t(9397),V=t(2489);let X=N.z.object({name:N.z.string().min(1,"All fields are required for this contact"),relationship:N.z.string().min(1,"All fields are required for this contact"),phone:N.z.string().regex(/^\+91\s?[6-9]\d{4}\s?\d{5}$/,"Phone number must be valid (+91 XXXXX XXXXX)")}),q=N.z.object({startDate:N.z.string().min(1,"Start date is required").refine(e=>new Date(e)>=new Date(new Date().setHours(0,0,0,0)),{message:"Start date cannot be in the past"}),endDate:N.z.string().min(1,"End date is required"),itinerary:N.z.string().min(1,"Trip itinerary is required"),purpose:N.z.string().min(1,"Purpose of visit is required"),accommodation:N.z.string().optional(),emergencyContacts:N.z.array(X).min(1,"At least one valid emergency contact is required")}).refine(e=>new Date(e.endDate)>new Date(e.startDate),{message:"End date must be after start date",path:["endDate"]});function W(e){var s;let{onSubmit:t,onBack:u,userInfo:h}=e,[p,g]=(0,n.useState)({startDate:"",endDate:"",itinerary:"",purpose:"",accommodation:"",emergencyContacts:[{name:"",relationship:"",phone:""}]}),[f,j]=(0,n.useState)({}),{isLoading:v,error:N,result:w,isSuccess:S,updateTripDetails:k,getExplorerUrl:C,resetState:D}=(0,O.j)(),I=async e=>{var s;e.preventDefault();let a=q.safeParse(p);if(!a.success){let e={};a.error.errors.forEach(s=>{e[s.path.join("_")]=s.message}),j(e);return}if(j({}),D(),null==h?void 0:null===(s=h.blockchainData)||void 0===s?void 0:s.digitalId)try{let e={startDate:new Date(p.startDate).getTime(),endDate:new Date(p.endDate).getTime(),purpose:p.purpose,accommodation:p.accommodation||void 0,itinerary:p.itinerary,emergencyContacts:p.emergencyContacts};console.log("[v0] Submitting trip details to blockchain:",e);let s=await k(h.blockchainData.digitalId,e);s&&setTimeout(()=>{t({...p,blockchainTripData:{transactionSignature:s.signature,slot:s.slot,blockTime:s.blockTime,touristAccountAddress:s.touristAccountAddress}})},2e3)}catch(e){console.error("[v0] Trip details blockchain submission failed:",e)}else t(p)},T=(e,s)=>{g(t=>({...t,[e]:s})),f[e]&&j(s=>({...s,[e]:""}))},Z=e=>{g(s=>({...s,emergencyContacts:s.emergencyContacts.filter((s,t)=>t!==e)}))},A=(e,s,t)=>{g(a=>({...a,emergencyContacts:a.emergencyContacts.map((a,n)=>n===e?{...a,[s]:t}:a)}));let a="emergencyContacts_".concat(e,"_").concat(s);(f[a]||f.emergencyContacts)&&j(e=>({...e,[a]:"",emergencyContacts:""}))},E=()=>{if(p.startDate&&p.endDate){let e=new Date(p.startDate);return Math.ceil(Math.abs(new Date(p.endDate).getTime()-e.getTime())/864e5)}return 0};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-primary/5 to-accent/5",children:(0,a.jsxs)(i.Zb,{className:"w-full max-w-2xl animate-in fade-in-0 slide-in-from-bottom-4 duration-500",children:[(0,a.jsxs)(i.Ol,{className:"text-center space-y-2",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"p-3 bg-primary/10 rounded-full",children:(0,a.jsx)(_.Z,{className:"h-8 w-8 text-primary"})})}),(0,a.jsx)(i.ll,{className:"text-2xl",children:"Trip Details & Emergency Contacts"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Help us keep you safe by providing your travel plans and emergency contacts"}),(null==h?void 0:h.blockchainData)&&(0,a.jsxs)("div",{className:"p-3 bg-green-50 dark:bg-green-950/30 rounded-lg border border-green-200 dark:border-green-800",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Personal Data Secured on Blockchain"})]}),(0,a.jsxs)("div",{className:"text-xs text-green-700 dark:text-green-300 mt-1",children:["Digital ID: ",null===(s=h.blockchainData.digitalId)||void 0===s?void 0:s.slice(0,16),"..."]})]})]}),(0,a.jsxs)(i.aY,{className:"space-y-6",children:[N&&(0,a.jsxs)(c.bZ,{variant:"destructive",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4"}),(0,a.jsx)(c.X,{children:N})]}),S&&w&&(0,a.jsxs)(c.bZ,{className:"border-green-200 bg-green-50 dark:bg-green-950/30",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)(c.X,{className:"text-green-800 dark:text-green-200",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{children:"Trip details successfully stored on blockchain!"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-xs",children:[(0,a.jsx)("span",{children:"Transaction:"}),(0,a.jsxs)("a",{href:C(w.signature),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline inline-flex items-center",children:[w.signature.slice(0,8),"...",(0,a.jsx)(m.Z,{className:"h-3 w-3 ml-1"})]})]})]})})]}),(0,a.jsx)("div",{className:"p-4 bg-blue-50 dark:bg-blue-950 rounded-lg border border-blue-200 dark:border-blue-800 animate-in fade-in-0 slide-in-from-top-4 duration-500 delay-200",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(d.Z,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Time-Bound Digital Tourist ID"}),(0,a.jsx)("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:"Your Digital Tourist ID will be valid only for the duration of your visit. The system will automatically deactivate monitoring after your trip ends."})]})]})}),(0,a.jsxs)("form",{onSubmit:I,className:"space-y-8",children:[(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(U.Z,{className:"h-5 w-5 text-primary"}),(0,a.jsx)(y._,{className:"text-base font-semibold",children:"Trip Duration"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(y._,{htmlFor:"startDate",className:"text-sm font-medium",children:"Start Date"}),(0,a.jsx)(b.I,{id:"startDate",type:"date",value:p.startDate,onChange:e=>T("startDate",e.target.value),className:"h-11 rounded-lg border-2 focus:ring-2 focus:ring-primary/20 transition-all duration-200 ".concat(f.startDate?"border-red-500":"")}),f.startDate&&(0,a.jsx)("p",{className:"text-xs text-red-500 mt-1",children:f.startDate})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(y._,{htmlFor:"endDate",className:"text-sm font-medium",children:"End Date"}),(0,a.jsx)(b.I,{id:"endDate",type:"date",value:p.endDate,onChange:e=>T("endDate",e.target.value),className:"h-11 rounded-lg border-2 focus:ring-2 focus:ring-primary/20 transition-all duration-200 ".concat(f.endDate?"border-red-500":"")}),f.endDate&&(0,a.jsx)("p",{className:"text-xs text-red-500 mt-1",children:f.endDate})]})]}),E()>0&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground bg-blue-50 dark:bg-blue-950/30 p-3 rounded-lg",children:[(0,a.jsx)(H.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Trip duration: ",E()," days"]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(y._,{htmlFor:"purpose",className:"text-sm font-medium",children:"Purpose of Visit"}),(0,a.jsx)(b.I,{id:"purpose",placeholder:"e.g., Tourism, Business, Family visit",value:p.purpose,onChange:e=>T("purpose",e.target.value),className:"h-11 rounded-lg border-2 focus:ring-2 focus:ring-primary/20 transition-all duration-200 ".concat(f.purpose?"border-red-500":"")}),f.purpose&&(0,a.jsx)("p",{className:"text-xs text-red-500 mt-1",children:f.purpose})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(y._,{htmlFor:"accommodation",className:"text-sm font-medium",children:"Accommodation Details (Optional)"}),(0,a.jsx)(b.I,{id:"accommodation",placeholder:"Hotel name, address, or contact details",value:p.accommodation,onChange:e=>T("accommodation",e.target.value),className:"h-11 rounded-lg border-2 focus:ring-2 focus:ring-primary/20 transition-all duration-200"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(y._,{htmlFor:"itinerary",className:"text-sm font-medium",children:"Trip Itinerary"}),(0,a.jsx)(G,{id:"itinerary",placeholder:"Describe your planned activities, places to visit, and daily schedule...",value:p.itinerary,onChange:e=>T("itinerary",e.target.value),className:"min-h-24 rounded-lg border-2 focus:ring-2 focus:ring-primary/20 transition-all duration-200 ".concat(f.itinerary?"border-red-500":"")}),f.itinerary&&(0,a.jsx)("p",{className:"text-xs text-red-500 mt-1",children:f.itinerary}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"This helps authorities locate you quickly in case of emergencies"})]}),(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(Y.Z,{className:"h-5 w-5 text-primary"}),(0,a.jsx)(y._,{className:"text-base font-semibold",children:"Emergency Contacts"})]}),(0,a.jsxs)(r.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{g(e=>({...e,emergencyContacts:[...e.emergencyContacts,{name:"",relationship:"",phone:""}]}))},className:"hover:scale-105 transition-all duration-200 bg-transparent rounded-lg",children:[(0,a.jsx)(B.Z,{className:"h-4 w-4 mr-1"}),"Add Contact"]})]}),f.emergencyContacts&&(0,a.jsx)("p",{className:"text-xs text-red-500",children:f.emergencyContacts}),(0,a.jsx)("div",{className:"space-y-4",children:p.emergencyContacts.map((e,s)=>(0,a.jsxs)("div",{className:"p-5 border-2 border-border rounded-xl space-y-4 animate-in fade-in-0 slide-in-from-left-4 duration-300 hover:shadow-md transition-shadow",style:{animationDelay:"".concat(100*s,"ms")},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(l.C,{variant:"outline",className:"px-3 py-1",children:["Contact ",s+1]}),p.emergencyContacts.length>1&&(0,a.jsx)(r.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>Z(s),className:"hover:scale-105 transition-all duration-200 text-red-500 hover:text-red-700 hover:bg-red-50",children:(0,a.jsx)(V.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y._,{className:"text-xs font-medium",children:"Full Name"}),(0,a.jsx)(b.I,{placeholder:"Contact name",value:e.name,onChange:e=>A(s,"name",e.target.value),className:"h-10 rounded-lg border-2 focus:ring-2 focus:ring-primary/20 transition-all duration-200"}),f["emergencyContacts_".concat(s,"_name")]&&(0,a.jsx)("p",{className:"text-xs text-red-500",children:f["emergencyContacts_".concat(s,"_name")]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y._,{className:"text-xs font-medium",children:"Relationship"}),(0,a.jsx)(b.I,{placeholder:"e.g., Spouse, Parent, Friend",value:e.relationship,onChange:e=>A(s,"relationship",e.target.value),className:"h-10 rounded-lg border-2 focus:ring-2 focus:ring-primary/20 transition-all duration-200"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y._,{className:"text-xs font-medium",children:"Phone Number"}),(0,a.jsx)(b.I,{type:"tel",placeholder:"+91 XXXXX XXXXX",value:e.phone,onChange:e=>A(s,"phone",e.target.value),className:"h-10 rounded-lg border-2 focus:ring-2 focus:ring-primary/20 transition-all duration-200"}),f["emergencyContacts_".concat(s,"_phone")]&&(0,a.jsx)("p",{className:"text-xs text-red-500",children:f["emergencyContacts_".concat(s,"_phone")]})]})]})]},s))})]}),(0,a.jsxs)("div",{className:"flex space-x-4 pt-6",children:[(0,a.jsx)(r.z,{type:"button",variant:"outline",onClick:u,disabled:v,className:"flex-1 h-12 rounded-lg hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 bg-transparent border-2",children:"Back"}),(0,a.jsx)(r.z,{type:"submit",disabled:v,className:"flex-1 h-12 rounded-lg shadow-lg hover:shadow-xl hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 focus:ring-2 focus:ring-primary/20 focus:ring-offset-2",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Storing on Blockchain..."]}):"Complete Registration"})]})]})]})]})})}function J(e){var s,t;let{onContinue:n,userInfo:c,tripDetails:d}=e,m=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-primary/5 to-accent/5",children:(0,a.jsx)(i.Zb,{className:"w-full max-w-2xl animate-in fade-in-0 slide-in-from-bottom-4 duration-500",children:(0,a.jsxs)(i.aY,{className:"p-8 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-6",children:[(0,a.jsxs)("div",{className:"p-8 bg-gradient-to-br from-primary/10 to-accent/10 rounded-2xl border-2 border-primary/20 animate-in fade-in-0 zoom-in-95 duration-700 delay-200",children:[(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"p-6 bg-primary rounded-full animate-pulse",children:(0,a.jsx)(o.Z,{className:"h-20 w-20 text-white"})}),(0,a.jsx)("div",{className:"absolute -bottom-2 -right-2 p-2 bg-accent rounded-full animate-bounce",children:(0,a.jsx)(x.Z,{className:"h-8 w-8 text-white"})})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-primary animate-in fade-in-0 slide-in-from-bottom-2 duration-500 delay-400",children:"You're Protected"}),(0,a.jsx)("p",{className:"text-lg text-muted-foreground leading-relaxed animate-in fade-in-0 slide-in-from-bottom-2 duration-500 delay-500",children:"NaviSafe is now actively monitoring your safety throughout your entire trip"}),(0,a.jsx)("div",{className:"flex justify-center pt-2",children:(0,a.jsx)(l.C,{variant:"default",className:"px-4 py-2 text-sm font-semibold animate-pulse",children:"\uD83D\uDEE1️ Active Protection Status"})})]})]}),(0,a.jsxs)("div",{className:"space-y-2 animate-in fade-in-0 slide-in-from-bottom-2 duration-500 delay-600",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:"Registration Complete!"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Our advanced AI system will track your location and alert authorities in case of emergencies."})]})]}),d&&(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-muted/30 rounded-lg border animate-in fade-in-0 slide-in-from-top-4 duration-500 delay-200",children:[(0,a.jsxs)("h3",{className:"font-semibold flex items-center space-x-2",children:[(0,a.jsx)(U.Z,{className:"h-5 w-5 text-primary"}),(0,a.jsx)("span",{children:"Trip Summary"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(H.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-medium",children:"Duration:"}),(0,a.jsxs)(l.C,{variant:"outline",children:[(()=>{if((null==d?void 0:d.startDate)&&(null==d?void 0:d.endDate)){let e=new Date(d.startDate);return Math.ceil(Math.abs(new Date(d.endDate).getTime()-e.getTime())/864e5)}return 0})()," days"]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Start:"})," ",m(d.startDate)]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"End:"})," ",m(d.endDate)]})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-medium",children:"Purpose:"})," ",d.purpose]})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(Y.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-medium",children:"Emergency Contacts:"}),(0,a.jsx)(l.C,{variant:"outline",children:(null===(s=d.emergencyContacts)||void 0===s?void 0:s.length)||0})]}),null===(t=d.emergencyContacts)||void 0===t?void 0:t.slice(0,2).map((e,s)=>(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.name," (",e.relationship,")"]},s))]})]})]}),(0,a.jsxs)("div",{className:"space-y-3 p-4 bg-blue-50 dark:bg-blue-950 rounded-lg border border-blue-200 dark:border-blue-800 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-300",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Time-Bound Digital Tourist ID Active"})]}),(0,a.jsxs)("div",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[(0,a.jsxs)("p",{children:["• Your Digital ID is valid from ",(null==d?void 0:d.startDate)?m(d.startDate):"today"," ","to ",(null==d?void 0:d.endDate)?m(d.endDate):"your departure"]}),(0,a.jsx)("p",{children:"• Safety monitoring will automatically deactivate after your trip ends"}),(0,a.jsx)("p",{children:"• All data will be securely archived according to privacy regulations"})]})]}),(0,a.jsxs)("div",{className:"space-y-3 p-4 bg-accent/10 rounded-lg border border-accent/20 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-400",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5 text-accent"}),(0,a.jsx)("span",{className:"text-sm font-medium text-accent",children:"Safety Features Activated"})]}),(0,a.jsxs)("ul",{className:"text-xs text-muted-foreground space-y-1",children:[(0,a.jsx)("li",{children:"• Real-time location monitoring during trip duration"}),(0,a.jsx)("li",{children:"• Emergency SOS alerts with automatic authority notification"}),(0,a.jsx)("li",{children:"• Safe zone notifications and risk area warnings"}),(0,a.jsx)("li",{children:"• 24/7 authority connection and emergency response"}),(0,a.jsx)("li",{children:"• AI-powered anomaly detection for your safety"})]})]}),(0,a.jsx)(r.z,{onClick:n,className:"w-full h-12 text-base font-semibold hover:scale-105 transition-all duration-200",size:"lg",children:"Continue to Safety Dashboard"})]})})})}var K=t(6865),Q=t(3041),$=t(9202),ee=t(7877),es=t(2926),et=t(9474),ea=t(8736),en=t(2718),er=t(4938),ei=t(8919),el=t(8680);let ec=null,eo=()=>(ec||((ec=(0,el.io)("ws://localhost:3001",{autoConnect:!1,transports:["websocket","polling"]})).on("connect",()=>{console.log("[v0] Socket.IO connected:",null==ec?void 0:ec.id)}),ec.on("disconnect",()=>{console.log("[v0] Socket.IO disconnected")}),ec.on("connect_error",e=>{console.log("[v0] Socket.IO connection error:",e),ed()})),ec),ed=()=>{console.log("[v0] Using simulated Socket.IO for demo"),setInterval(()=>{ec&&ec.emit("location_update",{touristId:"demo-tourist-001",location:{lat:28.6139+(Math.random()-.5)*.01,lng:77.209+(Math.random()-.5)*.01},timestamp:new Date().toISOString(),safetyScore:Math.floor(100*Math.random())})},5e3)},em=e=>{(null==ec?void 0:ec.connected)?(ec.emit("location_update",e),console.log("[v0] Broadcasting location update:",e)):console.log("[v0] Socket not connected, location update queued:",e)},eu=e=>{(null==ec?void 0:ec.connected)?(ec.emit("geofence_event",e),console.log("[v0] Broadcasting geofence event:",e)):console.log("[v0] Socket not connected, geofence event queued:",e)},ex=e=>{(null==ec?void 0:ec.connected)?(ec.emit("safety_alert",e),console.log("[v0] Broadcasting safety alert:",e)):console.log("[v0] Socket not connected, safety alert queued:",e)},eh=[{id:"green-safe-zone-center",name:"Central Safe Zone",lat:28.754605,lng:77.503009,radius:300,type:"safe",color:"#10b981"},{id:"green-safe-zone-north",name:"North Safe Zone",lat:28.757605,lng:77.503009,radius:200,type:"safe",color:"#10b981"},{id:"green-safe-zone-south",name:"South Safe Zone",lat:28.751605,lng:77.503009,radius:200,type:"safe",color:"#10b981"},{id:"orange-caution-northeast",name:"Northeast Caution Zone",lat:28.758605,lng:77.508009,radius:250,type:"caution",color:"#f59e0b"},{id:"orange-caution-northwest",name:"Northwest Caution Zone",lat:28.758605,lng:77.498009,radius:250,type:"caution",color:"#f59e0b"},{id:"orange-caution-southeast",name:"Southeast Caution Zone",lat:28.750605,lng:77.508009,radius:250,type:"caution",color:"#f59e0b"},{id:"orange-caution-southwest",name:"Southwest Caution Zone",lat:28.750605,lng:77.498009,radius:250,type:"caution",color:"#f59e0b"},{id:"purple-crowded-east",name:"East Crowded Area",lat:28.754605,lng:77.510009,radius:180,type:"crowded",color:"#7c3aed"},{id:"purple-crowded-west",name:"West Crowded Area",lat:28.754605,lng:77.496009,radius:180,type:"crowded",color:"#7c3aed"},{id:"red-restricted-far-north",name:"North Restricted Zone",lat:28.762605,lng:77.503009,radius:200,type:"restricted",color:"#dc2626"},{id:"red-restricted-far-south",name:"South Restricted Zone",lat:28.746605,lng:77.503009,radius:200,type:"restricted",color:"#dc2626"},{id:"red-restricted-far-east",name:"East Restricted Zone",lat:28.754605,lng:77.515009,radius:200,type:"restricted",color:"#dc2626"},{id:"red-restricted-far-west",name:"West Restricted Zone",lat:28.754605,lng:77.491009,radius:200,type:"restricted",color:"#dc2626"},{id:"red-restricted-northeast-corner",name:"Northeast Restricted Zone",lat:28.760605,lng:77.512009,radius:150,type:"restricted",color:"#dc2626"},{id:"red-restricted-northwest-corner",name:"Northwest Restricted Zone",lat:28.760605,lng:77.494009,radius:150,type:"restricted",color:"#dc2626"}],ep=e=>{let[s,t]=(0,n.useState)(null),[a,r]=(0,n.useState)(!1),[i,l]=(0,n.useState)(null),[c,o]=(0,n.useState)("unknown"),[d,m]=(0,n.useState)(100),[u,x]=(0,n.useState)(!1),[h,p]=(0,n.useState)({isActive:!1,zoneName:"",countdown:0}),g=(0,n.useRef)(null),f=(0,n.useRef)(null),j=(0,n.useRef)(new Set),v=(0,n.useRef)(null),N=(0,n.useRef)(null),b=(0,n.useRef)(null),y=(0,n.useRef)(eh),w=(0,n.useRef)(e.touristId);w.current=e.touristId,(0,n.useCallback)(()=>y.current,[]);let S=(0,n.useCallback)((e,s,t,a)=>{let n=(t-e)*Math.PI/180,r=(a-s)*Math.PI/180,i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e*Math.PI/180)*Math.cos(t*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371e3},[]),k=(0,n.useCallback)((e,s)=>{let t=50,a=!1,n=!1,r=!1,i=!1;return s.forEach(s=>{if(S(e.lat,e.lng,s.lat,s.lng)<=s.radius)switch(s.type){case"safe":a=!0,t=Math.max(t,95);break;case"caution":r=!0,t=Math.min(t,65);break;case"restricted":n=!0,t=Math.min(t,15);break;case"crowded":i=!0,t=Math.min(t,70)}}),n?t=15:!a||r||i?a&&(r||i)?t=75:a||r||n||i||(t=60):t=95,Math.round(Math.max(0,Math.min(100,t)))},[S]),C=(0,n.useCallback)(e=>{console.log("[v0] Emergency alert triggered for zone:",e),p({isActive:!0,zoneName:e,countdown:5});let s=5;b.current=setInterval(()=>{s-=1,p(e=>({...e,countdown:s})),s<=0&&(b.current&&clearInterval(b.current),D(e))},1e3),N.current=setTimeout(()=>{D(e)},5e3)},[]),D=(0,n.useCallback)(e=>{console.log("[v0] Initiating police call for emergency in zone:",e),N.current&&clearTimeout(N.current),b.current&&clearInterval(b.current),alert("\uD83D\uDEA8 EMERGENCY CALL INITIATED \uD83D\uDEA8\n\nPolice have been contacted automatically.\nLocation: ".concat(e,"\nHelp is on the way!\n\nStay calm and move to a safe area if possible.")),p({isActive:!1,zoneName:"",countdown:0}),ex({touristId:w.current,alertType:"emergency_call_initiated",location:s?{lat:s.lat,lng:s.lng}:{lat:0,lng:0},safetyScore:0,message:"EMERGENCY: Police call initiated automatically for tourist in ".concat(e),timestamp:new Date().toISOString()})},[s]),I=(0,n.useCallback)(()=>{console.log("[v0] Emergency alert dismissed by user"),N.current&&clearTimeout(N.current),b.current&&clearInterval(b.current),p({isActive:!1,zoneName:"",countdown:0})},[]),T=(0,n.useCallback)((e,s)=>{let t=new Set;s.forEach(a=>{S(e.lat,e.lng,a.lat,a.lng)<=a.radius&&(t.add(a.id),j.current.has(a.id)||(console.log("[v0] Entered zone: ".concat(a.name," (").concat(a.type,")")),eu({touristId:w.current,eventType:"enter",zoneName:a.name,zoneType:a.type,location:{lat:e.lat,lng:e.lng},timestamp:e.timestamp}),"restricted"===a.type&&(C(a.name),ex({touristId:w.current,alertType:"restricted_zone",location:{lat:e.lat,lng:e.lng},safetyScore:k(e,s),message:"CRITICAL: Tourist entered restricted zone: ".concat(a.name),timestamp:e.timestamp}))))}),j.current.forEach(a=>{if(!t.has(a)){let t=s.find(e=>e.id===a);t&&(console.log("[v0] Exited zone: ".concat(t.name," (").concat(t.type,")")),eu({touristId:w.current,eventType:"exit",zoneName:t.name,zoneType:t.type,location:{lat:e.lat,lng:e.lng},timestamp:e.timestamp}))}}),j.current=t},[S,k,C]),Z=(0,n.useCallback)((e,s)=>{var a;x(!0),v.current&&(clearTimeout(v.current),v.current=null);let n={lat:e,lng:s,accuracy:10,timestamp:new Date().toISOString()};console.log("[v0] Simulated position update:",n);let r={lat:n.lat,lng:n.lng,accuracy:n.accuracy,timestamp:n.timestamp};console.log("[v0] GPS position updated:",r);let i=y.current,c=k(r,i);m(c),T(r,i),em({touristId:w.current,location:{lat:r.lat,lng:r.lng},safetyScore:c,zoneType:(null===(a=i.find(e=>S(r.lat,r.lng,e.lat,e.lng)<=e.radius))||void 0===a?void 0:a.type)||"unknown",timestamp:r.timestamp}),c<30&&f.current&&k(f.current,i)>=30&&ex({touristId:w.current,alertType:"low_safety_score",location:{lat:r.lat,lng:r.lng},safetyScore:c,message:"Safety score dropped to ".concat(c,"% - immediate attention required"),timestamp:r.timestamp}),t(r),f.current=r,l(null)},[k,T,S]),A=(0,n.useCallback)(e=>{var s;let a={lat:e.coords.latitude,lng:e.coords.longitude,accuracy:e.coords.accuracy,timestamp:new Date().toISOString()};console.log("[v0] GPS position updated:",a);let n=y.current,r=k(a,n);m(r),T(a,n),em({touristId:w.current,location:{lat:a.lat,lng:a.lng},safetyScore:r,zoneType:(null===(s=n.find(e=>S(a.lat,a.lng,e.lat,e.lng)<=e.radius))||void 0===s?void 0:s.type)||"unknown",timestamp:a.timestamp}),r<30&&f.current&&k(f.current,n)>=30&&ex({touristId:w.current,alertType:"low_safety_score",location:{lat:a.lat,lng:a.lng},safetyScore:r,message:"Safety score dropped to ".concat(r,"% - immediate attention required"),timestamp:a.timestamp}),t(a),f.current=a,l(null)},[k,T,S]),E=(0,n.useCallback)(e=>{let t="Unknown GPS error";switch(e.code){case e.PERMISSION_DENIED:t="GPS access denied by user",o("denied");break;case e.POSITION_UNAVAILABLE:t="GPS position unavailable";break;case e.TIMEOUT:t="GPS request timeout"}console.error("[v0] GPS error:",t,e),e.code!==e.TIMEOUT||u?e.code!==e.TIMEOUT&&l(t):(console.log("[v0] GPS timeout - starting fallback timer"),v.current=setTimeout(()=>{u||s||(console.log("[v0] GPS unavailable, starting with specified coordinates"),Z(28.754605,77.503009))},5e3))},[u,s,Z]),R=(0,n.useCallback)(()=>{null!==g.current&&(navigator.geolocation.clearWatch(g.current),g.current=null),v.current&&(clearTimeout(v.current),v.current=null),N.current&&clearTimeout(N.current),b.current&&clearInterval(b.current),r(!1),console.log("[v0] GPS tracking stopped")},[]),z=(0,n.useCallback)(async()=>{if(!navigator.geolocation)return l("Geolocation not supported by this browser"),!1;try{var s,t,a;if("permissions"in navigator){let e=await navigator.permissions.query({name:"geolocation"});o(e.state),e.addEventListener("change",()=>{o(e.state)})}let n={enableHighAccuracy:null===(s=e.enableHighAccuracy)||void 0===s||s,timeout:null!==(t=e.timeout)&&void 0!==t?t:15e3,maximumAge:null!==(a=e.maximumAge)&&void 0!==a?a:3e5};return u||navigator.geolocation.getCurrentPosition(A,E,n),u||(g.current=navigator.geolocation.watchPosition(A,E,n)),r(!0),console.log("[v0] GPS tracking started"),!0}catch(e){return console.error("[v0] Failed to start GPS tracking:",e),l("Failed to start GPS tracking"),!1}},[e.enableHighAccuracy,e.timeout,e.maximumAge,A,E,u]),L=(0,n.useCallback)(()=>{x(!1),a&&(R(),setTimeout(()=>z(),100))},[a,z,R]);return(0,n.useEffect)(()=>()=>{R()},[R]),{currentPosition:s,isTracking:a,error:i,permissionStatus:c,currentZones:y.current,safetyScore:d,isManualMode:u,emergencyAlert:h,dismissEmergencyAlert:I,startTracking:z,stopTracking:R,simulatePositionUpdate:Z,enableGPSMode:L}};var eg=t(9076),ef=t(5395),ej=t(9227),ev=t(3276);function eN(e){var s;let{touristId:c,userAge:o,onLocationChange:d,onSafeScoreChange:m,initialZones:u}=e,x=(0,n.useRef)(null),[h,p]=(0,n.useState)(null),[g,f]=(0,n.useState)(null),[j,v]=(0,n.useState)([]),[N,b]=(0,n.useState)(!0),[y,w]=(0,n.useState)(null),[S,k]=(0,n.useState)(!1),{currentPosition:C,isTracking:D,error:I,permissionStatus:T,currentZones:Z,safetyScore:A,emergencyAlert:E,startTracking:R,stopTracking:z,simulatePositionUpdate:L}=ep({touristId:c,enableHighAccuracy:!0,timeout:15e3,maximumAge:3e4});(0,n.useEffect)(()=>{let e=null;try{(e=eo())?(e.on("connect",()=>{k(!0),console.log("[v0] Socket.IO connected for real-time updates")}),e.on("disconnect",()=>{k(!1),console.log("[v0] Socket.IO disconnected")}),e.on("connect_error",e=>{console.warn("[v0] Socket connection error:",e),k(!1)}),e.connect()):(console.warn("[v0] Socket.IO not available, simulating connection"),setTimeout(()=>k(!0),1e3))}catch(e){console.warn("[v0] Socket.IO initialization failed:",e),setTimeout(()=>k(!0),1e3)}return()=>{e&&e.disconnect()}},[]),(0,n.useEffect)(()=>{if(x.current&&!h){let e=document.createElement("link");e.rel="stylesheet",e.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(e),t.e(212).then(t.t.bind(t,759,23)).then(e=>{try{delete e.Icon.Default.prototype._getIconUrl,e.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});let s=e.map(x.current,{center:[28.6139,77.209],zoom:15,zoomControl:!0,scrollWheelZoom:!0,doubleClickZoom:!0,touchZoom:!0});e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xa9 OpenStreetMap contributors",maxZoom:19,minZoom:10}).addTo(s);let t=e.divIcon({className:"custom-user-marker",html:'\n                <div style="\n                  background: linear-gradient(135deg, #3b82f6, #1d4ed8);\n                  color: white;\n                  border-radius: 50%;\n                  width: 40px;\n                  height: 40px;\n                  display: flex;\n                  align-items: center;\n                  justify-content: center;\n                  font-size: 20px;\n                  border: 4px solid white;\n                  box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n                  cursor: move;\n                  animation: pulse 2s infinite;\n                ">\uD83D\uDCCD</div>\n                <style>\n                  @keyframes pulse {\n                    0% { box-shadow: 0 4px 12px rgba(0,0,0,0.3), 0 0 0 0 rgba(59, 130, 246, 0.7); }\n                    70% { box-shadow: 0 4px 12px rgba(0,0,0,0.3), 0 0 0 20px rgba(59, 130, 246, 0); }\n                    100% { box-shadow: 0 4px 12px rgba(0,0,0,0.3), 0 0 0 0 rgba(59, 130, 246, 0); }\n                  }\n                </style>\n              ',iconSize:[40,40],iconAnchor:[20,20]}),a=e.marker([28.6139,77.209],{draggable:!0,icon:t}).addTo(s);a.on("dragstart",()=>{s.closePopup()}),a.on("dragend",e=>{let s=e.target.getLatLng();console.log("[v0] Marker dragged to:",s.lat,s.lng),L(s.lat,s.lng),a.bindPopup('\n                <div style="text-align: center; min-width: 200px;">\n                  <strong>\uD83D\uDCCD Your Location</strong><br/>\n                  <small>Lat: '.concat(s.lat.toFixed(6),"</small><br/>\n                  <small>Lng: ").concat(s.lng.toFixed(6),'</small><br/>\n                  <div style="margin-top: 8px; padding: 4px 8px; background: #3b82f6; color: white; border-radius: 4px; font-weight: bold;">\n                    Simulated GPS Position\n                  </div>\n                  <em style="color: #6b7280; font-size: 12px;">Drag to simulate movement</em>\n                </div>\n              ')).openPopup()}),p(s),f(a),b(!1)}catch(e){console.error("Map initialization error:",e),w("Failed to initialize map"),b(!1)}}).catch(e=>{console.error("Leaflet import error:",e),w("Failed to load map library"),b(!1)})}return()=>{h&&(h.remove(),p(null),f(null),v([]))}},[]),(0,n.useEffect)(()=>{if(h&&g&&C){var e;let{lat:s,lng:t}=C;g.setLatLng([s,t]),h.panTo([s,t],{animate:!0,duration:1}),g.bindPopup('\n        <div style="text-align: center; min-width: 200px;">\n          <strong>\uD83D\uDCCD Your Location</strong><br/>\n          <small>Lat: '.concat(s.toFixed(6),"</small><br/>\n          <small>Lng: ").concat(t.toFixed(6),'</small><br/>\n          <div style="margin-top: 8px; padding: 4px 8px; background: ').concat(A>=70?"#10b981":A>=30?"#f59e0b":"#dc2626",'; color: white; border-radius: 4px; font-weight: bold;">\n            Safety Score: ').concat(A,'%\n          </div>\n          <small style="color: #6b7280;">\n            ').concat(D?"\uD83D\uDFE2 Live GPS Tracking":"\uD83D\uDD34 GPS Tracking Stopped",'\n          </small><br/>\n          <em style="color: #6b7280; font-size: 12px;">\n            Accuracy: \xb1').concat((null===(e=C.accuracy)||void 0===e?void 0:e.toFixed(0))||"Unknown","m\n          </em>\n        </div>\n      ")),console.log("[v0] Map updated with GPS position:",{lat:s,lng:t,safetyScore:A})}},[h,g,C,A,D]),(0,n.useEffect)(()=>{if(C){let{lat:e,lng:s}=C;null==d||d({lat:e,lng:s})}},[C,d]),(0,n.useEffect)(()=>{null==m||m(A)},[A,m]),(0,n.useEffect)(()=>{h&&Z.length>0&&(j.forEach(e=>h.removeLayer(e)),v(Z.map(e=>{let s=window.L.circle([e.lat,e.lng],{radius:e.radius,color:e.color,fillColor:e.color,fillOpacity:"restricted"===e.type?.3:.15,weight:"restricted"===e.type?3:2,dashArray:"crowded"===e.type?"10, 5":void 0,className:"restricted"===e.type?"animate-pulse":""}).addTo(h);return s.bindPopup('\n          <div style="text-align: center; min-width: 180px;">\n            <strong style="color: '.concat(e.color,';">').concat(e.name,'</strong><br/>\n            <span style="color: ').concat(e.color,'; font-weight: bold;">\n              ').concat(e.type.charAt(0).toUpperCase()+e.type.slice(1)," Zone\n            </span><br/>\n            <small>Radius: ").concat(e.radius,"m</small><br/>\n            ").concat("restricted"===e.type?'<em style="color: #dc2626;">\uD83D\uDEA8 Avoid this area</em>':"","\n            ").concat("safe"===e.type?'<em style="color: #10b981;">✅ Safe for tourists</em>':"","\n            ").concat("caution"===e.type?'<em style="color: #f59e0b;">⚠️ Exercise caution</em>':"","\n            ").concat("crowded"===e.type?'<em style="color: #7c3aed;">\uD83D\uDC65 Protect belongings</em>':"","\n          </div>\n        ")),s})),console.log("[v0] Updated geofence zones on map:",Z.length))},[h,Z]);let M=async()=>{await R()||"denied"!==T||w("GPS permission denied. Please enable location access in your browser settings.")};return y?(0,a.jsx)(i.Zb,{className:"border-destructive",children:(0,a.jsxs)(i.aY,{className:"p-6 text-center",children:[(0,a.jsxs)("div",{className:"text-destructive mb-4",children:[(0,a.jsx)(_.Z,{className:"h-12 w-12 mx-auto mb-2"}),(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Map Error"}),(0,a.jsx)("p",{className:"text-sm",children:y})]}),(0,a.jsxs)(r.z,{onClick:()=>window.location.reload(),variant:"outline",children:[(0,a.jsx)(eg.Z,{className:"h-4 w-4 mr-2"}),"Retry"]})]})}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(i.Zb,{className:"dark:bg-card dark:border-border",children:[(0,a.jsx)(i.Ol,{className:"pb-3",children:(0,a.jsxs)(i.ll,{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ee.Z,{className:"h-4 w-4 ".concat(D?"animate-pulse text-green-500":"text-gray-400")}),(0,a.jsx)("span",{className:"text-foreground",children:"Real-Time GPS Tracking"}),E.isActive&&(0,a.jsx)(l.C,{variant:"destructive",className:"animate-pulse",children:"\uD83D\uDEA8 EMERGENCY"})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:S||D?(0,a.jsxs)(l.C,{variant:"outline",className:"text-green-600 border-green-300 dark:text-green-400 dark:border-green-600",children:[(0,a.jsx)(es.Z,{className:"h-3 w-3 mr-1"}),"Connected"]}):(0,a.jsxs)(l.C,{variant:"outline",className:"text-red-600 border-red-300 dark:text-red-400 dark:border-red-600",children:[(0,a.jsx)(ef.Z,{className:"h-3 w-3 mr-1"}),"Offline"]})})]})}),(0,a.jsxs)(i.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.z,{onClick:D?z:M,size:"sm",variant:D?"destructive":"default",className:"transition-all duration-200",children:D?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ej.Z,{className:"h-4 w-4 mr-2"}),"Stop GPS"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ev.Z,{className:"h-4 w-4 mr-2"}),"Start GPS"]})}),"denied"===T&&(0,a.jsx)(l.C,{variant:"destructive",className:"text-xs",children:"Permission Denied"}),I&&(0,a.jsx)(l.C,{variant:"destructive",className:"text-xs",children:I})]}),(0,a.jsxs)("div",{className:"text-right text-sm",children:[(0,a.jsxs)("div",{className:"font-semibold ".concat(A>=70?"text-green-600 dark:text-green-400":A>=30?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"),children:["Safety: ",A,"%"]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:C?"\xb1".concat((null===(s=C.accuracy)||void 0===s?void 0:s.toFixed(0))||"?","m accuracy"):"No GPS signal"})]})]}),C&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs bg-muted/50 dark:bg-muted/30 rounded p-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Lat:"}),(0,a.jsx)("div",{className:"font-mono text-foreground",children:C.lat.toFixed(6)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Lng:"}),(0,a.jsx)("div",{className:"font-mono text-foreground",children:C.lng.toFixed(6)})]})]})]})]}),(0,a.jsx)(i.Zb,{className:"dark:bg-card dark:border-border",children:(0,a.jsx)(i.aY,{className:"p-0",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{ref:x,className:"h-96 w-full rounded-lg overflow-hidden",style:{minHeight:"384px"}}),N&&(0,a.jsx)("div",{className:"absolute inset-0 bg-background/80 dark:bg-background/90 backdrop-blur-sm rounded-lg flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loading interactive map..."})]})})]})})}),(0,a.jsxs)(i.Zb,{className:"dark:bg-card dark:border-border",children:[(0,a.jsx)(i.Ol,{className:"pb-3",children:(0,a.jsx)(i.ll,{className:"text-sm text-foreground",children:"Static Safety Zones (Predefined)"})}),(0,a.jsxs)(i.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,a.jsx)("span",{className:"text-foreground",children:"Green Safe Zones (3 zones)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),(0,a.jsx)("span",{className:"text-foreground",children:"Orange Caution Zones (4 zones)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-500"}),(0,a.jsx)("span",{className:"text-foreground",children:"Red Restricted Zones (6 zones)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),(0,a.jsx)("span",{className:"text-foreground",children:"Purple Crowded Areas (2 zones)"})]})]}),(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t text-xs text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{children:["Total Zones: ",Z.length]}),(0,a.jsx)("span",{children:"\uD83D\uDCCD Drag marker to test emergency alerts"})]}),(0,a.jsxs)("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-950/50 rounded border border-red-200 dark:border-red-800",children:[(0,a.jsx)("p",{className:"text-red-700 dark:text-red-300 font-medium",children:"⚠️ Red zones trigger automatic emergency alerts"}),(0,a.jsx)("p",{className:"text-red-600 dark:text-red-400 text-xs",children:"Police call initiated if not dismissed within 5 seconds"})]})]})]})]})]})}var eb=t(5156);function ey(e){let{className:s,orientation:t="horizontal",decorative:n=!0,...r}=e;return(0,a.jsx)(eb.f,{"data-slot":"separator",decorative:n,orientation:t,className:(0,D.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...r})}var ew=t(7404),eS=t(91),ek=t(8867),eC=t(1217),eD=t(8335);function eI(e){let{userInfo:s}=e,[t,c]=(0,n.useState)([]),[d,u]=(0,n.useState)({blockHeight:18945672,networkHashRate:"245.7 TH/s",avgBlockTime:"12.3s",totalTransactions:1847293}),[h,p]=(0,n.useState)(""),[g,f]=(0,n.useState)("");(0,n.useEffect)(()=>{c([{hash:"0x"+Math.random().toString(16).substr(2,64),blockNumber:d.blockHeight,timestamp:new Date,from:"0x742d35Cc6634C0532925a3b8D4C0532925a3b8D4",to:"0xNaviSafeContract123456789abcdef",type:"ID_ISSUANCE",touristId:(null==s?void 0:s.name)?"NVS-".concat(Date.now().toString().slice(-8)):"NVS-12345678",gasUsed:21e3,status:"confirmed"},{hash:"0x"+Math.random().toString(16).substr(2,64),blockNumber:d.blockHeight-1,timestamp:new Date(Date.now()-3e5),from:"0xNaviSafeContract123456789abcdef",to:"0x742d35Cc6634C0532925a3b8D4C0532925a3b8D4",type:"LOCATION_UPDATE",touristId:"NVS-87654321",gasUsed:15e3,status:"confirmed"},{hash:"0x"+Math.random().toString(16).substr(2,64),blockNumber:d.blockHeight-2,timestamp:new Date(Date.now()-6e5),from:"0xAuthorityContract987654321fedcba",to:"0xNaviSafeContract123456789abcdef",type:"INCIDENT_LOG",touristId:"NVS-11223344",gasUsed:45e3,status:"confirmed"}])},[s,d.blockHeight]),(0,n.useEffect)(()=>{let e=setInterval(()=>{if(.3>Math.random()){let e=["LOCATION_UPDATE","VERIFICATION","INCIDENT_LOG"],s=e[Math.floor(Math.random()*e.length)],t={hash:"0x"+Math.random().toString(16).substr(2,64),blockNumber:d.blockHeight+Math.floor(3*Math.random()),timestamp:new Date,from:"INCIDENT_LOG"===s?"0xAuthorityContract987654321fedcba":"0x742d35Cc6634C0532925a3b8D4C0532925a3b8D4",to:"0xNaviSafeContract123456789abcdef",type:s,touristId:"NVS-".concat(Math.floor(99999999*Math.random()).toString().padStart(8,"0")),gasUsed:15e3+Math.floor(3e4*Math.random()),status:Math.random()>.95?"pending":"confirmed"};c(e=>[t,...e.slice(0,9)]),u(e=>({...e,blockHeight:e.blockHeight+(Math.random()>.7?1:0),totalTransactions:e.totalTransactions+1,avgBlockTime:(12+2*Math.random()).toFixed(1)+"s"}))}},15e3);return()=>clearInterval(e)},[d.blockHeight]);let j=e=>{navigator.clipboard.writeText(e),p(e),setTimeout(()=>p(""),2e3)},v=e=>{switch(e){case"ID_ISSUANCE":return"bg-primary/10 text-primary";case"LOCATION_UPDATE":return"bg-blue-500/10 text-blue-600";case"INCIDENT_LOG":return"bg-destructive/10 text-destructive";case"VERIFICATION":return"bg-accent/10 text-accent";default:return"bg-muted text-muted-foreground"}},N=e=>{window.open("https://solscan.io/tx/".concat(e,"?cluster=devnet"),"_blank")},y=g?t.filter(e=>e.hash.toLowerCase().includes(g.toLowerCase())||e.touristId.toLowerCase().includes(g.toLowerCase())):t;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(eS.Z,{className:"h-5 w-5 text-primary"}),(0,a.jsx)("span",{children:"NaviSafe Blockchain Network"}),(0,a.jsx)(l.C,{variant:"secondary",className:"bg-accent/10 text-accent",children:"Live"})]})}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-bold text-primary",children:d.blockHeight.toLocaleString()}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Block Height"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-bold text-accent",children:d.networkHashRate}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Hash Rate"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-bold text-orange-500",children:d.avgBlockTime}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Avg Block Time"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-bold text-blue-600",children:d.totalTransactions.toLocaleString()}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total Transactions"})]})]}),(0,a.jsx)(ey,{}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eC.Z,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(b.I,{placeholder:"Search by transaction hash or tourist ID...",value:g,onChange:e=>f(e.target.value),className:"flex-1"})]})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(eD.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Recent Blockchain Transactions"})]})}),(0,a.jsx)(i.aY,{className:"space-y-3",children:0===y.length?(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsx)(eS.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"No transactions found matching your search."})]}):y.map(e=>(0,a.jsx)("div",{className:"p-4 border border-border rounded-lg space-y-3",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(l.C,{className:v(e.type),children:e.type.replace("_"," ")}),(0,a.jsx)(l.C,{variant:"confirmed"===e.status?"default":"pending"===e.status?"secondary":"destructive",children:e.status}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Block #",e.blockNumber.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Hash:"}),(0,a.jsxs)("span",{className:"text-xs font-mono bg-muted px-2 py-1 rounded",children:[e.hash.slice(0,20),"...",e.hash.slice(-8)]}),(0,a.jsx)(r.z,{variant:"ghost",size:"sm",onClick:()=>j(e.hash),className:"h-6 w-6 p-0",children:h===e.hash?(0,a.jsx)(x.Z,{className:"h-3 w-3 text-accent"}):(0,a.jsx)(ek.Z,{className:"h-3 w-3"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"From:"}),(0,a.jsxs)("p",{className:"font-mono",children:[e.from.slice(0,10),"...",e.from.slice(-8)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"To:"}),(0,a.jsxs)("p",{className:"font-mono",children:[e.to.slice(0,10),"...",e.to.slice(-8)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Tourist ID:"}),(0,a.jsx)("p",{className:"font-medium",children:e.touristId})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Gas Used:"}),(0,a.jsx)("p",{children:e.gasUsed.toLocaleString()})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground",children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(H.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:e.timestamp.toLocaleString()})]})})]})]}),(0,a.jsxs)(r.z,{variant:"outline",size:"sm",onClick:()=>N(e.hash),className:"ml-4",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Explorer"]})]})},e.hash))})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5 text-primary"}),(0,a.jsx)("span",{children:"NaviSafe Smart Contracts"})]})}),(0,a.jsx)(i.aY,{className:"space-y-3",children:(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsx)("div",{className:"p-3 bg-muted/50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Tourist ID Contract"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground font-mono",children:"0xNaviSafeContract123456789abcdef"})]}),(0,a.jsx)(l.C,{variant:"secondary",className:"bg-primary/10 text-primary",children:"Active"})]})}),(0,a.jsx)("div",{className:"p-3 bg-muted/50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Authority Management"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground font-mono",children:"0xAuthorityContract987654321fedcba"})]}),(0,a.jsx)(l.C,{variant:"secondary",className:"bg-accent/10 text-accent",children:"Active"})]})})]})})]})]})}function eT(e){var s,t,c,d,u;let{userInfo:h,onBack:p}=e,[g,j]=(0,n.useState)(new Date),[v,N]=(0,n.useState)(!1),[b,y]=(0,n.useState)("en"),[w,S]=(0,n.useState)(!1),k=(null==h?void 0:null===(s=h.blockchainData)||void 0===s?void 0:s.transactionSignature)||"5J7X9K2M8N4P6Q1R3S5T7U9V2W4X6Y8Z1A3B5C7D9E",C=(null==h?void 0:null===(c=h.blockchainData)||void 0===c?void 0:null===(t=c.slot)||void 0===t?void 0:t.toString())||"200123456",D=(null==h?void 0:null===(d=h.blockchainData)||void 0===d?void 0:d.digitalId)||"NVS-".concat(Date.now().toString().slice(-8)),I=new Date((null==h?void 0:null===(u=h.blockchainData)||void 0===u?void 0:u.blockTime)?1e3*h.blockchainData.blockTime:Date.now()),T=new Date((null==h?void 0:h.expiryDate)||Date.now()+2592e6);(0,n.useEffect)(()=>{let e=setInterval(()=>{j(new Date)},1e3);return()=>clearInterval(e)},[]);let Z=e=>{navigator.clipboard.writeText(e),N(!0),setTimeout(()=>N(!1),2e3)},A={en:{title:"Digital Tourist ID",subtitle:"Your secure travel identification",touristId:"Tourist ID",status:"Status",active:"Active",validUntil:"Valid Until",issuedOn:"Issued On",blockchainId:"Blockchain ID",viewOnBlockchain:"View on Blockchain",qrCode:"QR Code",scanInstructions:"Scan this QR code for instant verification",emergencyInfo:"Emergency Information",bloodType:"Blood Type",allergies:"Allergies",emergencyContact:"Emergency Contact",backToDashboard:"Back to Dashboard",blockchainDetails:"Blockchain Details"},hi:{title:"डिजिटल पर्यटक पहचान",subtitle:"आपकी सुरक्षित यात्रा पहचान",touristId:"पर्यटक आईडी",status:"स्थिति",active:"सक्रिय",validUntil:"तक वैध",issuedOn:"जारी किया गया",blockchainId:"ब्लॉकचेन आईडी",viewOnBlockchain:"ब्लॉकचेन पर देखें",qrCode:"क्यूआर कोड",scanInstructions:"तत्काल सत्यापन के लिए इस QR कोड को स्कैन करें",emergencyInfo:"आपातकालीन जानकारी",bloodType:"रक्त समूह",allergies:"एलर्जी",emergencyContact:"आपातकालीन संपर्क",backToDashboard:"डैशबोर्ड पर वापस",blockchainDetails:"ब्लॉकचेन विवरण"}}[b];return w?(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("div",{className:"bg-foreground text-background p-4 sticky top-0 z-[1000] shadow-md animate-in slide-in-from-top-4 duration-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.z,{variant:"ghost",onClick:()=>S(!1),className:"text-background hover:bg-background/10 hover:scale-105 transition-all duration-200",children:"← Back to Digital ID"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(r.z,{variant:"outline",size:"sm",onClick:()=>y("en"===b?"hi":"en"),className:"flex items-center space-x-2 bg-transparent border-background/20 text-background hover:bg-background/10 hover:scale-105 transition-all duration-200",children:[(0,a.jsx)($.Z,{className:"h-4 w-4 hover:rotate-12 transition-transform duration-300"}),(0,a.jsx)("span",{children:"en"===b?"हिंदी":"English"})]}),(0,a.jsx)(f,{})]})]})}),(0,a.jsx)("div",{className:"p-4 animate-in fade-in-0 slide-in-from-bottom-4 duration-500",children:(0,a.jsx)(eI,{userInfo:h})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("div",{className:"bg-foreground text-background p-4 sticky top-0 z-[1000] shadow-md animate-in slide-in-from-top-4 duration-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(r.z,{variant:"ghost",onClick:p,className:"text-background hover:bg-background/10 hover:scale-105 transition-all duration-200",children:["← ",A.backToDashboard]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(r.z,{variant:"outline",size:"sm",onClick:()=>y("en"===b?"hi":"en"),className:"flex items-center space-x-2 bg-transparent border-background/20 text-background hover:bg-background/10 hover:scale-105 transition-all duration-200",children:[(0,a.jsx)($.Z,{className:"h-4 w-4 hover:rotate-12 transition-transform duration-300"}),(0,a.jsx)("span",{children:"en"===b?"हिंदी":"English"})]}),(0,a.jsx)(f,{})]})]})}),(0,a.jsx)("div",{className:"p-4 space-y-4",children:(0,a.jsxs)(i.Zb,{className:"border-2 border-primary/20 shadow-lg hover:shadow-2xl hover:scale-[1.02] transition-all duration-500 animate-in fade-in-0 slide-in-from-bottom-8 duration-700 hover:shadow-primary/10",children:[(0,a.jsxs)(i.Ol,{className:"text-center space-y-2 bg-gradient-to-r from-primary/5 to-accent/5 hover:from-primary/10 hover:to-accent/10 transition-all duration-300",children:[(0,a.jsx)("div",{className:"flex justify-center animate-in fade-in-0 zoom-in-50 duration-700 delay-200",children:(0,a.jsx)("div",{className:"p-3 bg-primary/10 rounded-full hover:bg-primary/20 transition-all duration-300 hover:scale-110 hover:rotate-6 group",children:(0,a.jsx)(o.Z,{className:"h-8 w-8 text-primary group-hover:text-primary/80 transition-colors duration-300"})})}),(0,a.jsx)(i.ll,{className:"text-xl animate-in fade-in-0 slide-in-from-bottom-4 duration-700 delay-300 hover:text-primary transition-colors duration-300 cursor-default",children:A.title}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground animate-in fade-in-0 slide-in-from-bottom-4 duration-700 delay-400",children:A.subtitle})]}),(0,a.jsxs)(i.aY,{className:"space-y-6 p-6",children:[(0,a.jsxs)("div",{className:"space-y-4 animate-in fade-in-0 slide-in-from-bottom-4 duration-700 delay-500",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 hover:bg-muted/30 p-3 rounded-lg transition-all duration-300 hover:scale-[1.02]",children:[(0,a.jsx)("div",{className:"p-3 bg-muted rounded-full hover:bg-muted/80 transition-all duration-300 hover:scale-110",children:(0,a.jsx)(L.Z,{className:"h-6 w-6"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg hover:text-primary transition-colors duration-300",children:(null==h?void 0:h.name)||"John Doe"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(null==h?void 0:h.age)||"28"," years • ",(null==h?void 0:h.gender)||"Male"]})]}),(0,a.jsx)(l.C,{variant:"secondary",className:"bg-accent/10 text-accent hover:bg-accent/20 hover:scale-105 transition-all duration-300 animate-pulse",children:A.active})]}),(0,a.jsx)(ey,{className:"animate-in fade-in-0 duration-700 delay-600"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm animate-in fade-in-0 slide-in-from-bottom-4 duration-700 delay-700",children:[(0,a.jsxs)("div",{className:"hover:bg-muted/30 p-2 rounded transition-all duration-300 hover:scale-105",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:A.touristId}),(0,a.jsx)("p",{className:"font-mono font-semibold",children:D})]}),(0,a.jsxs)("div",{className:"hover:bg-muted/30 p-2 rounded transition-all duration-300 hover:scale-105",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:A.status}),(0,a.jsx)(l.C,{variant:"secondary",className:"bg-primary/10 text-primary hover:bg-primary/20 transition-colors duration-300",children:A.active})]}),(0,a.jsxs)("div",{className:"hover:bg-muted/30 p-2 rounded transition-all duration-300 hover:scale-105",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:A.issuedOn}),(0,a.jsx)("p",{className:"font-medium",children:I.toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"hover:bg-muted/30 p-2 rounded transition-all duration-300 hover:scale-105",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:A.validUntil}),(0,a.jsx)("p",{className:"font-medium",children:T.toLocaleDateString()})]})]})]}),(0,a.jsx)(ey,{className:"animate-in fade-in-0 duration-700 delay-800"}),(0,a.jsxs)("div",{className:"text-center space-y-4 animate-in fade-in-0 slide-in-from-bottom-4 duration-700 delay-900",children:[(0,a.jsxs)("h4",{className:"font-semibold flex items-center justify-center space-x-2 hover:text-primary transition-colors duration-300",children:[(0,a.jsx)(ew.Z,{className:"h-5 w-5 hover:rotate-12 transition-transform duration-300"}),(0,a.jsx)("span",{children:A.qrCode})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"p-4 bg-white border-2 border-border rounded-lg shadow-sm hover:shadow-lg hover:scale-105 transition-all duration-300 hover:border-primary/30 group",children:(0,a.jsxs)("svg",{width:"200",height:"200",className:"border group-hover:border-primary/20 transition-colors duration-300",children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("pattern",{id:"qr-pattern",patternUnits:"userSpaceOnUse",width:"10",height:"10",children:[(0,a.jsx)("rect",{width:"5",height:"5",fill:"#000"}),(0,a.jsx)("rect",{x:"5",y:"5",width:"5",height:"5",fill:"#000"})]})}),(0,a.jsx)("rect",{width:"200",height:"200",fill:"white"}),(0,a.jsx)("rect",{x:"10",y:"10",width:"180",height:"180",fill:"url(#qr-pattern)"}),(0,a.jsx)("rect",{x:"20",y:"20",width:"40",height:"40",fill:"#059669"}),(0,a.jsx)("rect",{x:"140",y:"20",width:"40",height:"40",fill:"#059669"}),(0,a.jsx)("rect",{x:"20",y:"140",width:"40",height:"40",fill:"#059669"}),(0,a.jsx)("text",{x:"100",y:"105",textAnchor:"middle",fontSize:"8",fill:"#059669",fontWeight:"bold",children:"NaviSafe"})]})})}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:A.scanInstructions})]}),(0,a.jsx)(ey,{className:"animate-in fade-in-0 duration-700 delay-1000"}),(0,a.jsxs)("div",{className:"space-y-3 animate-in fade-in-0 slide-in-from-bottom-4 duration-700 delay-1100",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h4",{className:"font-semibold hover:text-primary transition-colors duration-300",children:A.blockchainId}),(0,a.jsxs)(r.z,{variant:"outline",size:"sm",onClick:()=>S(!0),className:"flex items-center space-x-2 hover:scale-105 active:scale-95 transition-all duration-200 hover:shadow-md",children:[(0,a.jsx)(eS.Z,{className:"h-4 w-4 hover:rotate-12 transition-transform duration-300"}),(0,a.jsx)("span",{children:A.blockchainDetails})]})]}),(0,a.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg space-y-2 hover:bg-muted/70 transition-colors duration-300 hover:shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs font-mono break-all hover:text-primary transition-colors duration-300",children:k}),(0,a.jsx)(r.z,{variant:"ghost",size:"sm",onClick:()=>Z(k),className:"h-8 w-8 p-0 hover:scale-110 active:scale-95 transition-all duration-200",children:v?(0,a.jsx)(x.Z,{className:"h-4 w-4 text-accent animate-bounce"}):(0,a.jsx)(ek.Z,{className:"h-4 w-4 hover:text-primary transition-colors duration-300"})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Block:"}),(0,a.jsx)("span",{className:"text-xs font-mono",children:C})]}),(0,a.jsxs)(r.z,{variant:"outline",size:"sm",className:"w-full bg-transparent hover:scale-105 active:scale-95 transition-all duration-200 hover:shadow-md",onClick:()=>window.open("https://solscan.io/tx/".concat(k,"?cluster=devnet"),"_blank"),children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-2 hover:rotate-12 transition-transform duration-300"}),A.viewOnBlockchain]})]})]}),(0,a.jsx)(ey,{className:"animate-in fade-in-0 duration-700 delay-1200"}),(0,a.jsxs)("div",{className:"space-y-3 animate-in fade-in-0 slide-in-from-bottom-4 duration-700 delay-1300",children:[(0,a.jsx)("h4",{className:"font-semibold text-destructive hover:text-destructive/80 transition-colors duration-300",children:A.emergencyInfo}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between hover:bg-muted/30 p-2 rounded transition-all duration-300 hover:scale-[1.02]",children:[(0,a.jsxs)("span",{className:"text-muted-foreground",children:[A.bloodType,":"]}),(0,a.jsx)("span",{className:"font-medium",children:"O+"})]}),(0,a.jsxs)("div",{className:"flex justify-between hover:bg-muted/30 p-2 rounded transition-all duration-300 hover:scale-[1.02]",children:[(0,a.jsxs)("span",{className:"text-muted-foreground",children:[A.allergies,":"]}),(0,a.jsx)("span",{className:"font-medium",children:"None"})]}),(0,a.jsxs)("div",{className:"flex justify-between hover:bg-muted/30 p-2 rounded transition-all duration-300 hover:scale-[1.02]",children:[(0,a.jsxs)("span",{className:"text-muted-foreground",children:[A.emergencyContact,":"]}),(0,a.jsx)("span",{className:"font-medium",children:(null==h?void 0:h.phone)||"+91 98765 43210"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-xs text-muted-foreground animate-in fade-in-0 duration-700 delay-1400",children:[(0,a.jsx)(H.Z,{className:"h-4 w-4 animate-spin",style:{animationDuration:"8s"}}),(0,a.jsxs)("span",{children:["Last updated: ",g.toLocaleTimeString()]})]})]})]})})]})}var eZ=t(8997),eA=t(7662),eE=t(1219);function eR(e){let{userInfo:s,currentLocation:t,onBack:c}=e,[d,m]=(0,n.useState)(null),[u,x]=(0,n.useState)(""),[h,p]=(0,n.useState)("en"),g=[{id:"medical",icon:eZ.Z,label:"Medical Emergency",color:"bg-red-500",priority:"HIGH"},{id:"security",icon:o.Z,label:"Security Threat",color:"bg-orange-500",priority:"HIGH"},{id:"accident",icon:eA.Z,label:"Accident",color:"bg-yellow-500",priority:"MEDIUM"},{id:"lost",icon:_.Z,label:"Lost/Stranded",color:"bg-blue-500",priority:"MEDIUM"},{id:"harassment",icon:Y.Z,label:"Harassment",color:"bg-purple-500",priority:"HIGH"},{id:"other",icon:K.Z,label:"Other Emergency",color:"bg-gray-500",priority:"MEDIUM"}],j={en:{title:"Emergency Response",subtitle:"Get immediate help when you need it",selectType:"Select Emergency Type",additionalInfo:"Additional Information (Optional)",placeholder:"Describe your situation...",sendAlert:"Send Emergency Alert",quickCall:"Quick Call",currentLocation:"Current Location",estimatedResponse:"Estimated Response Time: 5-10 minutes",backToDashboard:"Back to Dashboard"},hi:{title:"आपातकालीन प्रतिक्रिया",subtitle:"जब आपको जरूरत हो तो तुरंत मदद पाएं",selectType:"आपातकाल का प्रकार चुनें",additionalInfo:"अतिरिक्त जानकारी (वैकल्पिक)",placeholder:"अपनी स्थिति का वर्णन करें...",sendAlert:"आपातकालीन अलर्ट भेजें",quickCall:"त्वरित कॉल",currentLocation:"वर्तमान स्थान",estimatedResponse:"अनुमानित प्रतिक्रिया समय: 5-10 मिनट",backToDashboard:"डैशबोर्ड पर वापस"}}[h];return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("div",{className:"bg-foreground text-background p-4 sticky top-0 z-[1000] shadow-md",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(r.z,{variant:"ghost",onClick:c,className:"text-background hover:bg-background/10",children:["← ",j.backToDashboard]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(r.z,{variant:"outline",size:"sm",onClick:()=>p("en"===h?"hi":"en"),className:"flex items-center space-x-2 bg-transparent border-background/20 text-background hover:bg-background/10",children:[(0,a.jsx)($.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"en"===h?"हिंदी":"English"})]}),(0,a.jsx)(f,{})]})]})}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsx)(i.Zb,{className:"border-2 border-destructive/20 bg-destructive/5",children:(0,a.jsxs)(i.Ol,{className:"text-center space-y-2",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"p-3 bg-destructive/10 rounded-full animate-pulse",children:(0,a.jsx)(eE.Z,{className:"h-8 w-8 text-destructive"})})}),(0,a.jsx)(i.ll,{className:"text-xl text-destructive",children:j.title}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:j.subtitle})]})}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{className:"text-lg",children:j.selectType})}),(0,a.jsx)(i.aY,{className:"space-y-3",children:(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:g.map(e=>{let s=e.icon;return(0,a.jsx)(r.z,{variant:d===e.id?"default":"outline",className:"h-20 flex-col space-y-2 p-3 ".concat(d===e.id?e.color:""),onClick:()=>m(e.id),children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-1",children:[(0,a.jsx)(s,{className:"h-6 w-6 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-xs text-center leading-tight",children:e.label}),(0,a.jsx)(l.C,{variant:"secondary",className:"text-xs px-1 py-0",children:e.priority})]})},e.id)})})})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{className:"text-lg",children:j.additionalInfo})}),(0,a.jsx)(i.aY,{children:(0,a.jsx)(G,{placeholder:j.placeholder,value:u,onChange:e=>x(e.target.value),className:"min-h-20"})})]}),(0,a.jsx)(i.Zb,{children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(_.Z,{className:"h-5 w-5 text-primary"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium",children:j.currentLocation}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[t.lat.toFixed(4),", ",t.lng.toFixed(4)]})]}),(0,a.jsxs)(l.C,{variant:"secondary",className:"bg-accent/10 text-accent",children:[(0,a.jsx)(H.Z,{className:"h-3 w-3 mr-1"}),"Live"]})]})})}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{className:"text-lg",children:j.quickCall})}),(0,a.jsx)(i.aY,{className:"space-y-2",children:[{name:"Police",number:"100",type:"security"},{name:"Medical Emergency",number:"108",type:"medical"},{name:"Fire Department",number:"101",type:"fire"},{name:"Tourist Helpline",number:"1363",type:"tourist"},{name:"Women Helpline",number:"1091",type:"women"}].map((e,s)=>(0,a.jsxs)(r.z,{variant:"outline",className:"w-full justify-between h-12 bg-transparent p-3",onClick:()=>alert("Calling ".concat(e.name," at ").concat(e.number)),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(Q.Z,{className:"h-4 w-4 flex-shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:e.name})]}),(0,a.jsx)("span",{className:"font-mono text-sm flex-shrink-0",children:e.number})]},s))})]}),(0,a.jsxs)(r.z,{onClick:()=>{let e=g.find(e=>e.id===d);alert("\uD83D\uDEA8 EMERGENCY ALERT ACTIVATED \uD83D\uDEA8\n\nEmergency Type: ".concat((null==e?void 0:e.label)||"General Emergency","\nPriority: ").concat((null==e?void 0:e.priority)||"MEDIUM","\n\nTourist Details:\n• Name: ").concat((null==s?void 0:s.name)||"Unknown","\n• ID: NVS-").concat(Date.now().toString().slice(-8),"\n• Phone: ").concat((null==s?void 0:s.phone)||"Not provided","\n\nLocation Details:\n• Coordinates: ").concat(t.lat.toFixed(6),", ").concat(t.lng.toFixed(6),"\n• Address: Connaught Place, New Delhi, Delhi 110001, India\n• Timestamp: ").concat(new Date().toLocaleString(),"\n\nAdditional Information:\n").concat(u||"None provided","\n\nAUTHORITIES NOTIFIED:\n✅ Local Police (100)\n✅ Medical Emergency (108)\n✅ Tourist Helpline (1363)\n\nResponse teams are being dispatched to your location.\nStay calm and wait for assistance."))},disabled:!d,className:"w-full h-16 text-lg font-bold bg-destructive hover:bg-destructive/90 shadow-lg",size:"lg",children:[(0,a.jsx)(eE.Z,{className:"h-6 w-6 mr-2"}),j.sendAlert]}),(0,a.jsx)("p",{className:"text-center text-sm text-muted-foreground",children:j.estimatedResponse})]})]})}var ez=t(721);function eL(e){let{className:s,...t}=e;return(0,a.jsx)(ez.fC,{"data-slot":"switch",className:(0,D.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:(0,a.jsx)(ez.bU,{"data-slot":"switch-thumb",className:(0,D.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var eM=t(8728),eO=t(6337),eP=t(2208),eF=t(7769);function eG(e){let s,{userInfo:t,emergencyContacts:c,currentLocation:d,onBack:m}=e,[u,h]=(0,n.useState)(!1),[p,g]=(0,n.useState)("1"),[f,j]=(0,n.useState)([]),[v,N]=(0,n.useState)(!1),[b,w]=(0,n.useState)(!0),[S,k]=(0,n.useState)(0),[C,D]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e;return u&&C&&S>0&&(e=setInterval(()=>{let e=Math.floor((Date.now()-C.getTime())/1e3),s=Math.max(0,3600*Number.parseInt(p)-e);k(s),0===s&&(h(!1),D(null))},1e3)),()=>{e&&clearInterval(e)}},[u,C,p]);let R=e=>{h(e),e?(D(new Date),k(3600*Number.parseInt(p))):(D(null),k(0))},z=e=>{j(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},L=e=>{let s=Math.floor(e/3600),t=Math.floor(e%3600/60),a=e%60;return s>0?"".concat(s,"h ").concat(t,"m ").concat(a,"s"):t>0?"".concat(t,"m ").concat(a,"s"):"".concat(a,"s")};return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("div",{className:"bg-foreground text-background p-4 sticky top-0 z-[1000] shadow-md",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.z,{variant:"ghost",onClick:m,className:"text-background hover:bg-background/10",children:"← Back to Dashboard"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eM.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-semibold",children:"Location Sharing"})]})]})}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsx)(i.Zb,{className:"border-2 border-blue-200 bg-blue-50 dark:bg-blue-950 dark:border-blue-800",children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(eO.Z,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"Privacy-First Location Sharing"}),(0,a.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"You have complete control over your location data. Sharing is secure, encrypted, and can be revoked at any time. Location data is only shared with your chosen contacts and authorized personnel when enabled."})]})]})})}),(0,a.jsxs)(i.Zb,{className:"border-2 ".concat(u?"border-accent bg-accent/5":"border-border"),children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(_.Z,{className:"h-5 w-5 ".concat(u?"text-accent animate-pulse":"text-muted-foreground")}),(0,a.jsx)("span",{children:"Real-Time Location Sharing"})]}),(0,a.jsx)(l.C,{variant:u?"default":"secondary",className:u?"bg-accent animate-pulse":"",children:u?"Active":"Inactive"})]})}),(0,a.jsxs)(i.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-muted/30 rounded-lg",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(y._,{className:"text-base font-medium",children:"Enable Location Sharing"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Share your real-time location with selected contacts and authorities"})]}),(0,a.jsx)(eL,{checked:u,onCheckedChange:R,className:"data-[state=checked]:bg-accent"})]}),u&&(0,a.jsx)("div",{className:"space-y-4 animate-in fade-in-0 slide-in-from-bottom-4 duration-500",children:(0,a.jsxs)("div",{className:"p-4 bg-accent/10 border border-accent/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5 text-accent"}),(0,a.jsx)("span",{className:"font-medium text-accent",children:"Location Sharing Active"})]}),(0,a.jsxs)(l.C,{variant:"outline",className:"text-accent border-accent/30",children:[(s=f.length,v&&(s+=1),s)," Recipients"]})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground space-y-1",children:[(0,a.jsxs)("p",{children:["Started: ",null==C?void 0:C.toLocaleString()]}),(0,a.jsxs)("p",{children:["Time Remaining:"," ",(0,a.jsx)("span",{className:"font-mono font-medium",children:L(S)})]}),(0,a.jsxs)("p",{children:["Current Location: ",d.lat.toFixed(4),", ",d.lng.toFixed(4)]})]})]})}),(0,a.jsx)(ey,{}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(y._,{className:"text-base font-medium",children:"Sharing Duration"}),(0,a.jsxs)(I,{value:p,onValueChange:g,disabled:u,children:[(0,a.jsx)(Z,{children:(0,a.jsx)(T,{})}),(0,a.jsxs)(A,{children:[(0,a.jsx)(E,{value:"0.5",children:"30 minutes"}),(0,a.jsx)(E,{value:"1",children:"1 hour"}),(0,a.jsx)(E,{value:"2",children:"2 hours"}),(0,a.jsx)(E,{value:"4",children:"4 hours"}),(0,a.jsx)(E,{value:"8",children:"8 hours"}),(0,a.jsx)(E,{value:"24",children:"24 hours"})]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Location sharing will automatically stop after the selected duration"})]}),(0,a.jsx)(ey,{}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(y._,{className:"text-base font-medium",children:"Emergency Only Mode"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Only share location during active emergencies or SOS alerts"})]}),(0,a.jsx)(eL,{checked:b,onCheckedChange:w,disabled:u})]}),b&&(0,a.jsx)("div",{className:"p-3 bg-orange-50 dark:bg-orange-950 border border-orange-200 dark:border-orange-800 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(K.Z,{className:"h-4 w-4 text-orange-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-orange-800 dark:text-orange-200",children:"Location will only be shared during emergencies"})]})})]})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(Y.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Share with Emergency Contacts"})]})}),(0,a.jsx)(i.aY,{className:"space-y-3",children:c.length>0?c.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.relationship," • ",e.phone]})]}),(0,a.jsx)(eL,{checked:f.includes(s.toString()),onCheckedChange:()=>z(s.toString()),disabled:u})]},s)):(0,a.jsxs)("div",{className:"text-center py-6 text-muted-foreground",children:[(0,a.jsx)(Y.Z,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"No emergency contacts available"}),(0,a.jsx)("p",{className:"text-sm",children:"Add emergency contacts in your trip details"})]})})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Share with Authorities"})]})}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-medium",children:"Authorized Law Enforcement"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"NaviSafe authorities and local police for emergency response"})]}),(0,a.jsx)(eL,{checked:v,onCheckedChange:N,disabled:u})]})})]}),(0,a.jsxs)(i.Zb,{className:"border-2 border-muted",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(eP.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Sharing Status Summary"})]})}),(0,a.jsxs)(i.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Status:"}),(0,a.jsx)(l.C,{variant:u?"default":"secondary",children:u?"Sharing Active":"Not Sharing"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Mode:"}),(0,a.jsx)(l.C,{variant:"outline",children:b?"Emergency Only":"Continuous"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Emergency Contacts:"}),(0,a.jsxs)(l.C,{variant:"outline",children:[f.length," Selected"]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Authorities:"}),(0,a.jsx)(l.C,{variant:"outline",children:v?"Enabled":"Disabled"})]})]}),u&&(0,a.jsx)("div",{className:"pt-3 border-t border-border",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Time Remaining:"}),(0,a.jsx)("span",{className:"font-mono text-sm",children:L(S)})]})})]})]}),u&&(0,a.jsxs)(r.z,{onClick:()=>R(!1),variant:"destructive",className:"w-full h-12 font-semibold",children:[(0,a.jsx)(eF.Z,{className:"h-5 w-5 mr-2"}),"Stop Location Sharing Immediately"]})]})]})}var e_=t(610);function eU(e){let{className:s,value:t,...n}=e;return(0,a.jsx)(e_.fC,{"data-slot":"progress",className:(0,D.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...n,children:(0,a.jsx)(e_.z$,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})}var eH=t(1239),eY=t(6595),eB=t(8617),eV=t(8896),eX=t(3327);function eq(e){var s,t,c,d;let{userInfo:m,tripDetails:u,safeScore:x,onBack:h}=e,[p,g]=(0,n.useState)({totalPoints:850,level:3,rank:"Safety Explorer",safetyStreak:5,zonesVisited:8,emergencyContactsAdded:(null==u?void 0:null===(s=u.emergencyContacts)||void 0===s?void 0:s.length)||0,reportsSubmitted:2}),[f,j]=(0,n.useState)([{id:"first_steps",name:"First Steps",description:"Complete your tourist registration",icon:"\uD83C\uDFAF",points:100,unlocked:!0,progress:1,maxProgress:1,category:"safety"},{id:"safety_conscious",name:"Safety Conscious",description:"Add emergency contacts to your profile",icon:"\uD83D\uDC65",points:150,unlocked:(null==u?void 0:null===(t=u.emergencyContacts)||void 0===t?void 0:t.length)>0,progress:(null==u?void 0:null===(c=u.emergencyContacts)||void 0===c?void 0:c.length)||0,maxProgress:3,category:"safety"},{id:"zone_explorer",name:"Zone Explorer",description:"Visit 5 different safety zones",icon:"\uD83D\uDDFA️",points:200,unlocked:!1,progress:3,maxProgress:5,category:"exploration"},{id:"safety_streak",name:"Safety Streak",description:"Maintain 80%+ safety score for 7 days",icon:"\uD83D\uDD25",points:300,unlocked:!1,progress:5,maxProgress:7,category:"safety"},{id:"community_guardian",name:"Community Guardian",description:"Submit 5 anonymous safety reports",icon:"\uD83D\uDEE1️",points:250,unlocked:!1,progress:2,maxProgress:5,category:"community"},{id:"emergency_ready",name:"Emergency Ready",description:"Complete emergency preparedness checklist",icon:"\uD83D\uDEA8",points:400,unlocked:!1,progress:3,maxProgress:5,category:"emergency"}]),[v,N]=(0,n.useState)("all");(0,n.useEffect)(()=>{var e;let s=100;(null==u?void 0:null===(e=u.emergencyContacts)||void 0===e?void 0:e.length)>0&&(s+=50*u.emergencyContacts.length),x>=80?s+=200:x>=60&&(s+=100),(null==u?void 0:u.itinerary)&&(s+=100),g(e=>({...e,totalPoints:s,level:Math.floor(s/300)+1}))},[u,x]);let b=e=>(e+1)*300,y=f.filter(e=>"all"===v||e.category===v),w=e=>{switch(e){case"safety":return(0,a.jsx)(o.Z,{className:"h-4 w-4"});case"exploration":return(0,a.jsx)(_.Z,{className:"h-4 w-4"});case"community":return(0,a.jsx)(Y.Z,{className:"h-4 w-4"});case"emergency":return(0,a.jsx)(eH.Z,{className:"h-4 w-4"});default:return(0,a.jsx)(eY.Z,{className:"h-4 w-4"})}},{progress:S,maxProgress:k}=(()=>{let e=300*p.level,s=b(p.level);return{progress:p.totalPoints-e,maxProgress:s-e}})();return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("div",{className:"bg-foreground text-background p-4 sticky top-0 z-[1000] shadow-md",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.z,{variant:"ghost",onClick:h,className:"text-background hover:bg-background/10",children:"← Back to Dashboard"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(et.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-semibold",children:"Safety Achievements"})]})]})}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)(i.Zb,{className:"border-2 border-primary/20 bg-gradient-to-br from-primary/5 to-accent/5",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-3 bg-primary/10 rounded-full",children:(0,a.jsx)(eB.Z,{className:"h-8 w-8 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:(null==m?void 0:m.name)||"Tourist"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:(d=p.level)>=5?"Safety Guardian":d>=4?"Safety Expert":d>=3?"Safety Explorer":d>=2?"Safety Aware":"Safety Novice"})]})]}),(0,a.jsxs)(l.C,{variant:"default",className:"bg-primary text-lg px-3 py-1",children:["Level ",p.level]})]})}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Safety Points"}),(0,a.jsx)("span",{className:"text-lg font-bold text-primary",children:p.totalPoints})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("span",{children:["Progress to Level ",p.level+1]}),(0,a.jsxs)("span",{children:[S,"/",k]})]}),(0,a.jsx)(eU,{value:S/k*100,className:"h-2"})]})]}),(0,a.jsx)(ey,{}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-3 bg-muted/30 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-1",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 text-emerald-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Safety Score"})]}),(0,a.jsxs)("p",{className:"text-xl font-bold text-emerald-500",children:[x,"%"]})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-muted/30 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-1",children:[(0,a.jsx)(eV.Z,{className:"h-4 w-4 text-orange-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Safety Streak"})]}),(0,a.jsxs)("p",{className:"text-xl font-bold text-orange-500",children:[p.safetyStreak," days"]})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-muted/30 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-1",children:[(0,a.jsx)(_.Z,{className:"h-4 w-4 text-blue-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Zones Visited"})]}),(0,a.jsx)("p",{className:"text-xl font-bold text-blue-500",children:p.zonesVisited})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-muted/30 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-1",children:[(0,a.jsx)(Y.Z,{className:"h-4 w-4 text-purple-500"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Reports Submitted"})]}),(0,a.jsx)("p",{className:"text-xl font-bold text-purple-500",children:p.reportsSubmitted})]})]})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(eX.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Achievements"})]})}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(r.z,{variant:"all"===v?"default":"outline",size:"sm",onClick:()=>N("all"),className:"flex items-center space-x-1",children:[(0,a.jsx)(eY.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"All"})]}),(0,a.jsxs)(r.z,{variant:"safety"===v?"default":"outline",size:"sm",onClick:()=>N("safety"),className:"flex items-center space-x-1",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Safety"})]}),(0,a.jsxs)(r.z,{variant:"exploration"===v?"default":"outline",size:"sm",onClick:()=>N("exploration"),className:"flex items-center space-x-1",children:[(0,a.jsx)(_.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Exploration"})]}),(0,a.jsxs)(r.z,{variant:"community"===v?"default":"outline",size:"sm",onClick:()=>N("community"),className:"flex items-center space-x-1",children:[(0,a.jsx)(Y.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Community"})]}),(0,a.jsxs)(r.z,{variant:"emergency"===v?"default":"outline",size:"sm",onClick:()=>N("emergency"),className:"flex items-center space-x-1",children:[(0,a.jsx)(eH.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Emergency"})]})]}),(0,a.jsx)("div",{className:"space-y-3",children:y.map(e=>(0,a.jsx)("div",{className:"p-4 border rounded-lg transition-all duration-300 hover:shadow-md ".concat(e.unlocked?"border-primary/30 bg-primary/5 hover:bg-primary/10":"border-border bg-muted/30 hover:bg-muted/50"),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[(0,a.jsx)("div",{className:"text-2xl p-2 rounded-full ".concat(e.unlocked?"bg-primary/10":"bg-muted/50 grayscale"),children:e.icon}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)("h3",{className:"font-semibold ".concat(e.unlocked?"text-foreground":"text-muted-foreground"),children:e.name}),e.unlocked&&(0,a.jsxs)(l.C,{variant:"default",className:"bg-primary text-xs",children:["+",e.points," pts"]})]}),(0,a.jsx)("p",{className:"text-sm ".concat(e.unlocked?"text-muted-foreground":"text-muted-foreground/70"),children:e.description}),!e.unlocked&&e.maxProgress>1&&(0,a.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{children:"Progress"}),(0,a.jsxs)("span",{children:[e.progress,"/",e.maxProgress]})]}),(0,a.jsx)(eU,{value:e.progress/e.maxProgress*100,className:"h-1"})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[w(e.category),e.unlocked?(0,a.jsx)(l.C,{variant:"default",className:"bg-emerald-500",children:"✓ Unlocked"}):(0,a.jsx)(l.C,{variant:"outline",children:"Locked"})]})]})},e.id))})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(eH.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Earn More Points"})]})}),(0,a.jsx)(i.aY,{className:"space-y-3",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,a.jsxs)(r.z,{variant:"outline",className:"justify-between h-auto p-4 bg-transparent hover:bg-muted/50",onClick:()=>{},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-full",children:(0,a.jsx)(H.Z,{className:"h-4 w-4 text-blue-600"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("p",{className:"font-medium",children:"Complete Trip Itinerary"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"+100 points"})]})]}),(0,a.jsx)(l.C,{variant:"outline",children:"+100"})]}),(0,a.jsxs)(r.z,{variant:"outline",className:"justify-between h-auto p-4 bg-transparent hover:bg-muted/50",onClick:()=>{},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-full",children:(0,a.jsx)(Y.Z,{className:"h-4 w-4 text-green-600"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("p",{className:"font-medium",children:"Add Emergency Contact"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"+50 points each"})]})]}),(0,a.jsx)(l.C,{variant:"outline",children:"+50"})]}),(0,a.jsxs)(r.z,{variant:"outline",className:"justify-between h-auto p-4 bg-transparent hover:bg-muted/50",onClick:()=>{},children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-full",children:(0,a.jsx)(o.Z,{className:"h-4 w-4 text-purple-600"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("p",{className:"font-medium",children:"Submit Safety Report"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"+25 points each"})]})]}),(0,a.jsx)(l.C,{variant:"outline",children:"+25"})]})]})})]})]})]})}function eW(e){let{currentLocation:s,onBack:t}=e,[c,d]=(0,n.useState)(""),[m,u]=(0,n.useState)(""),[x,h]=(0,n.useState)(!0),[p,g]=(0,n.useState)(!1),[f,j]=(0,n.useState)([{id:"RPT-001",type:"Suspicious Activity",description:"Person following tourists near India Gate",location:{lat:28.6129,lng:77.2295},timestamp:new Date(Date.now()-72e5),status:"under_review",priority:"high"},{id:"RPT-002",type:"Unsafe Area",description:"Poor lighting and broken pavement",location:{lat:28.6145,lng:77.2085},timestamp:new Date(Date.now()-864e5),status:"resolved",priority:"medium"}]),v=[{value:"suspicious_activity",label:"Suspicious Activity",priority:"high",icon:"\uD83D\uDC41️"},{value:"unsafe_area",label:"Unsafe Area/Condition",priority:"medium",icon:"⚠️"},{value:"harassment",label:"Harassment/Inappropriate Behavior",priority:"high",icon:"\uD83D\uDEAB"},{value:"theft_scam",label:"Theft/Scam Attempt",priority:"high",icon:"\uD83D\uDCB0"},{value:"poor_lighting",label:"Poor Lighting/Visibility",priority:"medium",icon:"\uD83D\uDCA1"},{value:"crowd_safety",label:"Crowd Safety Concern",priority:"medium",icon:"\uD83D\uDC65"},{value:"infrastructure",label:"Infrastructure Issue",priority:"low",icon:"\uD83C\uDFD7️"},{value:"other",label:"Other Safety Concern",priority:"medium",icon:"\uD83D\uDCDD"}],N=async()=>{if(!c||!m.trim())return;g(!0),await new Promise(e=>setTimeout(e,2e3));let e=v.find(e=>e.value===c),t={id:"RPT-".concat(String(f.length+3).padStart(3,"0")),type:(null==e?void 0:e.label)||c,description:m.trim(),location:s,timestamp:new Date,status:"submitted",priority:(null==e?void 0:e.priority)||"medium"};j(e=>[t,...e]),d(""),u(""),g(!1),alert("Report submitted successfully!\nReport ID: ".concat(t.id,"\n\nThank you for helping keep our community safe."))},b=e=>{switch(e){case"submitted":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"under_review":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},w=e=>{switch(e){case"critical":return"bg-red-500 text-white";case"high":return"bg-orange-500 text-white";case"medium":return"bg-yellow-500 text-white";case"low":return"bg-green-500 text-white";default:return"bg-gray-500 text-white"}},S=e=>{let s=Math.floor((new Date().getTime()-e.getTime())/6e4);if(s<60)return"".concat(s," minutes ago");if(s<1440){let e=Math.floor(s/60);return"".concat(e," hour").concat(e>1?"s":""," ago")}{let e=Math.floor(s/1440);return"".concat(e," day").concat(e>1?"s":""," ago")}};return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("div",{className:"bg-foreground text-background p-4 sticky top-0 z-[1000] shadow-md",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(r.z,{variant:"ghost",onClick:t,className:"text-background hover:bg-background/10",children:"← Back to Dashboard"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-semibold",children:"Anonymous Reporting"})]})]})}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsx)(i.Zb,{className:"border-2 border-green-200 bg-green-50 dark:bg-green-950 dark:border-green-800",children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(o.Z,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-green-800 dark:text-green-200",children:"Anonymous & Secure Reporting"}),(0,a.jsx)("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Your reports are completely anonymous and help keep the community safe. No personal information is stored or shared. All reports are reviewed by authorities within 24 hours."})]})]})})}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(ea.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Submit Safety Report"})]})}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[x?(0,a.jsx)(eF.Z,{className:"h-4 w-4"}):(0,a.jsx)(eP.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:"Anonymous Report"})]}),(0,a.jsx)(r.z,{variant:"outline",size:"sm",onClick:()=>h(!x),className:x?"bg-green-100 text-green-800 border-green-300":"",children:x?"Anonymous":"Identified"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y._,{children:"Report Type"}),(0,a.jsxs)(I,{value:c,onValueChange:d,children:[(0,a.jsx)(Z,{children:(0,a.jsx)(T,{placeholder:"Select the type of safety concern"})}),(0,a.jsx)(A,{children:v.map(e=>(0,a.jsx)(E,{value:e.value,children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{children:e.icon}),(0,a.jsx)("span",{children:e.label}),(0,a.jsx)(l.C,{className:w(e.priority),variant:"secondary",children:e.priority.toUpperCase()})]})},e.value))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y._,{children:"Description"}),(0,a.jsx)(G,{placeholder:"Please provide detailed information about the safety concern. Include time, location details, and any other relevant information...",value:m,onChange:e=>u(e.target.value),className:"min-h-24",maxLength:500}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:"Be specific but avoid personal information"}),(0,a.jsxs)("span",{children:[m.length,"/500"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y._,{children:"Location"}),(0,a.jsxs)("div",{className:"p-3 bg-muted/30 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)(_.Z,{className:"h-4 w-4 text-primary"}),(0,a.jsx)("span",{className:"font-medium",children:"Current Location"}),(0,a.jsx)(l.C,{variant:"outline",className:"text-xs",children:"Auto-detected"})]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Lat: ",s.lat.toFixed(6),", Lng: ",s.lng.toFixed(6)]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Connaught Place, New Delhi, Delhi 110001"})]})]}),(0,a.jsx)(r.z,{onClick:N,disabled:!c||!m.trim()||p,className:"w-full h-12 font-semibold",children:p?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,a.jsx)("span",{children:"Submitting Report..."})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Submit Anonymous Report"})]})})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(H.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Your Recent Reports"})]}),(0,a.jsxs)(l.C,{variant:"outline",children:[f.length," Reports"]})]})}),(0,a.jsx)(i.aY,{className:"space-y-3",children:f.length>0?f.map(e=>(0,a.jsx)("div",{className:"p-4 border border-border rounded-lg space-y-3",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.type}),(0,a.jsx)(l.C,{className:w(e.priority),variant:"secondary",children:e.priority.toUpperCase()})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(H.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:S(e.timestamp)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(_.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[e.location.lat.toFixed(4),", ",e.location.lng.toFixed(4)]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[(0,a.jsx)(l.C,{className:b(e.status),variant:"secondary",children:"submitted"===e.status?"Submitted":"under_review"===e.status?"Under Review":"Resolved"}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["ID: ",e.id]})]})]})},e.id)):(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsx)(o.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{className:"text-lg font-medium",children:"No reports submitted yet"}),(0,a.jsx)("p",{className:"text-sm",children:"Help keep the community safe by reporting safety concerns"})]})})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(Y.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Community Impact"})]})}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,a.jsxs)("div",{className:"p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:"247"}),(0,a.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Reports This Month"})]}),(0,a.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:"89%"}),(0,a.jsx)("p",{className:"text-sm text-green-800 dark:text-green-200",children:"Issues Resolved"})]}),(0,a.jsxs)("div",{className:"p-4 bg-purple-50 dark:bg-purple-950 rounded-lg",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:"156"}),(0,a.jsx)("p",{className:"text-sm text-purple-800 dark:text-purple-200",children:"Active Reporters"})]}),(0,a.jsxs)("div",{className:"p-4 bg-orange-50 dark:bg-orange-950 rounded-lg",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:"4.2h"}),(0,a.jsx)("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:"Avg Response Time"})]})]})})]})]})]})}var eJ=t(3643);function eK(e){let{className:s,children:t,...n}=e;return(0,a.jsxs)(eJ.fC,{"data-slot":"scroll-area",className:(0,D.cn)("relative",s),...n,children:[(0,a.jsx)(eJ.l_,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),(0,a.jsx)(eQ,{}),(0,a.jsx)(eJ.Ns,{})]})}function eQ(e){let{className:s,orientation:t="vertical",...n}=e;return(0,a.jsx)(eJ.gb,{"data-slot":"scroll-area-scrollbar",orientation:t,className:(0,D.cn)("flex touch-none p-px transition-colors select-none","vertical"===t&&"h-full w-2.5 border-l border-l-transparent","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent",s),...n,children:(0,a.jsx)(eJ.q4,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var e$=t(1146);function e0(e){let{className:s,...t}=e;return(0,a.jsx)(e$.fC,{"data-slot":"avatar",className:(0,D.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",s),...t})}function e2(e){let{className:s,...t}=e;return(0,a.jsx)(e$.NY,{"data-slot":"avatar-fallback",className:(0,D.cn)("bg-muted flex size-full items-center justify-center rounded-full",s),...t})}var e1=t(4743);function e5(e){let{userLocation:s,safetyScore:t=85,currentZone:c="Green Zone",userInfo:d}=e,[m,u]=(0,n.useState)([{id:"1",content:"Hello! I'm your Virtual Guardian AI powered by advanced safety analytics. I'm here to help keep you safe during your visit. How can I assist you today?",sender:"ai",timestamp:new Date,type:"info"}]),[x,h]=(0,n.useState)(""),[p,g]=(0,n.useState)(!1),f=(0,n.useRef)(null),j=[{icon:K.Z,label:"Emergency Help",action:"emergency"},{icon:_.Z,label:"Safe Routes",action:"routes"},{icon:o.Z,label:"Safety Tips",action:"tips"},{icon:Q.Z,label:"Emergency Contacts",action:"contacts"}];(0,n.useEffect)(()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},[m]);let v=()=>s?s.lat>28.615&&s.lng>77.21?"Red Fort Area, Chandni Chowk, New Delhi 110006":s.lat<28.61?"Lodhi Gardens, New Delhi 110003":"Connaught Place, New Delhi, Delhi 110001, India":"Location not available",N=()=>c.includes("Red")||t<30?"Red":c.includes("Green")&&t>=70?"Green":"Orange",y=()=>{let e=[];return t<30?e.push("High crime area reported","Poor lighting conditions","Limited police presence"):t<70?e.push("Moderate crowd density","Traffic congestion","Construction work nearby"):e.push("Well-patrolled area","Good lighting","Tourist-friendly zone"),e},w=async e=>{try{let a={touristName:(null==d?void 0:d.name)||"Anonymous User",age:(null==d?void 0:d.age)||25,digitalId:(null==d?void 0:d.digitalId)||"guest001",tripStartDate:(null==d?void 0:d.tripStartDate)||new Date().toISOString().split("T")[0],tripEndDate:(null==d?void 0:d.tripEndDate)||new Date(Date.now()+6048e5).toISOString().split("T")[0],currentLocation:{lat:(null==s?void 0:s.lat)||28.6139,lng:(null==s?void 0:s.lng)||77.209,address:v(),zoneStatus:N(),safetyScore:t},environment:{nearbyIncidents:y()},userQuery:e,language:"English"};console.log("[v0] Sending API request:",a);let n=await fetch("http://localhost:7070/api/chatbot/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!n.ok)throw Error("API request failed: ".concat(n.status," ").concat(n.statusText));let r=await n.json();return console.log("[v0] API response received:",r),r}catch(e){throw console.error("[v0] API call failed:",e),e}},S=async e=>{try{let s=await w(e),t="",a="info";t=s.response||s.message||s.content?s.response||s.message||s.content||JSON.stringify(s,null,2):"\uD83E\uDD16 **API Response:**\n```json\n".concat(JSON.stringify(s,null,2),"\n```");let n=e.toLowerCase();return n.includes("emergency")||n.includes("help")||n.includes("danger")?a="emergency":(n.includes("safe")||n.includes("zone")||n.includes("route"))&&(a="safety"),{content:t,type:a,apiResponse:s}}catch(s){return console.error("[v0] Using fallback response due to API error:",s),{content:"⚠️ **API Connection Error**\n\nUnable to connect to the safety analysis service. Using offline mode.\n\n".concat(k(e)),type:"info"}}},k=e=>{let s=e.toLowerCase();return s.includes("emergency")||s.includes("help")||s.includes("danger")?"\uD83D\uDEA8 Emergency detected! Please call local emergency services: 112\nYour location has been noted for immediate assistance.":s.includes("zone")||s.includes("area")||s.includes("safe")?"You're currently in a ".concat(c," with a safety score of ").concat(t,"%. ").concat(t>=80?"This is a very safe area.":t>=70?"This area is generally safe, but stay alert.":"⚠️ Exercise caution in this area."):"I'm here to help with safety information, emergency assistance, and local guidance. Please try again or contact support if the issue persists."},C=async()=>{if(!x.trim())return;let e={id:Date.now().toString(),content:x,sender:"user",timestamp:new Date};u(s=>[...s,e]),h(""),g(!0);try{let e=await S(x),s={id:(Date.now()+1).toString(),content:e.content,sender:"ai",timestamp:new Date,type:e.type,apiResponse:e.apiResponse};u(e=>[...e,s])}catch(s){let e={id:(Date.now()+1).toString(),content:"❌ **Service Unavailable**\n\nI'm currently unable to process your request. Please try again later or contact emergency services directly if this is urgent.",sender:"ai",timestamp:new Date,type:"info"};u(s=>[...s,e])}finally{g(!1)}},D=e=>{h({emergency:"I need emergency help!",routes:"Show me the safest route to my destination",tips:"Give me safety tips for this area",contacts:"Show me emergency contact numbers"}[e]||"")},I=e=>{switch(e){case"emergency":return"bg-red-500 text-white";case"safety":return"bg-orange-500 text-white";default:return"bg-blue-500 text-white"}};return(0,a.jsxs)(i.Zb,{className:"w-full h-[600px] flex flex-col",children:[(0,a.jsxs)(i.Ol,{className:"pb-3",children:[(0,a.jsxs)(i.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,a.jsx)(o.Z,{className:"w-4 h-4 text-white"})}),"Virtual Guardian AI",(0,a.jsxs)(l.C,{variant:"outline",className:"ml-auto",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1 animate-pulse"}),"API Connected"]})]}),d&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Connected as: ",d.name||"Guest"," | Safety Score: ",t,"% | Zone: ",c]})]}),(0,a.jsxs)(i.aY,{className:"flex-1 flex flex-col gap-4 p-4",children:[(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:j.map((e,s)=>(0,a.jsxs)(r.z,{variant:"outline",size:"sm",onClick:()=>D(e.action),className:"flex items-center gap-2 h-8 text-xs",children:[(0,a.jsx)(e.icon,{className:"w-3 h-3"}),e.label]},s))}),(0,a.jsx)(eK,{className:"flex-1 pr-4",ref:f,children:(0,a.jsxs)("div",{className:"space-y-4",children:[m.map(e=>(0,a.jsxs)("div",{className:"flex gap-3 ".concat("user"===e.sender?"justify-end":"justify-start"),children:["ai"===e.sender&&(0,a.jsx)(e0,{className:"w-8 h-8",children:(0,a.jsx)(e2,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xs",children:"AI"})}),(0,a.jsxs)("div",{className:"max-w-[80%] ".concat("user"===e.sender?"order-first":""),children:[(0,a.jsx)("div",{className:"rounded-lg p-3 ".concat("user"===e.sender?"bg-blue-500 text-white ml-auto":"bg-gray-100 text-gray-900"),children:(0,a.jsx)("div",{className:"whitespace-pre-wrap text-sm",children:e.content})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.type&&"ai"===e.sender&&(0,a.jsxs)(l.C,{className:"text-xs ".concat(I(e.type)),children:["emergency"===e.type&&(0,a.jsx)(K.Z,{className:"w-3 h-3 mr-1"}),"safety"===e.type&&(0,a.jsx)(o.Z,{className:"w-3 h-3 mr-1"}),"info"===e.type&&(0,a.jsx)(H.Z,{className:"w-3 h-3 mr-1"}),e.type]}),e.apiResponse&&(0,a.jsx)(l.C,{variant:"outline",className:"text-xs",children:"API Response"})]})]}),"user"===e.sender&&(0,a.jsx)(e0,{className:"w-8 h-8",children:(0,a.jsx)(e2,{className:"bg-gray-300 text-gray-700 text-xs",children:"You"})})]},e.id)),p&&(0,a.jsxs)("div",{className:"flex gap-3 justify-start",children:[(0,a.jsx)(e0,{className:"w-8 h-8",children:(0,a.jsx)(e2,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xs",children:"AI"})}),(0,a.jsx)("div",{className:"bg-gray-100 rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(M.Z,{className:"w-4 h-4 animate-spin"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Analyzing with Spring Boot API..."})]})})]})]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(b.I,{value:x,onChange:e=>h(e.target.value),placeholder:"Ask me about safety, routes, or emergency help...",onKeyPress:e=>"Enter"===e.key&&C(),className:"flex-1",disabled:p}),(0,a.jsx)(r.z,{onClick:C,size:"sm",disabled:!x.trim()||p,children:p?(0,a.jsx)(M.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(e1.Z,{className:"w-4 h-4"})})]})]})]})}var e3=t(257);let e4=()=>{let[e,s]=(0,n.useState)({address:"",isLoading:!1,error:null}),t=(0,n.useCallback)(async e=>{s(e=>({...e,isLoading:!0,error:null}));try{let t=e3.env.NEXT_PUBLIC_GOOGLE_MAPS_KEY;if(t){console.log("[v0] Using Google Maps Geocoding API");let a=await fetch("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(e.lat,",").concat(e.lng,"&key=").concat(t));if(a.ok){let e=await a.json();if("OK"===e.status&&e.results.length>0){let t=e.results[0].formatted_address;return console.log("[v0] Google Maps geocoding successful:",t),s({address:t,isLoading:!1,error:null}),t}}console.log("[v0] Google Maps geocoding failed, falling back to Nominatim")}console.log("[v0] Using OpenStreetMap Nominatim for reverse geocoding");let a=await fetch("https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(e.lat,"&lon=").concat(e.lng,"&zoom=18&addressdetails=1"),{headers:{"User-Agent":"NaviSafe Tourist Safety App"}});if(a.ok){let e=await a.json();if(e.display_name){let t=e.display_name;return console.log("[v0] Nominatim geocoding successful:",t),s({address:t,isLoading:!1,error:null}),t}}throw Error("Both geocoding services failed")}catch(t){console.error("[v0] Reverse geocoding error:",t);let e="Unable to fetch address";return s({address:"",isLoading:!1,error:e}),e}},[]),a=(0,n.useCallback)(()=>new Promise((e,s)=>{if(!navigator.geolocation){s(Error("Geolocation is not supported by this browser"));return}navigator.geolocation.getCurrentPosition(s=>{e({lat:s.coords.latitude,lng:s.coords.longitude})},e=>{let t="Unable to get location";switch(e.code){case e.PERMISSION_DENIED:t="User denied location permission";break;case e.POSITION_UNAVAILABLE:t="Location information unavailable";break;case e.TIMEOUT:t="Location request timeout"}s(Error(t))},{enableHighAccuracy:!0,timeout:15e3,maximumAge:3e5})}),[]),r=(0,n.useCallback)(async()=>{try{let e=await a();return await t(e)}catch(t){console.error("[v0] Failed to get current location:",t);let e=t instanceof Error?t.message:"Unable to fetch address";return s({address:"",isLoading:!1,error:e}),e}},[a,t]);return{...e,reverseGeocode:t,getCurrentLocation:a,fetchAddressForCurrentLocation:r}};function e8(e){let{isOpen:s,onClose:t,onConfirm:n,alertType:i,zoneName:l}=e;return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",children:(0,a.jsx)("div",{className:"bg-card rounded-lg shadow-xl max-w-md w-full border border-destructive animate-in fade-in-0 zoom-in-95 duration-300 animate-pulse",children:(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto w-16 h-16 bg-destructive/10 rounded-full flex items-center justify-center mb-4 animate-bounce",children:(0,a.jsx)(K.Z,{className:"h-8 w-8 text-destructive animate-pulse"})}),(0,a.jsx)("h3",{className:"text-lg font-bold text-destructive animate-pulse",children:"restricted"===i?"\uD83D\uDEA8 RESTRICTED ZONE ALERT":"⚠️ UNSAFE ZONE ALERT"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"restricted"===i?"You have entered: ".concat(l,". This area is restricted for tourists."):"You are outside safe zones near: ".concat(l,". Exercise extreme caution.")})]}),(0,a.jsx)("div",{className:"bg-destructive/5 border border-destructive/20 rounded-lg p-3 animate-in slide-in-from-bottom-2 duration-500",children:(0,a.jsx)("p",{className:"text-sm font-medium text-destructive text-center",children:"restricted"===i?"Immediate action required! Leave this area now or contact authorities.":"Would you like to send an automatic SOS alert to authorities?"})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(r.z,{variant:"outline",onClick:t,className:"flex-1 bg-transparent hover:scale-105 transition-transform duration-200",children:"Dismiss"}),(0,a.jsxs)(r.z,{onClick:n,className:"flex-1 bg-destructive hover:bg-destructive/90 hover:scale-105 active:scale-95 transition-all duration-200 animate-pulse",children:[(0,a.jsx)(Q.Z,{className:"h-4 w-4 mr-2"}),"Send SOS Alert"]})]})]})})}):null}function e6(e){let{emergencyAlert:s,dismissEmergencyAlert:t,setCurrentView:n}=e;return s.isActive?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",children:(0,a.jsx)("div",{className:"bg-card rounded-lg shadow-xl max-w-md w-full border-4 border-destructive animate-in fade-in-0 zoom-in-95 duration-300",children:(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto w-20 h-20 bg-destructive/20 rounded-full flex items-center justify-center mb-4 animate-pulse",children:(0,a.jsx)(K.Z,{className:"h-12 w-12 text-destructive animate-bounce"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-destructive animate-pulse",children:"\uD83D\uDEA8 EMERGENCY ALERT \uD83D\uDEA8"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["You have entered: ",(0,a.jsx)("strong",{children:s.zoneName})]}),(0,a.jsx)("p",{className:"text-sm font-medium text-destructive mt-1",children:"This is a restricted/dangerous area!"})]}),(0,a.jsx)("div",{className:"bg-destructive/10 border-2 border-destructive/30 rounded-lg p-4 animate-in slide-in-from-bottom-2 duration-500",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-destructive mb-2 animate-pulse",children:s.countdown}),(0,a.jsxs)("p",{className:"text-sm font-medium text-destructive",children:["Police call will be initiated automatically in ",s.countdown," seconds"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Leave this area immediately or dismiss if safe"})]})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(r.z,{variant:"outline",onClick:t,className:"flex-1 bg-transparent hover:scale-105 transition-transform duration-200",children:"I'm Safe - Dismiss"}),(0,a.jsxs)(r.z,{onClick:()=>{t(),n("emergency")},className:"flex-1 bg-destructive hover:bg-destructive/90 hover:scale-105 active:scale-95 transition-all duration-200",children:[(0,a.jsx)(Q.Z,{className:"h-4 w-4 mr-2"}),"Call Now"]})]})]})})}):null}function e7(e){let{userInfo:s,tripDetails:t}=e,{currentPosition:c,isTracking:d,error:m,permissionStatus:u,currentZones:x,safetyScore:h,isManualMode:p,emergencyAlert:g,dismissEmergencyAlert:j,startTracking:v,stopTracking:N,simulatePositionUpdate:b,enableGPSMode:y}=ep({touristId:(null==s?void 0:s.digitalId)||"guest-user",enableHighAccuracy:!0,timeout:15e3,maximumAge:3e5,trackingInterval:5e3}),{address:w,isLoading:S,error:k,reverseGeocode:C}=e4(),[D,I]=(0,n.useState)({lat:28.6139,lng:77.209}),[T,Z]=(0,n.useState)(!0),[A,E]=(0,n.useState)(!1),[R,z]=(0,n.useState)(new Date),[M,O]=(0,n.useState)("connected"),[P,F]=(0,n.useState)("dashboard"),[G,U]=(0,n.useState)(h||100),[Y,B]=(0,n.useState)({isOpen:!1,alertType:"restricted",zoneName:""}),[V,X]=(0,n.useState)([{name:"Local Police",number:"100"},{name:"Tourist Helpline",number:"1363"},{name:"Medical Emergency",number:"108"}]),[q,W]=(0,n.useState)("");(0,n.useEffect)(()=>(console.log("[v0] Starting GPS tracking on dashboard mount"),v(),()=>{console.log("[v0] Stopping GPS tracking on dashboard unmount"),N()}),[v,N]),(0,n.useEffect)(()=>{c&&(console.log("[v0] GPS position received:",c),I({lat:c.lat,lng:c.lng}),z(new Date),C(c).then(e=>{W(e)}))},[c,C]),(0,n.useEffect)(()=>{void 0!==h&&U(h)},[h]);let J=(0,n.useCallback)(e=>{console.log("[v0] Manual location change:",e),b(e.lat,e.lng),z(new Date),C(e).then(e=>{W(e)});let s=[{lat:28.6139,lng:77.209,radius:.01,name:"Connaught Place Safe Zone"},{lat:28.6129,lng:77.2295,name:"India Gate Safe Zone",radius:.008}].some(s=>Math.sqrt(Math.pow(e.lat-s.lat,2)+Math.pow(e.lng-s.lng,2))<=s.radius),t=[{lat:28.62,lng:77.21,radius:.005,name:"Government Restricted Area"},{lat:28.615,lng:77.215,radius:.003,name:"Military Zone"}].find(s=>Math.sqrt(Math.pow(e.lat-s.lat,2)+Math.pow(e.lng-s.lng,2))<=s.radius);Z(s),E(!!t),t&&!A&&B({isOpen:!0,alertType:"restricted",zoneName:t.name})},[b,T,A,C]),el=(0,n.useCallback)(e=>{U(s=>s===e?s:(console.log("[v0] Safe score changed:",{previousScore:s,newScore:e,isInSafeZone:T}),!T&&e<20&&(console.log("[v0] Triggering SOS alert - outside safe zone and score below 20%"),B({isOpen:!0,alertType:"unsafe",zoneName:"Critical Safety Zone"})),e))},[T]);return"digitalId"===P?(0,a.jsx)(eT,{userInfo:s,onBack:()=>F("dashboard")}):"emergency"===P?(0,a.jsx)(eR,{userInfo:s,currentLocation:D,onBack:()=>F("dashboard")}):"locationSharing"===P?(0,a.jsx)(eG,{userInfo:s,emergencyContacts:(null==t?void 0:t.emergencyContacts)||[],currentLocation:D,onBack:()=>F("dashboard")}):"gamification"===P?(0,a.jsx)(eq,{userInfo:s,tripDetails:t,safeScore:G,onBack:()=>F("dashboard")}):"reporting"===P?(0,a.jsx)(eW,{currentLocation:D,onBack:()=>F("dashboard")}):"virtualGuardian"===P?(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("div",{className:"bg-foreground text-background p-4 sticky top-0 z-[1000] shadow-md",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(r.z,{variant:"ghost",size:"sm",onClick:()=>F("dashboard"),className:"text-background hover:bg-background/20",children:"← Back"}),(0,a.jsx)(o.Z,{className:"h-6 w-6 animate-pulse"}),(0,a.jsx)("h1",{className:"text-lg font-semibold",children:"Virtual Guardian AI"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("span",{className:"text-sm",children:"AI Safety Assistant"}),(0,a.jsx)(f,{})]})]})}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)(e5,{userLocation:D,safetyScore:G,currentZone:A?"Red Zone":T?"Green Zone":"Orange Zone",userInfo:{name:(null==s?void 0:s.name)||"Guest User",age:(null==s?void 0:s.age)?Number.parseInt(s.age):25,digitalId:(null==s?void 0:s.digitalId)||"guest001",tripStartDate:(null==t?void 0:t.startDate)||new Date().toISOString().split("T")[0],tripEndDate:(null==t?void 0:t.endDate)||new Date(Date.now()+6048e5).toISOString().split("T")[0]}})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)(e6,{emergencyAlert:g,dismissEmergencyAlert:j,setCurrentView:F}),(0,a.jsx)(e8,{isOpen:Y.isOpen,onClose:()=>{B({isOpen:!1,alertType:"restricted",zoneName:""})},onConfirm:()=>{B({isOpen:!1,alertType:"restricted",zoneName:""}),F("emergency"),console.log("[v0] SOS Alert sent automatically due to zone violation")},alertType:Y.alertType,zoneName:Y.zoneName}),(0,a.jsx)("div",{className:"bg-foreground text-background p-4 sticky top-0 z-[1000] shadow-md animate-in slide-in-from-top-4 duration-500",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(o.Z,{className:"h-6 w-6 ".concat(g.isActive?"animate-bounce text-red-400":"animate-pulse")}),(0,a.jsx)("h1",{className:"text-lg font-semibold",children:g.isActive?"\uD83D\uDEA8 EMERGENCY MODE":"Safety Dashboard"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"text-sm animate-in fade-in-0 duration-700 delay-300",children:["Welcome, ",(null==s?void 0:s.name)||"User"]}),(0,a.jsx)(f,{}),(0,a.jsx)($.Z,{className:"h-5 w-5 cursor-pointer hover:scale-110 hover:rotate-12 transition-all duration-300",title:"Language Settings"})]})]})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"p-3 ".concat(g.isActive?"bg-destructive animate-pulse":A?"bg-destructive animate-pulse":T?"bg-accent":"bg-orange-500"," text-white transition-all duration-500"),children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)(K.Z,{className:"h-4 w-4 ".concat(A||g.isActive?"animate-bounce":"")}),(0,a.jsx)("span",{className:"text-sm font-medium",children:g.isActive?"\uD83D\uDEA8 EMERGENCY: In ".concat(g.zoneName," - Police call in ").concat(g.countdown,"s"):m?"⚠️ GPS Error: ".concat(m," - Using manual mode"):d?"denied"===u?"⚠️ GPS permission denied - Using manual mode":p?"\uD83D\uDCCD Manual positioning mode - Drag marker to test zones":A?"⚠️ WARNING: You are in a restricted zone! Leave immediately or contact authorities.":T?"✅ You're in a safe zone - Continue exploring safely":"⚠️ You are outside designated safe zones - Exercise caution":"\uD83D\uDD0D Starting GPS tracking..."})]})}),(0,a.jsxs)("div",{className:"p-4 space-y-4 pb-20",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsx)(i.Zb,{className:"hover:shadow-lg hover:scale-105 transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-100 hover:shadow-accent/20",children:(0,a.jsx)(i.aY,{className:"p-4 text-center",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"p-2 bg-accent/10 rounded-full hover:bg-accent/20 transition-colors duration-300 hover:scale-110",children:(0,a.jsx)(L.Z,{className:"h-5 w-5 text-accent"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Status"}),(0,a.jsx)(l.C,{variant:"secondary",className:"bg-accent/10 text-accent hover:bg-accent/20 transition-colors duration-300",children:"Active"})]})]})})}),(0,a.jsx)(i.Zb,{className:"hover:shadow-lg hover:scale-105 transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-200 hover:shadow-primary/20",children:(0,a.jsx)(i.aY,{className:"p-4 text-center",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"p-2 bg-primary/10 rounded-full hover:bg-primary/20 transition-colors duration-300 hover:scale-110",children:(0,a.jsx)(_.Z,{className:"h-5 w-5 text-primary ".concat(d&&!p?"animate-pulse":"")})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Location tracking"}),(0,a.jsx)(l.C,{variant:"secondary",className:"bg-primary/10 text-primary hover:bg-primary/20 transition-colors duration-300",children:m?"GPS Error":d?p?"Manual Mode":"GPS Active":"Starting..."})]})]})})}),(0,a.jsx)(i.Zb,{className:"hover:shadow-lg hover:scale-105 transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-300 hover:shadow-emerald-500/20",children:(0,a.jsx)(i.aY,{className:"p-4 text-center",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"p-2 rounded-full transition-all duration-300 hover:scale-110 ".concat(G>=80?"bg-emerald-500/10 hover:bg-emerald-500/20":G>=50?"bg-yellow-500/10 hover:bg-yellow-500/20":"bg-red-500/10 text-red-500 hover:bg-red-500/20 animate-pulse"),children:(0,a.jsx)(o.Z,{className:"h-5 w-5 transition-all duration-300 ".concat(G>=80?"text-emerald-500":G>=50?"text-yellow-500 animate-pulse":"text-red-500 animate-bounce")})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Safe Score"}),(0,a.jsxs)(l.C,{variant:"secondary",className:"transition-all duration-300 hover:scale-105 ".concat(G>=80?"bg-emerald-500/10 text-emerald-500 hover:bg-emerald-500/20":G>=50?"bg-yellow-500/10 text-yellow-500 hover:bg-yellow-500/20":"bg-red-500/10 text-red-500 hover:bg-red-500/20 animate-pulse"),children:[G,"%"]})]})]})})})]}),(m||p)&&(0,a.jsx)(i.Zb,{className:"border-blue-200 bg-blue-50 dark:bg-blue-950 dark:border-blue-800",children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"GPS Controls"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:p?"Switch back to real GPS tracking":"Retry GPS location"})]}),(0,a.jsxs)(r.z,{onClick:y,variant:"outline",size:"sm",className:"hover:scale-105 transition-all duration-200 bg-transparent",children:[(0,a.jsx)(ee.Z,{className:"h-4 w-4 mr-2"}),"Enable GPS"]})]})})}),(0,a.jsx)(i.Zb,{className:"hover:shadow-md hover:scale-[1.02] transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500",children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(es.Z,{className:"h-4 w-4 transition-all duration-300 ".concat("connected"===M?"text-accent animate-pulse":"text-destructive animate-bounce")}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"connected"===M?"Connected":"Disconnected"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,a.jsx)(H.Z,{className:"h-4 w-4 animate-spin",style:{animationDuration:"8s"}}),(0,a.jsxs)("span",{children:["Last update: ",R.toLocaleTimeString()]})]})]})})}),(0,a.jsxs)(i.Zb,{className:"hover:shadow-lg transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-400 border-2 border-blue-200 bg-blue-50 dark:bg-blue-950 dark:border-blue-800",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(_.Z,{className:"h-5 w-5 animate-pulse"}),(0,a.jsx)("span",{children:"Real-Time GPS Tracking"})]}),(0,a.jsxs)(l.C,{variant:"outline",className:"text-xs hover:bg-muted transition-colors duration-300",children:[(0,a.jsx)(ee.Z,{className:"h-3 w-3 mr-1 ".concat(d&&!p?"animate-spin":""),style:{animationDuration:"3s"}}),d&&!p?"Live GPS":p?"Manual Mode":"GPS Starting"]})]})}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[(0,a.jsx)(eN,{touristId:(null==s?void 0:s.digitalId)||"guest-user",userAge:(null==s?void 0:s.age)?Number.parseInt(s.age):void 0,onLocationChange:J,onSafeScoreChange:el,initialZones:x}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"hover:bg-muted/50 p-2 rounded transition-colors duration-300",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Latitude:"}),(0,a.jsx)("p",{className:"font-mono font-medium text-foreground",children:D.lat.toFixed(6)})]}),(0,a.jsxs)("div",{className:"hover:bg-muted/50 p-2 rounded transition-colors duration-300",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Longitude:"}),(0,a.jsx)("p",{className:"font-mono font-medium text-foreground",children:D.lng.toFixed(6)})]})]}),(0,a.jsxs)("div",{className:"hover:bg-muted/50 p-2 rounded transition-colors duration-300",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Address:"}),(0,a.jsx)("p",{className:"font-medium text-foreground ".concat(S?"animate-pulse":""," ").concat(k?"text-destructive":""),children:S?"Fetching address…":k?"Unable to fetch address":q||(D.lat>28.615&&D.lng>77.21?"Red Fort Area, Chandni Chowk, New Delhi 110006":D.lat<28.61?"Lodhi Gardens, New Delhi 110003":"Connaught Place, New Delhi, Delhi 110001, India")}),S&&(0,a.jsxs)("div",{className:"flex items-center mt-1",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-primary mr-2"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Fetching location details..."})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Zone Status:"}),(0,a.jsx)(l.C,{variant:A?"destructive":T?"default":"secondary",className:"transition-all duration-300 hover:scale-105 ".concat(A?"animate-pulse":T?"bg-accent hover:bg-accent/80":"bg-orange-500 hover:bg-orange-600"),children:A?"Restricted":T?"Safe Zone":"Caution Zone"})]})]})]})]}),(0,a.jsxs)(i.Zb,{className:"hover:shadow-lg transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-500",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(Q.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Emergency Contacts"})]})}),(0,a.jsx)(i.aY,{className:"space-y-3",children:V.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded-lg hover:bg-muted transition-all duration-300 hover:scale-[1.02] hover:shadow-sm",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:e.name}),(0,a.jsx)(r.z,{variant:"outline",size:"sm",className:"h-8 bg-transparent hover:scale-105 active:scale-95 transition-all duration-200",children:e.number})]},s))})]}),(0,a.jsxs)(i.Zb,{className:"hover:shadow-lg transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-600 border-2 border-yellow-200 bg-yellow-50 dark:bg-yellow-950 dark:border-yellow-800",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(et.Z,{className:"h-5 w-5 text-yellow-600"}),(0,a.jsx)("span",{className:"text-yellow-800 dark:text-yellow-200",children:"Safety Achievements"})]}),(0,a.jsxs)(l.C,{variant:"outline",className:"text-yellow-600 border-yellow-300",children:["Level ",Math.floor(G/25)+1]})]})}),(0,a.jsxs)(i.aY,{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Earn points for safe practices and unlock achievements. Your current safety score contributes to your level and unlocks new badges."}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("p",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Safety Points: 850"}),(0,a.jsx)("p",{className:"text-yellow-600 dark:text-yellow-400",children:"Rank: Safety Explorer"})]}),(0,a.jsxs)(r.z,{onClick:()=>F("gamification"),variant:"outline",size:"sm",className:"bg-yellow-100 hover:bg-yellow-200 text-yellow-800 border-yellow-300 hover:scale-105 transition-all duration-200",children:[(0,a.jsx)(et.Z,{className:"h-4 w-4 mr-2"}),"View Achievements"]})]})]})]}),(0,a.jsxs)(i.Zb,{className:"hover:shadow-lg transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-700 border-2 border-purple-200 bg-purple-50 dark:bg-purple-950 dark:border-purple-800",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(ea.Z,{className:"h-5 w-5 text-purple-600"}),(0,a.jsx)("span",{className:"text-purple-800 dark:text-purple-200",children:"Anonymous Reporting"})]}),(0,a.jsx)(l.C,{variant:"outline",className:"text-purple-600 border-purple-300",children:"Community Safety"})]})}),(0,a.jsxs)(i.aY,{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Help keep the community safe by reporting suspicious activities or safety concerns anonymously. Your reports help authorities respond quickly."}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("p",{className:"font-medium text-purple-800 dark:text-purple-200",children:"Secure & Anonymous"}),(0,a.jsx)("p",{className:"text-purple-600 dark:text-purple-400",children:"24/7 authority monitoring"})]}),(0,a.jsxs)(r.z,{onClick:()=>F("reporting"),variant:"outline",size:"sm",className:"bg-purple-100 hover:bg-purple-200 text-purple-800 border-purple-300 hover:scale-105 transition-all duration-200",children:[(0,a.jsx)(ea.Z,{className:"h-4 w-4 mr-2"}),"Submit Report"]})]})]})]}),(0,a.jsxs)(i.Zb,{className:"hover:shadow-lg transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-800 border-2 border-cyan-200 bg-cyan-50 dark:bg-cyan-950 dark:border-cyan-800",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(en.Z,{className:"h-5 w-5 text-cyan-600"}),(0,a.jsx)("span",{className:"text-cyan-800 dark:text-cyan-200",children:"Virtual Guardian AI"})]}),(0,a.jsxs)(l.C,{variant:"outline",className:"text-cyan-600 border-cyan-300",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1 animate-pulse"}),"AI Assistant"]})]})}),(0,a.jsxs)(i.aY,{className:"space-y-3",children:[(0,a.jsx)("p",{className:"text-sm text-cyan-700 dark:text-cyan-300",children:"Get instant safety assistance from your AI-powered Virtual Guardian. Ask questions about local safety, emergency procedures, or get real-time guidance."}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("p",{className:"font-medium text-cyan-800 dark:text-cyan-200",children:"24/7 AI Safety Support"}),(0,a.jsx)("p",{className:"text-cyan-600 dark:text-cyan-400",children:"Instant emergency escalation"})]}),(0,a.jsxs)(r.z,{onClick:()=>F("virtualGuardian"),variant:"outline",size:"sm",className:"bg-cyan-100 hover:bg-cyan-200 text-cyan-800 border-cyan-300 hover:scale-105 transition-all duration-200",children:[(0,a.jsx)(en.Z,{className:"h-4 w-4 mr-2"}),"Chat with AI"]})]})]})]}),(0,a.jsxs)(r.z,{onClick:()=>{F("emergency")},className:"w-full h-16 text-lg font-bold bg-destructive hover:bg-destructive/90 shadow-lg hover:shadow-xl hover:scale-105 active:scale-95 transition-all duration-200 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-900 hover:shadow-destructive/25 group",size:"lg",children:[(0,a.jsx)(Q.Z,{className:"h-6 w-6 mr-2 group-hover:animate-bounce"}),(0,a.jsx)("span",{className:"group-hover:animate-pulse",children:"\uD83D\uDEA8 EMERGENCY SOS \uD83D\uDEA8"})]})]})]}),(0,a.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border shadow-lg animate-in slide-in-from-bottom-4 duration-500",children:(0,a.jsxs)("div",{className:"grid grid-cols-6",children:[(0,a.jsxs)(r.z,{variant:"ghost",className:"h-16 flex-col space-y-1 hover:scale-105 active:scale-95 transition-all duration-200 hover:bg-muted/50 ".concat("dashboard"===P?"text-primary bg-primary/5":""),onClick:()=>F("dashboard"),children:[(0,a.jsx)(er.Z,{className:"h-4 w-4 ".concat("dashboard"===P?"animate-pulse":"")}),(0,a.jsx)("span",{className:"text-xs",children:"Home"})]}),(0,a.jsxs)(r.z,{variant:"ghost",className:"h-16 flex-col space-y-1 hover:scale-105 active:scale-95 transition-all duration-200 hover:bg-muted/50 ".concat("digitalId"===P?"text-primary bg-primary/5":""),onClick:()=>F("digitalId"),children:[(0,a.jsx)(L.Z,{className:"h-4 w-4 ".concat("digitalId"===P?"animate-pulse":"")}),(0,a.jsx)("span",{className:"text-xs",children:"Digital ID"})]}),(0,a.jsxs)(r.z,{variant:"ghost",className:"h-16 flex-col space-y-1 hover:scale-105 active:scale-95 transition-all duration-200 hover:bg-muted/50 ".concat("locationSharing"===P?"text-primary bg-primary/5":""),onClick:()=>F("locationSharing"),children:[(0,a.jsx)(ei.Z,{className:"h-4 w-4 ".concat("locationSharing"===P?"animate-pulse":"")}),(0,a.jsx)("span",{className:"text-xs",children:"Location"})]}),(0,a.jsxs)(r.z,{variant:"ghost",className:"h-16 flex-col space-y-1 hover:scale-105 active:scale-95 transition-all duration-200 hover:bg-muted/50 ".concat("gamification"===P?"text-primary bg-primary/5":""),onClick:()=>F("gamification"),children:[(0,a.jsx)(et.Z,{className:"h-4 w-4 ".concat("gamification"===P?"animate-pulse":"")}),(0,a.jsx)("span",{className:"text-xs",children:"Rewards"})]}),(0,a.jsxs)(r.z,{variant:"ghost",className:"h-16 flex-col space-y-1 hover:scale-105 active:scale-95 transition-all duration-200 hover:bg-muted/50 ".concat("reporting"===P?"text-primary bg-primary/5":""),onClick:()=>F("reporting"),children:[(0,a.jsx)(ea.Z,{className:"h-4 w-4 ".concat("reporting"===P?"animate-pulse":"")}),(0,a.jsx)("span",{className:"text-xs",children:"Report"})]}),(0,a.jsxs)(r.z,{variant:"ghost",className:"h-16 flex-col space-y-1 hover:scale-105 active:scale-95 transition-all duration-200 hover:bg-muted/50 ".concat("virtualGuardian"===P?"text-primary bg-primary/5":""),onClick:()=>F("virtualGuardian"),children:[(0,a.jsx)(en.Z,{className:"h-4 w-4 ".concat("virtualGuardian"===P?"animate-pulse":"")}),(0,a.jsx)("span",{className:"text-xs",children:"AI Guardian"})]})]})})]})}var e9=t(2339),se=t(4766),ss=t(4401),st=t(740),sa=t(2735),sn=t(3229),sr=t(7168);function si(e){let{incidents:s}=e,l=(0,n.useRef)(null),[c,o]=(0,n.useState)(null),[d,m]=(0,n.useState)(!0),[u,x]=(0,n.useState)(new Date),[h,p]=(0,n.useState)({activeTourists:247,riskZones:5,crowdAlerts:3,responseUnits:8});return(0,n.useEffect)(()=>{let e=setInterval(()=>{p(e=>({activeTourists:e.activeTourists+Math.floor(10*Math.random()-5),riskZones:Math.max(0,e.riskZones+Math.floor(3*Math.random()-1)),crowdAlerts:Math.max(0,e.crowdAlerts+Math.floor(2*Math.random()-1)),responseUnits:Math.max(5,Math.min(12,e.responseUnits+Math.floor(3*Math.random()-1)))})),x(new Date)},3e4);return()=>clearInterval(e)},[]),(0,n.useEffect)(()=>{l.current&&!c&&t.e(212).then(t.t.bind(t,759,23)).then(e=>{delete e.Icon.Default.prototype._getIconUrl,e.Icon.Default.mergeOptions({iconRetinaUrl:"/map-marker-icon.jpg",iconUrl:"/map-marker-icon.jpg",shadowUrl:"/marker-shadow.jpg"});let t=e.map(l.current,{zoomControl:!0,scrollWheelZoom:!0}).setView([28.6139,77.209],12);e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xa9 OpenStreetMap contributors",maxZoom:18}).addTo(t),[{lat:28.6139,lng:77.209,radius:1e3,name:"Connaught Place Safe Zone",score:95},{lat:28.6129,lng:77.2295,radius:800,name:"India Gate Safe Zone",score:92},{lat:28.6562,lng:77.241,radius:600,name:"Red Fort Safe Zone",score:88},{lat:28.6304,lng:77.2177,radius:700,name:"Rajpath Safe Zone",score:90}].forEach(s=>{e.circle([s.lat,s.lng],{color:"#10b981",fillColor:"#10b981",fillOpacity:.15,weight:3,radius:s.radius,className:"animate-pulse"}).addTo(t).bindPopup('\n              <div style="min-width: 200px;">\n                <strong style="color: #10b981;">✅ '.concat(s.name,'</strong><br/>\n                <strong>Status:</strong> <span style="color: #10b981;">Safe Zone</span><br/>\n                <strong>Safety Score:</strong> ').concat(s.score,"%<br/>\n                <strong>Coverage:</strong> ").concat(s.radius,"m radius<br/>\n                <strong>Active Tourists:</strong> ").concat(Math.floor(50*Math.random()+20),"<br/>\n                <strong>Last Updated:</strong> ").concat(new Date().toLocaleTimeString(),"\n              </div>\n            "))}),[{lat:28.62,lng:77.21,radius:500,name:"Government Restricted Area",risk:"HIGH"},{lat:28.615,lng:77.215,radius:300,name:"Military Zone",risk:"CRITICAL"},{lat:28.608,lng:77.225,radius:400,name:"Construction Zone",risk:"MEDIUM"}].forEach(s=>{let a="CRITICAL"===s.risk?"#dc2626":"HIGH"===s.risk?"#ea580c":"#f59e0b";e.circle([s.lat,s.lng],{color:a,fillColor:a,fillOpacity:.25,weight:4,radius:s.radius,className:"CRITICAL"===s.risk?"animate-pulse":""}).addTo(t).bindPopup('\n              <div style="min-width: 200px;">\n                <strong style="color: '.concat(a,';">⚠️ ').concat(s.name,'</strong><br/>\n                <strong>Status:</strong> <span style="color: ').concat(a,';">RESTRICTED</span><br/>\n                <strong>Risk Level:</strong> <span style="color: ').concat(a,';">').concat(s.risk,"</span><br/>\n                <strong>Radius:</strong> ").concat(s.radius,"m<br/>\n                <strong>Tourists Detected:</strong> ").concat(Math.floor(5*Math.random()),"<br/>\n                <strong>Action Required:</strong> Immediate evacuation\n              </div>\n            "))}),[{lat:28.6505,lng:77.2334,radius:300,name:"Chandni Chowk Market",density:"HIGH"},{lat:28.6127,lng:77.2773,radius:250,name:"Humayun's Tomb",density:"MEDIUM"},{lat:28.5562,lng:77.1,radius:400,name:"Qutub Minar",density:"HIGH"}].forEach(s=>{e.circle([s.lat,s.lng],{color:"#7c3aed",fillColor:"#7c3aed",fillOpacity:.2,weight:3,radius:s.radius,dashArray:"10, 5"}).addTo(t).bindPopup('\n              <div style="min-width: 200px;">\n                <strong style="color: #7c3aed;">\uD83D\uDFEA '.concat(s.name,'</strong><br/>\n                <strong>Type:</strong> <span style="color: #7c3aed;">Crowd Density Alert</span><br/>\n                <strong>Density Level:</strong> ').concat(s.density,"<br/>\n                <strong>Estimated Crowd:</strong> ").concat("HIGH"===s.density?"500+":"200-500"," people<br/>\n                <strong>Advisory:</strong> Be cautious with belongings<br/>\n                <strong>Status:</strong> Safe but crowded\n              </div>\n            "))}),[{lat:28.6145,lng:77.2085,name:"Alice Cooper",id:"NVS-11111111",status:"Safe",safeScore:95,lastSeen:"2 min ago"},{lat:28.6125,lng:77.2305,name:"Bob Wilson",id:"NVS-22222222",status:"Safe",safeScore:88,lastSeen:"1 min ago"},{lat:28.6155,lng:77.2065,name:"Carol Davis",id:"NVS-33333333",status:"Safe",safeScore:92,lastSeen:"30 sec ago"},{lat:28.6135,lng:77.2095,name:"David Brown",id:"NVS-44444444",status:"Safe",safeScore:85,lastSeen:"45 sec ago"},{lat:28.618,lng:77.212,name:"Emma Johnson",id:"NVS-55555555",status:"Caution",safeScore:65,lastSeen:"3 min ago"},{lat:28.611,lng:77.208,name:"Frank Miller",id:"NVS-66666666",status:"Safe",safeScore:90,lastSeen:"1 min ago"}].forEach(s=>{let a=s.safeScore>=80?"#10b981":s.safeScore>=60?"#f59e0b":"#dc2626",n=s.safeScore>=80?"\uD83D\uDC64":s.safeScore>=60?"⚠️":"\uD83D\uDEA8";e.marker([s.lat,s.lng],{icon:e.divIcon({className:"custom-div-icon",html:'<div style="background-color: '.concat(a,"; color: white; border-radius: 50%; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: bold; border: 3px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.3); ").concat(s.safeScore<80?"animation: pulse 2s infinite;":"",'">').concat(n,"</div>"),iconSize:[28,28],iconAnchor:[14,14]})}).addTo(t).bindPopup('\n              <div style="min-width: 220px;">\n                <strong>'.concat(s.name,"</strong><br/>\n                <strong>Tourist ID:</strong> ").concat(s.id,'<br/>\n                <strong>Status:</strong> <span style="color: ').concat(a,';">').concat(s.status,'</span><br/>\n                <strong>Safe Score:</strong> <span style="color: ').concat(a,';">').concat(s.safeScore,"%</span><br/>\n                <strong>Last Seen:</strong> ").concat(s.lastSeen,'<br/>\n                <strong>Location:</strong> Live tracking active<br/>\n                <strong>Emergency Contact:</strong> Available<br/>\n                <hr style="margin: 8px 0;">\n                <small><em>Real-time location monitoring via NaviSafe</em></small>\n              </div>\n            '))}),s.forEach(s=>{let a="HIGH"===s.priority?"#dc2626":"MEDIUM"===s.priority?"#f59e0b":"CRITICAL"===s.priority?"#991b1b":"#6b7280",n="CRITICAL"===s.priority?40:"HIGH"===s.priority?36:32,r="CRITICAL"===s.priority?"\uD83C\uDD98":"\uD83D\uDEA8";e.marker([s.location.lat,s.location.lng],{icon:e.divIcon({className:"custom-div-icon",html:'<div style="background-color: '.concat(a,"; color: white; border-radius: 50%; width: ").concat(n,"px; height: ").concat(n,"px; display: flex; align-items: center; justify-content: center; font-size: ").concat(n/2,"px; font-weight: bold; border: 4px solid white; box-shadow: 0 3px 10px rgba(0,0,0,0.4); animation: ").concat("HIGH"===s.priority||"CRITICAL"===s.priority?"pulse 1.5s infinite":"none",';">').concat(r,"</div>"),iconSize:[n,n],iconAnchor:[n/2,n/2]})}).addTo(t).bindPopup('\n              <div style="min-width: 250px;">\n                <strong style="color: '.concat(a,';">').concat(s.type,"</strong><br/>\n                <strong>Incident ID:</strong> ").concat(s.id,"<br/>\n                <strong>Tourist:</strong> ").concat(s.touristName,"<br/>\n                <strong>Tourist ID:</strong> ").concat(s.touristId,'<br/>\n                <strong>Priority:</strong> <span style="color: ').concat(a,'; font-weight: bold;">').concat(s.priority,"</span><br/>\n                <strong>Status:</strong> ").concat(s.status,"<br/>\n                <strong>Reported:</strong> ").concat(s.timestamp.toLocaleTimeString(),"<br/>\n                <strong>Contact:</strong> ").concat(s.phone,"<br/>\n                <strong>Response Time:</strong> ").concat(Math.floor(8*Math.random()+2),' minutes<br/>\n                <hr style="margin: 8px 0;">\n                <em>').concat(s.description,'</em><br/>\n                <hr style="margin: 8px 0;">\n                <small><strong>Actions:</strong> Response team dispatched, Real-time monitoring active</small>\n              </div>\n            '))}),[{lat:28.6145,lng:77.2105,name:"Connaught Place Police Station",units:3,responseTime:"3-5 min"},{lat:28.6565,lng:77.2415,name:"Red Fort Police Station",units:2,responseTime:"4-6 min"},{lat:28.6135,lng:77.2315,name:"India Gate Police Station",units:4,responseTime:"2-4 min"},{lat:28.6304,lng:77.2177,name:"Central Delhi Police Station",units:5,responseTime:"3-5 min"}].forEach(s=>{e.marker([s.lat,s.lng],{icon:e.divIcon({className:"custom-div-icon",html:'<div style="background-color: #059669; color: white; border-radius: 6px; padding: 6px 10px; font-size: 12px; font-weight: bold; border: 3px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.3); min-width: 50px; text-align: center;">\uD83D\uDE94<br/>'.concat(s.units,"</div>"),iconSize:[50,30],iconAnchor:[25,15]})}).addTo(t).bindPopup('\n              <div style="min-width: 200px;">\n                <strong>\uD83D\uDE94 '.concat(s.name,'</strong><br/>\n                <strong>Status:</strong> <span style="color: #059669;">Active & Ready</span><br/>\n                <strong>Available Units:</strong> ').concat(s.units,"<br/>\n                <strong>Response Time:</strong> ").concat(s.responseTime,"<br/>\n                <strong>Coverage Area:</strong> 2km radius<br/>\n                <strong>Specialization:</strong> Tourist Safety<br/>\n                <strong>Contact:</strong> Direct dispatch available\n              </div>\n            "))}),o(t),m(!1)})},[]),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Real-time Tourist & Incident Tracking"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Last updated: ",u.toLocaleTimeString()," • Auto-refresh every 30s"]})]}),(0,a.jsxs)(r.z,{variant:"outline",size:"sm",onClick:()=>{x(new Date),p(e=>({...e,activeTourists:e.activeTourists+Math.floor(20*Math.random()-10)}))},className:"hover:scale-105 transition-all duration-200 group bg-transparent",children:[(0,a.jsx)(sr.Z,{className:"h-4 w-4 mr-2 group-hover:animate-spin"}),"Refresh"]})]}),(0,a.jsx)(i.Zb,{className:"p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{children:"Safe Zones"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{children:"Restricted Areas"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-purple-500 rounded-full"}),(0,a.jsx)("span",{children:"Crowd Alerts"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-blue-500 rounded-full"}),(0,a.jsx)("span",{children:"Safe Tourists"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 bg-emerald-600 rounded-full"}),(0,a.jsx)("span",{children:"Police Stations"})]})]})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{ref:l,className:"h-[500px] w-full rounded-lg border border-border shadow-lg",style:{minHeight:"500px"}}),d&&(0,a.jsx)("div",{className:"absolute inset-0 bg-muted/50 rounded-lg flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loading enhanced authority map..."})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsx)(i.Zb,{className:"p-4 text-center hover:shadow-lg transition-all duration-300 hover:scale-105",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(Y.Z,{className:"h-6 w-6 mx-auto text-primary animate-pulse"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-primary",children:h.activeTourists}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active Tourists"})]})]})}),(0,a.jsx)(i.Zb,{className:"p-4 text-center hover:shadow-lg transition-all duration-300 hover:scale-105",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(K.Z,{className:"h-6 w-6 mx-auto text-destructive animate-bounce"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-destructive",children:s.length}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active Incidents"})]})]})}),(0,a.jsx)(i.Zb,{className:"p-4 text-center hover:shadow-lg transition-all duration-300 hover:scale-105",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(eH.Z,{className:"h-6 w-6 mx-auto text-orange-500 animate-pulse"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-500",children:h.riskZones}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Risk Zones"})]})]})}),(0,a.jsx)(i.Zb,{className:"p-4 text-center hover:shadow-lg transition-all duration-300 hover:scale-105",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-6 w-6 mx-auto bg-emerald-600 rounded flex items-center justify-center text-white text-xs font-bold animate-pulse",children:"\uD83D\uDE94"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-emerald-600",children:h.responseUnits}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Response Units"})]})]})})]})]})}var sl=t(3085),sc=t(4972);function so(e){let{onAnomalyDetected:s}=e,[t,c]=(0,n.useState)(!0),[o,d]=(0,n.useState)([]),[m,u]=(0,n.useState)(0),[x,h]=(0,n.useState)({totalScanned:247,anomaliesDetected:8,falsePositives:2,accuracy:94.2});(0,n.useEffect)(()=>{if(!t)return;let e=setInterval(()=>{if(u(100*Math.random()),.15>Math.random()){let e=[{type:"no_movement",description:"No movement detected for 3+ hours",severity:"HIGH",confidence:92+8*Math.random()},{type:"sudden_drop",description:"Location jumped 1.2km in 90 seconds",severity:"CRITICAL",confidence:88+12*Math.random()},{type:"route_deviation",description:"Deviated 6km from planned route",severity:"MEDIUM",confidence:85+10*Math.random()},{type:"speed_anomaly",description:"Unusual speed pattern detected",severity:"LOW",confidence:78+15*Math.random()}],t=[{id:"NVS-12345678",name:"John Smith"},{id:"NVS-87654321",name:"Sarah Johnson"},{id:"NVS-11223344",name:"Mike Chen"},{id:"NVS-55667788",name:"Emma Wilson"},{id:"NVS-99887766",name:"David Brown"}],a=e[Math.floor(Math.random()*e.length)],n=t[Math.floor(Math.random()*t.length)],r={id:"ANOM-".concat(Date.now()),touristId:n.id,touristName:n.name,type:a.type,severity:a.severity,location:{lat:28.6139+(Math.random()-.5)*.1,lng:77.209+(Math.random()-.5)*.1},timestamp:new Date,description:a.description,aiConfidence:a.confidence,status:"detected"};d(e=>[r,...e.slice(0,9)]),s(r),h(e=>({...e,anomaliesDetected:e.anomaliesDetected+1,totalScanned:e.totalScanned+Math.floor(5*Math.random())}))}},1e4);return()=>clearInterval(e)},[t,s]);let p=e=>{switch(e){case"no_movement":return H.Z;case"sudden_drop":return sl.Z;case"route_deviation":return ee.Z;case"speed_anomaly":return eH.Z;default:return K.Z}},g=e=>{switch(e){case"CRITICAL":return"text-red-600 bg-red-50 border-red-200";case"HIGH":return"text-orange-600 bg-orange-50 border-orange-200";case"MEDIUM":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"LOW":return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},f=(e,s)=>{d(t=>t.map(t=>t.id===e?{...t,status:s}:t)),"false_positive"===s&&h(e=>({...e,falsePositives:e.falsePositives+1,accuracy:(e.anomaliesDetected-e.falsePositives-1)/e.anomaliesDetected*100}))};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(sc.Z,{className:"h-5 w-5 text-primary"}),(0,a.jsx)("span",{children:"AI Anomaly Detection System"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l.C,{variant:t?"default":"secondary",className:"bg-accent",children:t?"Active":"Inactive"}),(0,a.jsx)(r.z,{variant:"outline",size:"sm",onClick:()=>c(!t),children:t?"Pause":"Start"})]})]})}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{children:"Processing Load"}),(0,a.jsxs)("span",{children:[m.toFixed(1),"%"]})]}),(0,a.jsx)(eU,{value:m,className:"h-2"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-primary",children:x.totalScanned}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Tourists Scanned"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-destructive",children:x.anomaliesDetected}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Anomalies Detected"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-orange-500",children:x.falsePositives}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"False Positives"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-2xl font-bold text-accent",children:[x.accuracy.toFixed(1),"%"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Accuracy"})]})]})]})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(K.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Recent AI Detections"})]})}),(0,a.jsx)(i.aY,{className:"space-y-3",children:0===o.length?(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsx)(sc.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,a.jsx)("p",{children:"AI system is monitoring... No anomalies detected yet."})]}):o.map(e=>{let s=p(e.type);return(0,a.jsx)("div",{className:"p-4 border rounded-lg ".concat(g(e.severity)),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(s,{className:"h-5 w-5"}),(0,a.jsx)(l.C,{variant:"outline",className:"text-xs",children:e.severity}),(0,a.jsxs)(l.C,{variant:"secondary",className:"text-xs",children:["AI: ",e.aiConfidence.toFixed(1),"%"]}),(0,a.jsx)("span",{className:"text-xs font-mono",children:e.id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold",children:e.description}),(0,a.jsxs)("p",{className:"text-sm",children:["Tourist: ",e.touristName," (",e.touristId,")"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(_.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[e.location.lat.toFixed(4),", ",e.location.lng.toFixed(4)]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(H.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:e.timestamp.toLocaleTimeString()})]})]})]}),"detected"===e.status&&(0,a.jsxs)("div",{className:"flex flex-col space-y-1 ml-4",children:[(0,a.jsx)(r.z,{size:"sm",variant:"outline",onClick:()=>f(e.id,"resolved"),className:"text-xs h-7",children:"Resolve"}),(0,a.jsx)(r.z,{size:"sm",variant:"ghost",onClick:()=>f(e.id,"false_positive"),className:"text-xs h-7",children:"False +"})]}),"detected"!==e.status&&(0,a.jsx)(l.C,{variant:"secondary",className:"text-xs",children:"resolved"===e.status?"Resolved":"False Positive"})]})},e.id)})})]})]})}var sd=t(6215);function sm(e){let{data:s,type:t}=e,l=(0,n.useRef)(null),[c,o]=(0,n.useState)("1h"),[d,m]=(0,n.useState)(!1),[u,x]=(0,n.useState)([{lat:28.6139,lng:77.209,intensity:.9,type:"tourist",count:45,area:"Connaught Place"},{lat:28.6129,lng:77.2295,intensity:.7,type:"tourist",count:32,area:"India Gate"},{lat:28.6562,lng:77.241,intensity:.8,type:"tourist",count:38,area:"Red Fort"},{lat:28.6505,lng:77.2334,intensity:.95,type:"crowd",count:120,area:"Chandni Chowk"},{lat:28.62,lng:77.21,intensity:.85,type:"risk",count:8,area:"Restricted Zone"},{lat:28.6304,lng:77.2177,intensity:.6,type:"tourist",count:28,area:"Rajpath"},{lat:28.6127,lng:77.2773,intensity:.75,type:"crowd",count:85,area:"Humayun Tomb"}]),h=(e,s)=>{switch(e){case"tourist":return"rgba(59, 130, 246, ".concat(s,")");case"risk":return"rgba(239, 68, 68, ".concat(s,")");case"crowd":return"rgba(147, 51, 234, ".concat(s,")");default:return"rgba(107, 114, 128, ".concat(s,")")}},p=()=>{let e=l.current;if(!e)return;let s=e.getContext("2d");if(s){s.clearRect(0,0,e.width,e.height),e.width=e.offsetWidth,e.height=e.offsetHeight,s.strokeStyle="rgba(156, 163, 175, 0.2)",s.lineWidth=1;for(let t=0;t<=10;t++){let a=e.width/10*t,n=e.height/10*t;s.beginPath(),s.moveTo(a,0),s.lineTo(a,e.height),s.stroke(),s.beginPath(),s.moveTo(0,n),s.lineTo(e.width,n),s.stroke()}("tourist"===t?u.filter(e=>e.type===t):u).forEach((t,a)=>{let n=(t.lng-77.15)*(e.width/.15),r=(28.7-t.lat)*(e.height/.15);if(n>=0&&n<=e.width&&r>=0&&r<=e.height){let e=s.createRadialGradient(n,r,0,n,r,40);e.addColorStop(0,h(t.type,t.intensity)),e.addColorStop(1,h(t.type,0)),s.fillStyle=e,s.beginPath(),s.arc(n,r,40,0,2*Math.PI),s.fill(),s.fillStyle=h(t.type,1),s.beginPath(),s.arc(n,r,4,0,2*Math.PI),s.fill(),s.fillStyle="#ffffff",s.font="bold 10px sans-serif",s.textAlign="center",s.fillText(t.count.toString(),n,r+3)}})}};return(0,n.useEffect)(()=>{p()},[u,t]),(0,n.useEffect)(()=>{let e=()=>p();return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.jsxs)(i.Zb,{className:"hover:shadow-lg transition-shadow duration-300",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2 hover:text-primary transition-colors duration-300",children:[(()=>{switch(t){case"tourist":return(0,a.jsx)(Y.Z,{className:"h-5 w-5"});case"risk":return(0,a.jsx)(eH.Z,{className:"h-5 w-5"});case"crowd":return(0,a.jsx)(_.Z,{className:"h-5 w-5"});default:return(0,a.jsx)(sd.Z,{className:"h-5 w-5"})}})(),(0,a.jsx)("span",{children:(()=>{switch(t){case"tourist":return"Tourist Distribution Heatmap";case"risk":return"Risk Zone Intensity Map";case"crowd":return"Crowd Density Visualization";default:return"Multi-Layer Heatmap"}})()})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(I,{value:c,onValueChange:o,children:[(0,a.jsx)(Z,{className:"w-20 h-8",children:(0,a.jsx)(T,{})}),(0,a.jsxs)(A,{children:[(0,a.jsx)(E,{value:"15m",children:"15m"}),(0,a.jsx)(E,{value:"1h",children:"1h"}),(0,a.jsx)(E,{value:"6h",children:"6h"}),(0,a.jsx)(E,{value:"24h",children:"24h"})]})]}),(0,a.jsx)(r.z,{variant:"outline",size:"sm",onClick:()=>{m(!0),setTimeout(()=>{x(e=>e.map(e=>({...e,intensity:Math.max(.1,Math.min(1,e.intensity+(Math.random()-.5)*.3)),count:Math.max(1,e.count+Math.floor((Math.random()-.5)*20))}))),m(!1)},1e3)},disabled:d,className:"hover:scale-105 transition-all duration-200 bg-transparent",children:(0,a.jsx)(sr.Z,{className:"h-4 w-4 ".concat(d?"animate-spin":"")})})]})]})}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("canvas",{ref:l,className:"w-full h-64 border border-border rounded-lg bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",style:{minHeight:"256px"}}),d&&(0,a.jsx)("div",{className:"absolute inset-0 bg-background/50 rounded-lg flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Updating heatmap..."})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium text-sm",children:"Intensity Legend"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-xs",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:h(t,.3)}}),(0,a.jsx)("span",{children:"Low (0-30%)"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-xs",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:h(t,.6)}}),(0,a.jsx)("span",{children:"Medium (30-70%)"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-xs",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:h(t,.9)}}),(0,a.jsx)("span",{children:"High (70-100%)"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-medium text-sm",children:"Statistics"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{className:"bg-muted/50 p-2 rounded",children:[(0,a.jsx)("p",{className:"font-medium",children:"Total Points"}),(0,a.jsx)("p",{className:"text-lg font-bold",children:u.filter(e=>"tourist"!==t||e.type===t).length})]}),(0,a.jsxs)("div",{className:"bg-muted/50 p-2 rounded",children:[(0,a.jsx)("p",{className:"font-medium",children:"Avg Intensity"}),(0,a.jsxs)("p",{className:"text-lg font-bold",children:[Math.round(u.filter(e=>"tourist"!==t||e.type===t).reduce((e,s)=>e+s.intensity,0)/u.length*100),"%"]})]})]})]})]})]})})]})}var su=t(525);function sx(){let[e,s]=(0,n.useState)([]),[t,r]=(0,n.useState)({totalTourists:247,activeIncidents:3,avgRiskLevel:25,avgResponseTime:6.2,safeZones:8,riskZones:5,crowdAlerts:3,responseUnits:12}),[c,o]=(0,n.useState)({touristGrowth:12,incidentReduction:-8,responseImprovement:-15,riskIncrease:5});(0,n.useEffect)(()=>{let e=setInterval(()=>{let e={timestamp:new Date,touristCount:t.totalTourists+Math.floor(20*Math.random()-10),incidentCount:Math.max(0,t.activeIncidents+Math.floor(3*Math.random()-1)),riskLevel:Math.max(0,Math.min(100,t.avgRiskLevel+Math.floor(10*Math.random()-5))),responseTime:Math.max(2,t.avgResponseTime+(Math.random()-.5)*2)};s(s=>[...s.slice(-19),e]),r(s=>({...s,totalTourists:e.touristCount,activeIncidents:e.incidentCount,avgRiskLevel:e.riskLevel,avgResponseTime:e.responseTime}))},5e3);return()=>clearInterval(e)},[t]);let d=e=>e<30?"text-green-600":e<60?"text-yellow-600":"text-red-600",m=e=>e<30?"bg-green-100 dark:bg-green-900":e<60?"bg-yellow-100 dark:bg-yellow-900":"bg-red-100 dark:bg-red-900",u=e=>e>0?"↗️":e<0?"↘️":"➡️",x=(e,s)=>0===e?"text-muted-foreground":e>0===s?"text-green-600":"text-red-600";return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsx)(i.Zb,{className:"hover:shadow-lg transition-all duration-300 hover:scale-105",children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Active Tourists"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-primary",children:t.totalTourists}),(0,a.jsx)("div",{className:"flex items-center space-x-1 text-xs",children:(0,a.jsxs)("span",{className:x(c.touristGrowth,!0),children:[u(c.touristGrowth)," ",Math.abs(c.touristGrowth),"%"]})})]}),(0,a.jsx)(Y.Z,{className:"h-8 w-8 text-primary animate-pulse"})]})})}),(0,a.jsx)(i.Zb,{className:"hover:shadow-lg transition-all duration-300 hover:scale-105",children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Active Incidents"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-destructive",children:t.activeIncidents}),(0,a.jsx)("div",{className:"flex items-center space-x-1 text-xs",children:(0,a.jsxs)("span",{className:x(c.incidentReduction,!1),children:[u(c.incidentReduction)," ",Math.abs(c.incidentReduction),"%"]})})]}),(0,a.jsx)(K.Z,{className:"h-8 w-8 text-destructive animate-bounce"})]})})}),(0,a.jsx)(i.Zb,{className:"hover:shadow-lg transition-all duration-300 hover:scale-105",children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Avg Risk Level"}),(0,a.jsxs)("p",{className:"text-2xl font-bold ".concat(d(t.avgRiskLevel)),children:[t.avgRiskLevel,"%"]}),(0,a.jsx)("div",{className:"flex items-center space-x-1 text-xs",children:(0,a.jsxs)("span",{className:x(c.riskIncrease,!1),children:[u(c.riskIncrease)," ",Math.abs(c.riskIncrease),"%"]})})]}),(0,a.jsx)(eH.Z,{className:"h-8 w-8 text-orange-500 animate-pulse"})]})})}),(0,a.jsx)(i.Zb,{className:"hover:shadow-lg transition-all duration-300 hover:scale-105",children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Response Time"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[t.avgResponseTime.toFixed(1),"m"]}),(0,a.jsx)("div",{className:"flex items-center space-x-1 text-xs",children:(0,a.jsxs)("span",{className:x(c.responseImprovement,!1),children:[u(c.responseImprovement)," ",Math.abs(c.responseImprovement),"%"]})})]}),(0,a.jsx)(H.Z,{className:"h-8 w-8 text-blue-600 animate-spin",style:{animationDuration:"8s"}})]})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(i.Zb,{className:"hover:shadow-lg transition-shadow duration-300",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(sd.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Zone Distribution"})]})}),(0,a.jsx)(i.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,a.jsx)("span",{className:"text-sm",children:"Safe Zones"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l.C,{variant:"outline",children:t.safeZones}),(0,a.jsx)(eU,{value:80,className:"w-20"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-sm",children:"Risk Zones"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l.C,{variant:"destructive",children:t.riskZones}),(0,a.jsx)(eU,{value:25,className:"w-20"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),(0,a.jsx)("span",{className:"text-sm",children:"Crowd Alerts"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l.C,{variant:"secondary",children:t.crowdAlerts}),(0,a.jsx)(eU,{value:15,className:"w-20"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,a.jsx)("span",{className:"text-sm",children:"Response Units"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l.C,{variant:"outline",children:t.responseUnits}),(0,a.jsx)(eU,{value:75,className:"w-20"})]})]})]})})})]}),(0,a.jsxs)(i.Zb,{className:"hover:shadow-lg transition-shadow duration-300",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(ss.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Risk Assessment Matrix"})]})}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[(0,a.jsx)("div",{className:"text-center font-medium",children:"Low"}),(0,a.jsx)("div",{className:"text-center font-medium",children:"Medium"}),(0,a.jsx)("div",{className:"text-center font-medium",children:"High"})]}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,a.jsxs)("div",{className:"p-3 rounded text-center ".concat(m(20)),children:[(0,a.jsx)("p",{className:"font-bold text-green-600",children:"65%"}),(0,a.jsx)("p",{className:"text-xs",children:"Safe Areas"})]}),(0,a.jsxs)("div",{className:"p-3 rounded text-center ".concat(m(50)),children:[(0,a.jsx)("p",{className:"font-bold text-yellow-600",children:"25%"}),(0,a.jsx)("p",{className:"text-xs",children:"Moderate Risk"})]}),(0,a.jsxs)("div",{className:"p-3 rounded text-center ".concat(m(80)),children:[(0,a.jsx)("p",{className:"font-bold text-red-600",children:"10%"}),(0,a.jsx)("p",{className:"text-xs",children:"High Risk"})]})]})}),(0,a.jsxs)("div",{className:"pt-2 border-t border-border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{children:"Overall Risk Level"}),(0,a.jsx)(l.C,{className:d(t.avgRiskLevel),children:t.avgRiskLevel<30?"LOW":t.avgRiskLevel<60?"MEDIUM":"HIGH"})]}),(0,a.jsx)(eU,{value:t.avgRiskLevel,className:"mt-2"})]})]})})]})]}),(0,a.jsxs)(i.Zb,{className:"hover:shadow-lg transition-shadow duration-300",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2",children:[(0,a.jsx)(su.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Real-time Trends (Last 24 Hours)"})]})}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("div",{className:"h-48 bg-gradient-to-r from-blue-50 via-purple-50 to-green-50 dark:from-blue-950 dark:via-purple-950 dark:to-green-950 rounded-lg border border-border flex items-center justify-center relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)(su.Z,{className:"h-12 w-12 mx-auto text-primary animate-pulse"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Interactive time-series visualization"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),(0,a.jsx)("span",{children:"Tourists"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse delay-100"}),(0,a.jsx)("span",{children:"Incidents"})]}),(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse delay-200"}),(0,a.jsx)("span",{children:"Response Time"})]})]}),(0,a.jsx)("div",{className:"absolute inset-0 opacity-20",children:[...Array(6)].map((e,s)=>(0,a.jsx)("div",{className:"absolute w-2 h-2 bg-primary rounded-full animate-ping",style:{left:"".concat(20+15*s,"%"),top:"".concat(30+20*Math.sin(s),"%"),animationDelay:"".concat(.5*s,"s"),animationDuration:"3s"}},s))})]})})]})]})}function sh(e){let{onBack:s,onLogout:t}=e,[c,d]=(0,n.useState)([{id:"INC-001",touristId:"NVS-12345678",touristName:"John Smith",type:"Medical Emergency",priority:"HIGH",location:{lat:28.6139,lng:77.209},address:"Connaught Place, New Delhi",timestamp:new Date(Date.now()-3e5),status:"Active",phone:"+91 98765 43210",description:"Tourist reported chest pain and difficulty breathing"},{id:"INC-002",touristId:"NVS-87654321",touristName:"Sarah Johnson",type:"Security Threat",priority:"HIGH",location:{lat:28.62,lng:77.21},address:"Red Fort Area, Chandni Chowk",timestamp:new Date(Date.now()-6e5),status:"Responding",phone:"+91 87654 32109",description:"Tourist reported harassment by local individuals"},{id:"INC-003",touristId:"NVS-11223344",touristName:"Mike Chen",type:"Lost/Stranded",priority:"MEDIUM",location:{lat:28.61,lng:77.23},address:"Lodhi Gardens, New Delhi",timestamp:new Date(Date.now()-9e5),status:"Resolved",phone:"+91 76543 21098",description:"Tourist lost in unfamiliar area, requesting directions"}]),[m,u]=(0,n.useState)(null),[x,h]=(0,n.useState)([{id:"LOG-001",timestamp:new Date(Date.now()-18e4),action:"Incident Created",officer:"Officer Sharma",details:"New medical emergency reported for tourist John Smith",incidentId:"INC-001"},{id:"LOG-002",timestamp:new Date(Date.now()-36e4),action:"Response Dispatched",officer:"Officer Patel",details:"Ambulance and police unit dispatched to Connaught Place",incidentId:"INC-001"},{id:"LOG-003",timestamp:new Date(Date.now()-54e4),action:"Case Resolved",officer:"Officer Kumar",details:"Tourist Mike Chen safely guided to destination",incidentId:"INC-003"}]),[p,g]=(0,n.useState)([{id:"NOTIF-001",type:"SOS Alert",message:"New emergency SOS from John Smith at Connaught Place",timestamp:new Date(Date.now()-3e5),read:!1},{id:"NOTIF-002",type:"Anomaly Detection",message:"No movement detected for Sarah Johnson for 3+ hours",timestamp:new Date(Date.now()-6e5),read:!1}]),[j,v]=(0,n.useState)({activeTourists:247,activeIncidents:3,resolvedToday:12,responseTime:"6.2 min"}),[N,w]=(0,n.useState)([{id:"EFIR-001",incidentId:"INC-001",firNumber:"FIR/2024/001",touristName:"John Smith",touristId:"NVS-12345678",incidentType:"Medical Emergency",priority:"HIGH",location:{lat:28.6139,lng:77.209},address:"Connaught Place, New Delhi",description:"Tourist reported chest pain and difficulty breathing",reportedBy:"Tourist Self-Report",officerInCharge:"Officer Sharma",status:"Filed",createdAt:new Date(Date.now()-3e5),updatedAt:new Date(Date.now()-3e5)},{id:"EFIR-002",incidentId:"INC-002",firNumber:"FIR/2024/002",touristName:"Sarah Johnson",touristId:"NVS-87654321",incidentType:"Security Threat",priority:"HIGH",location:{lat:28.62,lng:77.21},address:"Red Fort Area, Chandni Chowk",description:"Tourist reported harassment by local individuals",reportedBy:"SOS Alert",officerInCharge:"Officer Patel",status:"Under Investigation",createdAt:new Date(Date.now()-6e5),updatedAt:new Date(Date.now()-3e5)}]),[S,k]=(0,n.useState)({status:"Draft",officerInCharge:"Officer Sharma",reportedBy:"Manual Entry"}),[C,D]=(0,n.useState)(""),[R,z]=(0,n.useState)("all"),L=(e,s)=>{w(t=>t.map(t=>t.id===e?{...t,status:s,updatedAt:new Date}:t));let t=N.find(s=>s.id===e);if(t){let e={id:"LOG-".concat(Date.now()),timestamp:new Date,action:"e-FIR Status Updated",officer:t.officerInCharge,details:"e-FIR ".concat(t.firNumber," status changed to ").concat(s),incidentId:t.incidentId};h(s=>[e,...s])}},M=e=>{let s={id:"EFIR-".concat(Date.now().toString().slice(-6)),incidentId:e.id,firNumber:"FIR/2024/".concat((N.length+1).toString().padStart(3,"0")),touristName:e.touristName,touristId:e.touristId,incidentType:e.type,priority:e.priority,location:e.location,address:e.address,description:e.description,reportedBy:"SOS Alert",officerInCharge:"Officer Sharma",status:"Filed",createdAt:new Date,updatedAt:new Date};w(e=>[s,...e]);let t=new Blob(["\nELECTRONIC FIRST INFORMATION REPORT (e-FIR)\nNaviSafe Tourist Safety System\n═══════════════════════════════════════════════════════════════\n\nFIR NUMBER: ".concat(s.firNumber,"\ne-FIR ID: ").concat(s.id,"\nDATE & TIME: ").concat(new Date().toLocaleString(),"\nSTATUS: ").concat(s.status,"\n\nINCIDENT DETAILS:\n═══════════════════════════════════════════════════════════════\nIncident ID: ").concat(s.incidentId,"\nType: ").concat(s.incidentType,"\nPriority Level: ").concat(s.priority,"\nCurrent Status: ").concat(s.status,"\n\nTOURIST INFORMATION:\n═══════════════════════════════════════════════════════════════\nFull Name: ").concat(s.touristName,"\nDigital Tourist ID: ").concat(s.touristId,"\nContact Number: ").concat(e.phone||"Not Available","\nNationality: Foreign National\nEmergency Contact: To be updated\n\nLOCATION DETAILS:\n═══════════════════════════════════════════════════════════════\nGPS Coordinates: ").concat(s.location.lat.toFixed(6),", ").concat(s.location.lng.toFixed(6),"\nAddress: ").concat(s.address,"\nIncident Reported Time: ").concat(e.timestamp.toLocaleString(),"\ne-FIR Filed Time: ").concat(s.createdAt.toLocaleString(),"\n\nINCIDENT DESCRIPTION:\n═══════════════════════════════════════════════════════════════\n").concat(s.description,"\n\nRESPONSE ACTIONS TAKEN:\n═══════════════════════════════════════════════════════════════\n- Immediate alert sent to local police station\n- Tourist helpline notified automatically\n- GPS location tracked and monitored in real-time\n- Response team dispatched to incident location\n- Digital evidence preserved in NaviSafe system\n- Blockchain transaction recorded for audit trail\n\nINVESTIGATION DETAILS:\n═══════════════════════════════════════════════════════════════\nReported By: ").concat(s.reportedBy,"\nOfficer In Charge: ").concat(s.officerInCharge,"\nPolice Station: Connaught Place Police Station\nBadge Number: DL-001234\nInvestigation Status: ").concat(s.status,"\n\nDIGITAL VERIFICATION:\n═══════════════════════════════════════════════════════════════\nSystem Generated: Yes\nBlockchain Hash: ").concat(Math.random().toString(36).substring(2,15),"\nDigital Signature: Verified\nTimestamp Verification: Confirmed\n\nCONTACT INFORMATION:\n═══════════════════════════════════════════════════════════════\nNaviSafe Support: navisafe-support@gov.in\nEmergency Helpline: 112\nTourist Helpline: 1363\nPolice Control Room: 100\n\n═══════════════════════════════════════════════════════════════\nThis e-FIR has been automatically generated by the NaviSafe \nSmart Tourist Safety Monitoring & Incident Response System.\n\nGenerated on: ").concat(new Date().toLocaleString(),"\nSystem Version: NaviSafe v2.0\nAuthentication: Digital Signature Verified\n═══════════════════════════════════════════════════════════════\n    ")],{type:"text/plain"}),a=URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download="eFIR-".concat(s.firNumber.replace(/\//g,"-"),".txt"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a);let r={id:"LOG-".concat(Date.now()),timestamp:new Date,action:"e-FIR Generated & Downloaded",officer:s.officerInCharge,details:"e-FIR ".concat(s.firNumber," generated and downloaded for incident ").concat(s.incidentId),incidentId:s.incidentId};return h(e=>[r,...e]),s},O=N.filter(e=>{let s=e.touristName.toLowerCase().includes(C.toLowerCase())||e.firNumber.toLowerCase().includes(C.toLowerCase())||e.incidentType.toLowerCase().includes(C.toLowerCase())||e.touristId.toLowerCase().includes(C.toLowerCase()),t="all"===R||e.status.toLowerCase()===R.toLowerCase();return s&&t}),P=e=>{let s=new Blob(["\nELECTRONIC FIRST INFORMATION REPORT (e-FIR)\nNaviSafe Tourist Safety System\n\nFIR No: ".concat(e.id,"/2024\nDate & Time: ").concat(new Date().toLocaleString(),"\n\nINCIDENT DETAILS:\nIncident ID: ").concat(e.id,"\nType: ").concat(e.type,"\nPriority: ").concat(e.priority,"\nStatus: ").concat(e.status,"\n\nTOURIST INFORMATION:\nName: ").concat(e.touristName,"\nTourist ID: ").concat(e.touristId,"\nPhone: ").concat(e.phone,"\nNationality: Foreign National\n\nLOCATION DETAILS:\nCoordinates: ").concat(e.location.lat.toFixed(6),", ").concat(e.location.lng.toFixed(6),"\nAddress: ").concat(e.address,"\nReported Time: ").concat(e.timestamp.toLocaleString(),"\n\nINCIDENT DESCRIPTION:\n").concat(e.description,"\n\nRESPONSE ACTIONS:\n- Immediate alert sent to local police station\n- Tourist helpline notified\n- GPS location tracked and monitored\n- Response team dispatched\n\nOFFICER IN CHARGE:\nName: Officer Sharma\nBadge No: DL-001234\nStation: Connaught Place Police Station\n\nThis e-FIR has been automatically generated by the NaviSafe system.\nFor queries, contact: navisafe-support@gov.in\n    ")],{type:"text/plain"}),t=URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download="eFIR-".concat(e.id,".txt"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t);let n={id:"LOG-".concat(Date.now()),timestamp:new Date,action:"e-FIR Generated",officer:"Officer Sharma",details:"e-FIR generated for incident ".concat(e.id),incidentId:e.id};h(e=>[n,...e])},F=e=>{g(s=>s.map(s=>s.id===e?{...s,read:!0}:s))},U=p.filter(e=>!e.read).length;return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("div",{className:"bg-foreground text-background p-4 sticky top-0 z-50 animate-in slide-in-from-top-4 duration-500 shadow-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(o.Z,{className:"h-6 w-6 animate-pulse"}),(0,a.jsx)("h1",{className:"text-lg font-semibold",children:"NaviSafe Authority Dashboard"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(r.z,{variant:"ghost",size:"sm",className:"relative hover:scale-110 transition-all duration-200 group",children:[(0,a.jsx)(se.Z,{className:"h-5 w-5 group-hover:animate-bounce"}),U>0&&(0,a.jsx)(l.C,{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 text-xs bg-destructive animate-pulse",children:U})]}),(0,a.jsx)(f,{}),(0,a.jsx)(r.z,{variant:"ghost",onClick:t,className:"text-sm hover:scale-105 transition-all duration-200 hover:bg-red-500/10 hover:text-red-300",children:"Logout"}),(0,a.jsx)(r.z,{variant:"ghost",onClick:s,className:"text-sm hover:scale-105 transition-all duration-200",children:"← Back to Tourist App"})]})]})}),(0,a.jsxs)("div",{className:"p-4 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsx)(i.Zb,{className:"hover:shadow-lg hover:scale-105 transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-100 hover:shadow-primary/20",children:(0,a.jsx)(i.aY,{className:"p-4 text-center",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(Y.Z,{className:"h-8 w-8 mx-auto text-primary hover:scale-110 transition-transform duration-300"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold hover:text-primary transition-colors duration-300",children:j.activeTourists}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Active Tourists"})]})]})})}),(0,a.jsx)(i.Zb,{className:"hover:shadow-lg hover:scale-105 transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-200 hover:shadow-destructive/20",children:(0,a.jsx)(i.aY,{className:"p-4 text-center",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(K.Z,{className:"h-8 w-8 mx-auto text-destructive hover:scale-110 transition-transform duration-300 animate-pulse"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold hover:text-destructive transition-colors duration-300",children:j.activeIncidents}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Active Incidents"})]})]})})}),(0,a.jsx)(i.Zb,{className:"hover:shadow-lg hover:scale-105 transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-300 hover:shadow-accent/20",children:(0,a.jsx)(i.aY,{className:"p-4 text-center",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(ss.Z,{className:"h-8 w-8 mx-auto text-accent hover:scale-110 transition-transform duration-300"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold hover:text-accent transition-colors duration-300",children:j.resolvedToday}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Resolved Today"})]})]})})}),(0,a.jsx)(i.Zb,{className:"hover:shadow-lg hover:scale-105 transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-400 hover:shadow-orange-500/20",children:(0,a.jsx)(i.aY,{className:"p-4 text-center",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(H.Z,{className:"h-8 w-8 mx-auto text-orange-500 hover:scale-110 transition-transform duration-300 animate-spin",style:{animationDuration:"8s"}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold hover:text-orange-500 transition-colors duration-300",children:j.responseTime}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Avg Response"})]})]})})})]}),(0,a.jsxs)(e9.mQ,{defaultValue:"overview",className:"space-y-4 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-500",children:[(0,a.jsxs)(e9.dr,{className:"grid w-full grid-cols-8 hover:shadow-md transition-shadow duration-300",children:[(0,a.jsx)(e9.SP,{value:"overview",className:"hover:scale-105 transition-all duration-200",children:"Overview"}),(0,a.jsx)(e9.SP,{value:"incidents",className:"hover:scale-105 transition-all duration-200",children:"Incidents"}),(0,a.jsx)(e9.SP,{value:"map",className:"hover:scale-105 transition-all duration-200",children:"Live Map"}),(0,a.jsx)(e9.SP,{value:"analytics",className:"hover:scale-105 transition-all duration-200",children:"Analytics"}),(0,a.jsx)(e9.SP,{value:"ai",className:"hover:scale-105 transition-all duration-200",children:"AI System"}),(0,a.jsx)(e9.SP,{value:"blockchain",className:"hover:scale-105 transition-all duration-200",children:"Blockchain"}),(0,a.jsx)(e9.SP,{value:"efir",className:"hover:scale-105 transition-all duration-200",children:"e-FIR"}),(0,a.jsx)(e9.SP,{value:"audit",className:"hover:scale-105 transition-all duration-200",children:"Audit Log"})]}),(0,a.jsx)(e9.nU,{value:"overview",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,a.jsxs)(i.Zb,{className:"hover:shadow-lg transition-all duration-300 animate-in fade-in-0 slide-in-from-left-4 duration-500 delay-600",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2 hover:text-primary transition-colors duration-300",children:[(0,a.jsx)(K.Z,{className:"h-5 w-5 hover:rotate-12 transition-transform duration-300"}),(0,a.jsx)("span",{children:"Recent Incidents"})]})}),(0,a.jsx)(i.aY,{className:"space-y-3",children:c.slice(0,3).map((e,s)=>(0,a.jsxs)("div",{className:"p-3 border border-border rounded-lg space-y-2 hover:bg-muted/30 hover:scale-[1.02] transition-all duration-300 hover:shadow-sm animate-in fade-in-0 slide-in-from-bottom-2 duration-300",style:{animationDelay:"".concat(700+100*s,"ms")},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(l.C,{variant:"HIGH"===e.priority?"destructive":"secondary",className:"HIGH"===e.priority?"animate-pulse":"",children:e.priority}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:e.timestamp.toLocaleTimeString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium hover:text-primary transition-colors duration-300",children:e.type}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.touristName}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.address})]})]},e.id))})]}),(0,a.jsxs)(i.Zb,{className:"hover:shadow-lg transition-all duration-300 animate-in fade-in-0 slide-in-from-right-4 duration-500 delay-600",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2 hover:text-primary transition-colors duration-300",children:[(0,a.jsx)(se.Z,{className:"h-5 w-5 hover:animate-bounce"}),(0,a.jsx)("span",{children:"Live Notifications"})]})}),(0,a.jsx)(i.aY,{className:"space-y-3",children:p.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 border border-border rounded-lg cursor-pointer hover:scale-[1.02] transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-2 duration-300 ".concat(e.read?"":"bg-primary/5 border-primary/20 animate-pulse"),style:{animationDelay:"".concat(700+100*s,"ms")},onClick:()=>F(e.id),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(l.C,{variant:"outline",className:"hover:bg-muted transition-colors duration-300",children:e.type}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:e.timestamp.toLocaleTimeString()})]}),(0,a.jsx)("p",{className:"text-sm mt-2",children:e.message})]},e.id))})]})]})}),(0,a.jsxs)(e9.nU,{value:"incidents",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 animate-in fade-in-0 slide-in-from-top-4 duration-500",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(b.I,{placeholder:"Search incidents...",className:"w-full hover:shadow-md transition-shadow duration-300"})}),(0,a.jsxs)(r.z,{variant:"outline",size:"sm",className:"hover:scale-105 active:scale-95 transition-all duration-200 bg-transparent",children:[(0,a.jsx)(st.Z,{className:"h-4 w-4 mr-2 hover:rotate-12 transition-transform duration-300"}),"Filter"]})]}),(0,a.jsx)("div",{className:"grid gap-4",children:c.map((e,s)=>(0,a.jsx)(i.Zb,{className:"cursor-pointer hover:shadow-lg hover:scale-[1.02] transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500",style:{animationDelay:"".concat(100*s,"ms")},children:(0,a.jsx)(i.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(l.C,{variant:"HIGH"===e.priority?"destructive":"secondary",className:"HIGH"===e.priority?"animate-pulse":"hover:scale-105 transition-transform duration-200",children:e.priority}),(0,a.jsx)(l.C,{variant:"outline",className:"hover:bg-muted transition-colors duration-300",children:e.status}),(0,a.jsx)("span",{className:"text-sm font-mono hover:text-primary transition-colors duration-300",children:e.id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold hover:text-primary transition-colors duration-300",children:e.type}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Tourist: ",e.touristName," (",e.touristId,")"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"hover:bg-muted/30 p-2 rounded transition-colors duration-300",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Location:"}),(0,a.jsx)("p",{children:e.address})]}),(0,a.jsxs)("div",{className:"hover:bg-muted/30 p-2 rounded transition-colors duration-300",children:[(0,a.jsx)("p",{className:"text-muted-foreground",children:"Contact:"}),(0,a.jsx)("p",{children:e.phone})]})]}),(0,a.jsx)("p",{className:"text-sm hover:bg-muted/30 p-2 rounded transition-colors duration-300",children:e.description}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Reported: ",e.timestamp.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2 ml-4",children:[(0,a.jsxs)(r.z,{size:"sm",onClick:()=>u(e),className:"hover:scale-105 active:scale-95 transition-all duration-200",children:[(0,a.jsx)(eP.Z,{className:"h-4 w-4 mr-2 hover:rotate-12 transition-transform duration-300"}),"View"]}),(0,a.jsxs)(r.z,{size:"sm",variant:"outline",onClick:()=>P(e),className:"hover:scale-105 active:scale-95 transition-all duration-200",children:[(0,a.jsx)(ea.Z,{className:"h-4 w-4 mr-2 hover:rotate-12 transition-transform duration-300"}),"e-FIR"]})]})]})})},e.id))})]}),(0,a.jsx)(e9.nU,{value:"map",children:(0,a.jsxs)(i.Zb,{className:"hover:shadow-lg transition-shadow duration-300 animate-in fade-in-0 zoom-in-95 duration-500",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2 hover:text-primary transition-colors duration-300",children:[(0,a.jsx)(_.Z,{className:"h-5 w-5 animate-pulse"}),(0,a.jsx)("span",{children:"Live Tourist Tracking & Risk Zones"})]})}),(0,a.jsx)(i.aY,{children:(0,a.jsx)(si,{incidents:c})})]})}),(0,a.jsxs)(e9.nU,{value:"analytics",className:"space-y-4",children:[(0,a.jsx)(sx,{}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,a.jsx)(sm,{type:"tourist"}),(0,a.jsx)(sm,{type:"risk"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4",children:(0,a.jsx)(sm,{type:"crowd"})})]}),(0,a.jsx)(e9.nU,{value:"ai",children:(0,a.jsx)("div",{className:"animate-in fade-in-0 slide-in-from-bottom-4 duration-500",children:(0,a.jsx)(so,{onAnomalyDetected:e=>{let s={id:"INC-".concat(Date.now().toString().slice(-6)),touristId:e.touristId,touristName:e.touristName,type:"AI Anomaly Detection",priority:e.severity,location:e.location,address:"Lat: ".concat(e.location.lat.toFixed(4),", Lng: ").concat(e.location.lng.toFixed(4)),timestamp:e.timestamp,status:"Active",phone:"+91 XXXXX XXXXX",description:"AI detected: ".concat(e.description," (Confidence: ").concat(e.aiConfidence.toFixed(1),"%)")};d(e=>[s,...e]);let t={id:"NOTIF-".concat(Date.now()),type:"AI Anomaly",message:"AI detected ".concat(e.type.replace("_"," ")," for ").concat(e.touristName),timestamp:new Date,read:!1};g(e=>[t,...e]);let a={id:"LOG-".concat(Date.now()),timestamp:new Date,action:"AI Anomaly Detected",officer:"AI System",details:"".concat(e.description," for tourist ").concat(e.touristName),incidentId:s.id};h(e=>[a,...e]),v(e=>({...e,activeIncidents:e.activeIncidents+1}))}})})}),(0,a.jsx)(e9.nU,{value:"blockchain",children:(0,a.jsx)("div",{className:"animate-in fade-in-0 slide-in-from-bottom-4 duration-500",children:(0,a.jsx)(eI,{})})}),(0,a.jsx)(e9.nU,{value:"efir",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(i.Zb,{className:"hover:shadow-lg transition-shadow duration-300 animate-in fade-in-0 slide-in-from-left-4 duration-500",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 hover:text-primary transition-colors duration-300",children:[(0,a.jsx)(ea.Z,{className:"h-5 w-5 hover:rotate-12 transition-transform duration-300"}),(0,a.jsx)("span",{children:"e-FIR Management"})]}),(0,a.jsxs)(l.C,{variant:"outline",children:[N.length," Total"]})]})}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(b.I,{placeholder:"Search e-FIRs...",value:C,onChange:e=>D(e.target.value),className:"hover:shadow-md transition-shadow duration-300"})}),(0,a.jsxs)(I,{value:R,onValueChange:z,children:[(0,a.jsx)(Z,{className:"w-32",children:(0,a.jsx)(T,{})}),(0,a.jsxs)(A,{children:[(0,a.jsx)(E,{value:"all",children:"All Status"}),(0,a.jsx)(E,{value:"draft",children:"Draft"}),(0,a.jsx)(E,{value:"filed",children:"Filed"}),(0,a.jsx)(E,{value:"under investigation",children:"Under Investigation"}),(0,a.jsx)(E,{value:"closed",children:"Closed"})]})]})]}),(0,a.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:O.map((e,s)=>(0,a.jsx)("div",{className:"p-3 border border-border rounded-lg hover:bg-muted/30 hover:scale-[1.02] transition-all duration-300 hover:shadow-sm animate-in fade-in-0 slide-in-from-bottom-2 duration-300",style:{animationDelay:"".concat(100*s,"ms")},children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l.C,{variant:"Filed"===e.status?"default":"Under Investigation"===e.status?"secondary":"Closed"===e.status?"outline":"destructive",className:"hover:scale-105 transition-transform duration-200",children:e.status}),(0,a.jsx)(l.C,{variant:"outline",className:"font-mono text-xs",children:e.firNumber})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium hover:text-primary transition-colors duration-300",children:e.touristName}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.incidentType}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Created: ",e.createdAt.toLocaleString()]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,a.jsxs)(I,{value:e.status,onValueChange:s=>L(e.id,s),children:[(0,a.jsx)(Z,{className:"w-32 h-8 text-xs",children:(0,a.jsx)(T,{})}),(0,a.jsxs)(A,{children:[(0,a.jsx)(E,{value:"Draft",children:"Draft"}),(0,a.jsx)(E,{value:"Filed",children:"Filed"}),(0,a.jsx)(E,{value:"Under Investigation",children:"Under Investigation"}),(0,a.jsx)(E,{value:"Closed",children:"Closed"})]})]}),(0,a.jsxs)(r.z,{size:"sm",variant:"outline",onClick:()=>M({id:e.incidentId,touristName:e.touristName,touristId:e.touristId,type:e.incidentType,priority:e.priority,location:e.location,address:e.address,description:e.description,timestamp:e.createdAt,phone:"Contact on file"}),className:"hover:scale-105 active:scale-95 transition-all duration-200 text-xs",children:[(0,a.jsx)(sa.Z,{className:"h-3 w-3 mr-1"}),"Download"]})]})]})},e.id))})]})]}),(0,a.jsxs)(i.Zb,{className:"hover:shadow-lg transition-shadow duration-300 animate-in fade-in-0 slide-in-from-right-4 duration-500",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2 hover:text-primary transition-colors duration-300",children:[(0,a.jsx)(B.Z,{className:"h-5 w-5 hover:rotate-90 transition-transform duration-300"}),(0,a.jsx)("span",{children:"Create New e-FIR"})]})}),(0,a.jsxs)(i.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y._,{htmlFor:"touristName",children:"Tourist Name *"}),(0,a.jsx)(b.I,{id:"touristName",value:S.touristName||"",onChange:e=>k(s=>({...s,touristName:e.target.value})),placeholder:"Enter tourist name",className:"hover:shadow-md transition-shadow duration-300"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y._,{htmlFor:"touristId",children:"Tourist ID"}),(0,a.jsx)(b.I,{id:"touristId",value:S.touristId||"",onChange:e=>k(s=>({...s,touristId:e.target.value})),placeholder:"NVS-XXXXXXXX",className:"hover:shadow-md transition-shadow duration-300"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y._,{htmlFor:"incidentType",children:"Incident Type *"}),(0,a.jsxs)(I,{value:S.incidentType||"",onValueChange:e=>k(s=>({...s,incidentType:e})),children:[(0,a.jsx)(Z,{children:(0,a.jsx)(T,{placeholder:"Select incident type"})}),(0,a.jsxs)(A,{children:[(0,a.jsx)(E,{value:"Medical Emergency",children:"Medical Emergency"}),(0,a.jsx)(E,{value:"Security Threat",children:"Security Threat"}),(0,a.jsx)(E,{value:"Lost/Stranded",children:"Lost/Stranded"}),(0,a.jsx)(E,{value:"Theft/Robbery",children:"Theft/Robbery"}),(0,a.jsx)(E,{value:"Harassment",children:"Harassment"}),(0,a.jsx)(E,{value:"Accident",children:"Accident"}),(0,a.jsx)(E,{value:"Other",children:"Other"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y._,{htmlFor:"priority",children:"Priority"}),(0,a.jsxs)(I,{value:S.priority||"MEDIUM",onValueChange:e=>k(s=>({...s,priority:e})),children:[(0,a.jsx)(Z,{children:(0,a.jsx)(T,{})}),(0,a.jsxs)(A,{children:[(0,a.jsx)(E,{value:"LOW",children:"Low"}),(0,a.jsx)(E,{value:"MEDIUM",children:"Medium"}),(0,a.jsx)(E,{value:"HIGH",children:"High"}),(0,a.jsx)(E,{value:"CRITICAL",children:"Critical"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y._,{htmlFor:"address",children:"Location/Address"}),(0,a.jsx)(b.I,{id:"address",value:S.address||"",onChange:e=>k(s=>({...s,address:e.target.value})),placeholder:"Enter incident location",className:"hover:shadow-md transition-shadow duration-300"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y._,{htmlFor:"description",children:"Incident Description *"}),(0,a.jsx)(G,{id:"description",value:S.description||"",onChange:e=>k(s=>({...s,description:e.target.value})),placeholder:"Describe the incident in detail...",className:"min-h-20 hover:shadow-md transition-shadow duration-300"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y._,{htmlFor:"reportedBy",children:"Reported By"}),(0,a.jsxs)(I,{value:S.reportedBy||"Manual Entry",onValueChange:e=>k(s=>({...s,reportedBy:e})),children:[(0,a.jsx)(Z,{children:(0,a.jsx)(T,{})}),(0,a.jsxs)(A,{children:[(0,a.jsx)(E,{value:"Manual Entry",children:"Manual Entry"}),(0,a.jsx)(E,{value:"SOS Alert",children:"SOS Alert"}),(0,a.jsx)(E,{value:"Tourist Self-Report",children:"Tourist Self-Report"}),(0,a.jsx)(E,{value:"Third Party",children:"Third Party"}),(0,a.jsx)(E,{value:"AI Detection",children:"AI Detection"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y._,{htmlFor:"officer",children:"Officer In Charge"}),(0,a.jsxs)(I,{value:S.officerInCharge||"Officer Sharma",onValueChange:e=>k(s=>({...s,officerInCharge:e})),children:[(0,a.jsx)(Z,{children:(0,a.jsx)(T,{})}),(0,a.jsxs)(A,{children:[(0,a.jsx)(E,{value:"Officer Sharma",children:"Officer Sharma"}),(0,a.jsx)(E,{value:"Officer Patel",children:"Officer Patel"}),(0,a.jsx)(E,{value:"Officer Kumar",children:"Officer Kumar"}),(0,a.jsx)(E,{value:"Officer Singh",children:"Officer Singh"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y._,{htmlFor:"additionalDetails",children:"Additional Details"}),(0,a.jsx)(G,{id:"additionalDetails",value:S.additionalDetails||"",onChange:e=>k(s=>({...s,additionalDetails:e.target.value})),placeholder:"Any additional information...",className:"min-h-16 hover:shadow-md transition-shadow duration-300"})]}),(0,a.jsxs)(r.z,{onClick:()=>{if(!S.touristName||!S.incidentType||!S.description){alert("Please fill in all required fields");return}let e={id:"EFIR-".concat(Date.now().toString().slice(-6)),incidentId:S.incidentId||"INC-".concat(Date.now().toString().slice(-6)),firNumber:"FIR/2024/".concat((N.length+1).toString().padStart(3,"0")),touristName:S.touristName,touristId:S.touristId||"NVS-".concat(Math.random().toString().slice(-8)),incidentType:S.incidentType,priority:S.priority||"MEDIUM",location:S.location||{lat:28.6139,lng:77.209},address:S.address||"Location to be determined",description:S.description,reportedBy:S.reportedBy||"Manual Entry",officerInCharge:S.officerInCharge||"Officer Sharma",status:"Draft",createdAt:new Date,updatedAt:new Date,additionalDetails:S.additionalDetails};w(s=>[e,...s]),k({status:"Draft",officerInCharge:"Officer Sharma",reportedBy:"Manual Entry"});let s={id:"LOG-".concat(Date.now()),timestamp:new Date,action:"e-FIR Created",officer:e.officerInCharge,details:"New e-FIR ".concat(e.firNumber," created for ").concat(e.touristName),incidentId:e.incidentId};h(e=>[s,...e])},className:"w-full hover:scale-105 active:scale-95 transition-all duration-200 group",children:[(0,a.jsx)(sn.Z,{className:"h-4 w-4 mr-2 group-hover:animate-pulse"}),"Create e-FIR"]})]})]})]})}),(0,a.jsx)(e9.nU,{value:"audit",className:"space-y-4",children:(0,a.jsxs)(i.Zb,{className:"hover:shadow-lg transition-shadow duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"flex items-center space-x-2 hover:text-primary transition-colors duration-300",children:[(0,a.jsx)(ss.Z,{className:"h-5 w-5 hover:scale-110 transition-transform duration-300"}),(0,a.jsx)("span",{children:"System Audit Log"})]})}),(0,a.jsx)(i.aY,{children:(0,a.jsx)("div",{className:"space-y-3",children:x.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 border border-border rounded-lg hover:bg-muted/30 hover:scale-[1.02] transition-all duration-300 hover:shadow-sm animate-in fade-in-0 slide-in-from-bottom-2 duration-300",style:{animationDelay:"".concat(100*s,"ms")},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(l.C,{variant:"outline",className:"hover:bg-muted transition-colors duration-300",children:e.action}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:e.timestamp.toLocaleString()})]}),(0,a.jsx)("p",{className:"text-sm",children:e.details}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2 text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{className:"hover:text-primary transition-colors duration-300",children:["Officer: ",e.officer]}),e.incidentId&&(0,a.jsxs)("span",{className:"hover:text-primary transition-colors duration-300",children:["Incident: ",e.incidentId]})]})]},e.id))})})]})})]})]})]})}function sp(e){let{onLogin:s,onBack:t}=e,[l,c]=(0,n.useState)(""),[m,u]=(0,n.useState)(""),[x,h]=(0,n.useState)(!1),[p,g]=(0,n.useState)(""),[f,j]=(0,n.useState)(!1),v=async e=>{e.preventDefault(),g(""),j(!0),await new Promise(e=>setTimeout(e,1e3)),"admin"===l&&"admin"===m?(localStorage.setItem("authorityAuth","true"),s()):g("Invalid username or password. Please try admin/admin."),j(!1)};return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:(0,a.jsxs)(i.Zb,{className:"w-full max-w-md animate-in fade-in-0 slide-in-from-bottom-4 duration-500 shadow-2xl border-slate-700 bg-slate-800/50 backdrop-blur-sm",children:[(0,a.jsxs)(i.Ol,{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"p-4 bg-primary/20 rounded-full ring-2 ring-primary/30",children:(0,a.jsx)(o.Z,{className:"h-10 w-10 text-primary animate-pulse"})})}),(0,a.jsx)(i.ll,{className:"text-2xl text-white",children:"Authority Access"}),(0,a.jsx)("p",{className:"text-sm text-slate-300",children:"Please enter your credentials to access the Authority Dashboard"})]}),(0,a.jsxs)(i.aY,{children:[(0,a.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[p&&(0,a.jsx)("div",{className:"p-3 bg-red-950/50 border border-red-500/50 rounded-lg animate-in fade-in-0 slide-in-from-top-2 duration-300",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 text-red-400"}),(0,a.jsx)("p",{className:"text-sm text-red-400",children:p})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(y._,{htmlFor:"username",className:"text-slate-300",children:"Username"}),(0,a.jsx)(b.I,{id:"username",type:"text",placeholder:"Enter username",value:l,onChange:e=>c(e.target.value),className:"bg-slate-700/50 border-slate-600 text-white placeholder:text-slate-400 focus:ring-primary focus:border-primary",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(y._,{htmlFor:"password",className:"text-slate-300",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(b.I,{id:"password",type:x?"text":"password",placeholder:"Enter password",value:m,onChange:e=>u(e.target.value),className:"bg-slate-700/50 border-slate-600 text-white placeholder:text-slate-400 focus:ring-primary focus:border-primary pr-10",required:!0}),(0,a.jsx)(r.z,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8 p-0 text-slate-400 hover:text-white hover:bg-slate-600/50",onClick:()=>h(!x),children:x?(0,a.jsx)(eF.Z,{className:"h-4 w-4"}):(0,a.jsx)(eP.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"pt-2 space-y-3",children:[(0,a.jsx)(r.z,{type:"submit",className:"w-full h-12 text-base font-semibold bg-primary hover:bg-primary/90 focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-slate-800 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",disabled:f,children:f?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Authenticating..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Access Dashboard"]})}),(0,a.jsx)(r.z,{type:"button",variant:"outline",onClick:t,className:"w-full h-12 text-base border-slate-600 text-slate-300 hover:bg-slate-700 hover:text-white hover:border-slate-500 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",disabled:f,children:"← Back to Welcome"})]})]}),(0,a.jsx)("div",{className:"mt-6 p-3 bg-blue-950/30 border border-blue-500/30 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 text-blue-400 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-xs text-blue-300",children:[(0,a.jsx)("p",{className:"font-medium",children:"Demo Credentials:"}),(0,a.jsx)("p",{children:"Username: admin"}),(0,a.jsx)("p",{children:"Password: admin"})]})]})})]})]})})}function sg(){let[e,s]=(0,n.useState)("welcome"),[t,i]=(0,n.useState)(null),[l,c]=(0,n.useState)(null),[d,m]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{m("true"===localStorage.getItem("authorityAuth"))},[]),(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:["authority"!==e&&"authorityLogin"!==e&&(0,a.jsx)("div",{className:"fixed top-4 left-4 z-50",children:(0,a.jsxs)(r.z,{variant:"outline",size:"sm",onClick:()=>{d?s("authority"):s("authorityLogin")},className:"bg-background/80 backdrop-blur-sm hover:scale-110 hover:shadow-lg transition-all duration-300 animate-pulse border-primary/50 hover:border-primary group",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2 group-hover:rotate-12 transition-transform duration-300"}),"Authority Dashboard"]})}),"welcome"===e&&(0,a.jsx)(v,{onGetStarted:()=>{s("userInfo")}}),"userInfo"===e&&(0,a.jsx)(F,{onSubmit:e=>{i(e),s("tripDetails")}}),"tripDetails"===e&&(0,a.jsx)(W,{onSubmit:e=>{c(e),s("confirmation")},onBack:()=>{s("userInfo")}}),"confirmation"===e&&(0,a.jsx)(J,{onContinue:()=>{s("dashboard")},userInfo:t,tripDetails:l}),"dashboard"===e&&(0,a.jsx)(e7,{userInfo:t,tripDetails:l}),"authorityLogin"===e&&(0,a.jsx)(sp,{onLogin:()=>{m(!0),s("authority")},onBack:()=>{s("welcome")}}),"authority"===e&&(0,a.jsx)(sh,{onBack:()=>{s("welcome")},onLogout:()=>{localStorage.removeItem("authorityAuth"),m(!1),s("welcome")}})]})}}},function(e){e.O(0,[814,551,588,135,971,117,744],function(){return e(e.s=5837)}),_N_E=e.O()}]);