(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},1282:e=>{"use strict";e.exports=require("child_process")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},6005:e=>{"use strict";e.exports=require("node:crypto")},1041:e=>{"use strict";e.exports=require("node:url")},7032:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(8646),s(6418),s(996);var r=s(170),a=s(5002),n=s(3876),i=s.n(n),o=s(6299),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8646)),"/workspaces/NaviSafe/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,6418)),"/workspaces/NaviSafe/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,996,23)),"next/dist/client/components/not-found-error"]}],d=["/workspaces/NaviSafe/app/page.tsx"],u="/page",h={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3561:(e,t,s)=>{Promise.resolve().then(s.bind(s,1604))},1604:(e,t,s)=>{"use strict";let r,a,n;s.r(t),s.d(t,{default:()=>lM});var i,o,l,c,d,u,h,m,p={};s.r(p),s.d(p,{Decoder:()=>iy,Encoder:()=>ig,PacketType:()=>m,protocol:()=>ix});var f=s(7247),x=s(8964),g=s(8053),v=s(7757),y=s(1365),b=s(2502),j=s(7792),w=s(290),N=s(2348),_=s(6323);let k=(0,_.Z)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);var C=s(2752);let S=(0,_.Z)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),E=(0,_.Z)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);var T=s(7797);function O(){let{theme:e,setTheme:t}=(0,T.F)(),[s,r]=x.useState(!1);return(x.useEffect(()=>{r(!0)},[]),s)?(0,f.jsxs)(g.z,{variant:"outline",size:"icon",onClick:()=>t("dark"===e?"light":"dark"),className:"h-9 w-9 bg-background border-border hover:bg-accent hover:text-accent-foreground focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","aria-label":"Toggle theme",children:[f.jsx(S,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0 text-foreground"}),f.jsx(E,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100 text-foreground"})]}):f.jsx(g.z,{variant:"outline",size:"icon",className:"h-9 w-9 bg-background border-border hover:bg-accent hover:text-accent-foreground","aria-label":"Toggle theme",children:f.jsx(S,{className:"h-4 w-4 text-foreground"})})}var I=s(1602);function A({onGetStarted:e}){let{connected:t,connecting:s,publicKey:r,balance:a,error:n,connectWallet:i,disconnectWallet:o,isWalletAvailable:l}=(0,I.K)(),[c,d]=(0,x.useState)(!1),u=async()=>{await i()&&d(!0)};return(0,f.jsxs)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-primary/5 to-accent/5",children:[f.jsx("div",{className:"absolute top-4 right-4 animate-in fade-in-0 slide-in-from-top-2 duration-700 delay-500",children:f.jsx(O,{})}),f.jsx(v.Zb,{className:"w-full max-w-md animate-in fade-in-0 slide-in-from-bottom-8 duration-700 hover:shadow-2xl hover:scale-[1.02] transition-all duration-300 hover:shadow-primary/10",children:(0,f.jsxs)(v.aY,{className:"p-8 text-center space-y-6",children:[f.jsx("div",{className:"flex justify-center animate-in fade-in-0 zoom-in-50 duration-700 delay-200",children:f.jsx("div",{className:"p-4 bg-primary/10 rounded-full hover:bg-primary/20 transition-all duration-300 hover:scale-110 hover:rotate-3 group",children:f.jsx(j.Z,{className:"h-12 w-12 text-primary group-hover:text-primary/80 transition-colors duration-300"})})}),(0,f.jsxs)("div",{className:"space-y-2 animate-in fade-in-0 slide-in-from-bottom-4 duration-700 delay-300",children:[f.jsx("h1",{className:"text-3xl font-bold text-foreground hover:text-primary transition-colors duration-300 cursor-default",children:"NaviSafe"}),f.jsx("p",{className:"text-lg text-muted-foreground font-medium animate-pulse",children:"Navigate Safely, Travel Freely"})]}),(0,f.jsxs)("div",{className:"space-y-4 animate-in fade-in-0 slide-in-from-bottom-4 duration-700 delay-400",children:[f.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Your personal safety companion for secure travel experiences. Get real-time protection, emergency assistance, and peace of mind wherever you go."}),(0,f.jsxs)("div",{className:"p-3 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-950/30 dark:to-blue-950/30 rounded-lg border border-purple-200 dark:border-purple-800",children:[(0,f.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[f.jsx(j.Z,{className:"h-4 w-4 text-purple-600"}),f.jsx("span",{className:"text-sm font-medium text-purple-900 dark:text-purple-100",children:"Blockchain-Secured Registration"})]}),f.jsx("p",{className:"text-xs text-purple-800 dark:text-purple-200",children:"Your data is securely stored on Solana blockchain for maximum privacy and verification"})]}),t?(0,f.jsxs)("div",{className:"space-y-3",children:[(0,f.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-950/30 rounded-lg border border-green-200 dark:border-green-800",children:[(0,f.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[f.jsx(C.Z,{className:"h-5 w-5 text-green-600"}),f.jsx("span",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Wallet Connected"})]}),c&&(0,f.jsxs)("div",{className:"space-y-2 text-xs text-green-700 dark:text-green-300",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[f.jsx("span",{children:"Address:"}),f.jsx(y.C,{variant:"outline",className:"font-mono",children:`${r.slice(0,4)}...${r.slice(-4)}`})]}),null!==a&&(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[f.jsx("span",{children:"Balance:"}),(0,f.jsxs)(y.C,{variant:"outline",children:[a.toFixed(4)," SOL"]})]}),f.jsx("div",{className:"flex items-center justify-center pt-2",children:f.jsx(y.C,{className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:"Devnet Connected"})})]})]}),f.jsx(g.z,{onClick:()=>{t&&e()},className:"w-full h-12 text-base font-semibold hover:scale-105 active:scale-95 transition-all duration-200 hover:shadow-lg hover:shadow-primary/25 group",size:"lg",children:f.jsx("span",{className:"group-hover:animate-pulse",children:"Continue to Registration"})}),f.jsx(g.z,{onClick:o,variant:"outline",size:"sm",className:"w-full text-sm bg-transparent",children:"Disconnect Wallet"})]}):(0,f.jsxs)("div",{className:"space-y-3",children:[l?(0,f.jsxs)(g.z,{onClick:u,disabled:s,className:"w-full h-12 text-base font-semibold hover:scale-105 active:scale-95 transition-all duration-200 hover:shadow-lg hover:shadow-primary/25 group bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",size:"lg",children:[f.jsx(k,{className:"h-5 w-5 mr-2 group-hover:animate-pulse"}),f.jsx("span",{className:"group-hover:animate-pulse",children:s?"Connecting...":"Connect Wallet"})]}):(0,f.jsxs)(b.bZ,{className:"text-left",children:[f.jsx(w.Z,{className:"h-4 w-4"}),(0,f.jsxs)(b.X,{className:"text-sm",children:["No Solana wallet detected. Please install"," ",(0,f.jsxs)("a",{href:"https://phantom.app/",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline hover:text-primary/80 inline-flex items-center",children:["Phantom ",f.jsx(N.Z,{className:"h-3 w-3 ml-1"})]})," ","or"," ",(0,f.jsxs)("a",{href:"https://solflare.com/",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline hover:text-primary/80 inline-flex items-center",children:["Solflare ",f.jsx(N.Z,{className:"h-3 w-3 ml-1"})]})," ","wallet to continue."]})]}),n&&(0,f.jsxs)(b.bZ,{variant:"destructive",className:"text-left",children:[f.jsx(w.Z,{className:"h-4 w-4"}),f.jsx(b.X,{className:"text-sm",children:n})]})]})]}),f.jsx("div",{className:"pt-4 border-t border-border animate-in fade-in-0 duration-700 delay-600",children:(0,f.jsxs)("p",{className:"text-xs text-muted-foreground",children:["By continuing, I accept and agree to NaviSafe"," ",f.jsx("span",{className:"text-primary underline cursor-pointer hover:text-primary/80 transition-colors duration-200 hover:underline-offset-4",children:"Terms of Use"})," ","&"," ",f.jsx("span",{className:"text-primary underline cursor-pointer hover:text-primary/80 transition-colors duration-200 hover:underline-offset-4",children:"Privacy Policy"})]})})]})})]})}(function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let s of e)t[s]=s;return t},e.getValidEnumValues=t=>{let s=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),r={};for(let e of s)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.push(s);return t},e.find=(e,t)=>{for(let s of e)if(t(s))return s},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t})(o||(o={})),(l||(l={})).mergeShapes=(e,t)=>({...e,...t});let R=o.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),D=e=>{switch(typeof e){case"undefined":return R.undefined;case"string":return R.string;case"number":return Number.isNaN(e)?R.nan:R.number;case"boolean":return R.boolean;case"function":return R.function;case"bigint":return R.bigint;case"symbol":return R.symbol;case"object":if(Array.isArray(e))return R.array;if(null===e)return R.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return R.promise;if("undefined"!=typeof Map&&e instanceof Map)return R.map;if("undefined"!=typeof Set&&e instanceof Set)return R.set;if("undefined"!=typeof Date&&e instanceof Date)return R.date;return R.object;default:return R.unknown}},L=o.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class P extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},s={_errors:[]},r=e=>{for(let a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(r);else if("invalid_return_type"===a.code)r(a.returnTypeError);else if("invalid_arguments"===a.code)r(a.argumentsError);else if(0===a.path.length)s._errors.push(t(a));else{let e=s,r=0;for(;r<a.path.length;){let s=a.path[r];r===a.path.length-1?(e[s]=e[s]||{_errors:[]},e[s]._errors.push(t(a))):e[s]=e[s]||{_errors:[]},e=e[s],r++}}};return r(this),s}static assert(e){if(!(e instanceof P))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,o.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},s=[];for(let r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):s.push(e(r));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}P.create=e=>new P(e);let F=(e,t)=>{let s;switch(e.code){case L.invalid_type:s=e.received===R.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case L.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(e.expected,o.jsonStringifyReplacer)}`;break;case L.unrecognized_keys:s=`Unrecognized key(s) in object: ${o.joinValues(e.keys,", ")}`;break;case L.invalid_union:s="Invalid input";break;case L.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${o.joinValues(e.options)}`;break;case L.invalid_enum_value:s=`Invalid enum value. Expected ${o.joinValues(e.options)}, received '${e.received}'`;break;case L.invalid_arguments:s="Invalid function arguments";break;case L.invalid_return_type:s="Invalid function return type";break;case L.invalid_date:s="Invalid date";break;case L.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(s=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(s=`${s} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?s=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?s=`Invalid input: must end with "${e.validation.endsWith}"`:o.assertNever(e.validation):s="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case L.too_small:s="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case L.too_big:s="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case L.custom:s="Invalid input";break;case L.invalid_intersection_types:s="Intersection results could not be merged";break;case L.not_multiple_of:s=`Number must be a multiple of ${e.multipleOf}`;break;case L.not_finite:s="Number must be finite";break;default:s=t.defaultError,o.assertNever(e)}return{message:s}},M=e=>{let{data:t,path:s,errorMaps:r,issueData:a}=e,n=[...s,...a.path||[]],i={...a,path:n};if(void 0!==a.message)return{...a,path:n,message:a.message};let o="";for(let e of r.filter(e=>!!e).slice().reverse())o=e(i,{data:t,defaultError:o}).message;return{...a,path:n,message:o}};function Z(e,t){let s=M({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,F,F==F?void 0:F].filter(e=>!!e)});e.common.issues.push(s)}class z{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let s=[];for(let r of t){if("aborted"===r.status)return $;"dirty"===r.status&&e.dirty(),s.push(r.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){let s=[];for(let e of t){let t=await e.key,r=await e.value;s.push({key:t,value:r})}return z.mergeObjectSync(e,s)}static mergeObjectSync(e,t){let s={};for(let r of t){let{key:t,value:a}=r;if("aborted"===t.status||"aborted"===a.status)return $;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==a.value||r.alwaysSet)&&(s[t.value]=a.value)}return{status:e.value,value:s}}}let $=Object.freeze({status:"aborted"}),B=e=>({status:"dirty",value:e}),U=e=>({status:"valid",value:e}),W=e=>"aborted"===e.status,V=e=>"dirty"===e.status,q=e=>"valid"===e.status,H=e=>"undefined"!=typeof Promise&&e instanceof Promise;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(c||(c={}));class G{constructor(e,t,s,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let Y=(e,t)=>{if(q(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new P(e.common.issues);return this._error=t,this._error}}};function X(e){if(!e)return{};let{errorMap:t,invalid_type_error:s,required_error:r,description:a}=e;if(t&&(s||r))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(t,a)=>{let{message:n}=e;return"invalid_enum_value"===t.code?{message:n??a.defaultError}:void 0===a.data?{message:n??r??a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:n??s??a.defaultError}},description:a}}class K{get description(){return this._def.description}_getType(e){return D(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:D(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new z,ctx:{common:e.parent.common,data:e.data,parsedType:D(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(H(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){let s={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:D(e)},r=this._parseSync({data:e,path:s.path,parent:s});return Y(s,r)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:D(e)};if(!this["~standard"].async)try{let s=this._parseSync({data:e,path:[],parent:t});return q(s)?{value:s.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>q(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){let s={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:D(e)},r=this._parse({data:e,path:s.path,parent:s});return Y(s,await (H(r)?r:Promise.resolve(r)))}refine(e,t){let s=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,r)=>{let a=e(t),n=()=>r.addIssue({code:L.custom,...s(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then(e=>!!e||(n(),!1)):!!a||(n(),!1)})}refinement(e,t){return this._refinement((s,r)=>!!e(s)||(r.addIssue("function"==typeof t?t(s,r):t),!1))}_refinement(e){return new eW({schema:this,typeName:d.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return eV.create(this,this._def)}nullable(){return eq.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return eS.create(this)}promise(){return eU.create(this,this._def)}or(e){return eT.create([this,e],this._def)}and(e){return eA.create(this,e,this._def)}transform(e){return new eW({...X(this._def),schema:this,typeName:d.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new eH({...X(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:d.ZodDefault})}brand(){return new eX({typeName:d.ZodBranded,type:this,...X(this._def)})}catch(e){return new eG({...X(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:d.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return eK.create(this,e)}readonly(){return eJ.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let J=/^c[^\s-]{8,}$/i,Q=/^[0-9a-z]+$/,ee=/^[0-9A-HJKMNP-TV-Z]{26}$/i,et=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,es=/^[a-z0-9_-]{21}$/i,er=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ea=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,en=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ei=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,eo=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,el=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ec=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ed=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,eu=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,eh="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",em=RegExp(`^${eh}$`);function ep(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let s=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${s}`}class ef extends K{_parse(e){var t,s,a,n;let i;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==R.string){let t=this._getOrReturnCtx(e);return Z(t,{code:L.invalid_type,expected:R.string,received:t.parsedType}),$}let l=new z;for(let c of this._def.checks)if("min"===c.kind)e.data.length<c.value&&(Z(i=this._getOrReturnCtx(e,i),{code:L.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),l.dirty());else if("max"===c.kind)e.data.length>c.value&&(Z(i=this._getOrReturnCtx(e,i),{code:L.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),l.dirty());else if("length"===c.kind){let t=e.data.length>c.value,s=e.data.length<c.value;(t||s)&&(i=this._getOrReturnCtx(e,i),t?Z(i,{code:L.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}):s&&Z(i,{code:L.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}),l.dirty())}else if("email"===c.kind)en.test(e.data)||(Z(i=this._getOrReturnCtx(e,i),{validation:"email",code:L.invalid_string,message:c.message}),l.dirty());else if("emoji"===c.kind)r||(r=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),r.test(e.data)||(Z(i=this._getOrReturnCtx(e,i),{validation:"emoji",code:L.invalid_string,message:c.message}),l.dirty());else if("uuid"===c.kind)et.test(e.data)||(Z(i=this._getOrReturnCtx(e,i),{validation:"uuid",code:L.invalid_string,message:c.message}),l.dirty());else if("nanoid"===c.kind)es.test(e.data)||(Z(i=this._getOrReturnCtx(e,i),{validation:"nanoid",code:L.invalid_string,message:c.message}),l.dirty());else if("cuid"===c.kind)J.test(e.data)||(Z(i=this._getOrReturnCtx(e,i),{validation:"cuid",code:L.invalid_string,message:c.message}),l.dirty());else if("cuid2"===c.kind)Q.test(e.data)||(Z(i=this._getOrReturnCtx(e,i),{validation:"cuid2",code:L.invalid_string,message:c.message}),l.dirty());else if("ulid"===c.kind)ee.test(e.data)||(Z(i=this._getOrReturnCtx(e,i),{validation:"ulid",code:L.invalid_string,message:c.message}),l.dirty());else if("url"===c.kind)try{new URL(e.data)}catch{Z(i=this._getOrReturnCtx(e,i),{validation:"url",code:L.invalid_string,message:c.message}),l.dirty()}else"regex"===c.kind?(c.regex.lastIndex=0,c.regex.test(e.data)||(Z(i=this._getOrReturnCtx(e,i),{validation:"regex",code:L.invalid_string,message:c.message}),l.dirty())):"trim"===c.kind?e.data=e.data.trim():"includes"===c.kind?e.data.includes(c.value,c.position)||(Z(i=this._getOrReturnCtx(e,i),{code:L.invalid_string,validation:{includes:c.value,position:c.position},message:c.message}),l.dirty()):"toLowerCase"===c.kind?e.data=e.data.toLowerCase():"toUpperCase"===c.kind?e.data=e.data.toUpperCase():"startsWith"===c.kind?e.data.startsWith(c.value)||(Z(i=this._getOrReturnCtx(e,i),{code:L.invalid_string,validation:{startsWith:c.value},message:c.message}),l.dirty()):"endsWith"===c.kind?e.data.endsWith(c.value)||(Z(i=this._getOrReturnCtx(e,i),{code:L.invalid_string,validation:{endsWith:c.value},message:c.message}),l.dirty()):"datetime"===c.kind?(function(e){let t=`${eh}T${ep(e)}`,s=[];return s.push(e.local?"Z?":"Z"),e.offset&&s.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${s.join("|")})`,RegExp(`^${t}$`)})(c).test(e.data)||(Z(i=this._getOrReturnCtx(e,i),{code:L.invalid_string,validation:"datetime",message:c.message}),l.dirty()):"date"===c.kind?em.test(e.data)||(Z(i=this._getOrReturnCtx(e,i),{code:L.invalid_string,validation:"date",message:c.message}),l.dirty()):"time"===c.kind?RegExp(`^${ep(c)}$`).test(e.data)||(Z(i=this._getOrReturnCtx(e,i),{code:L.invalid_string,validation:"time",message:c.message}),l.dirty()):"duration"===c.kind?ea.test(e.data)||(Z(i=this._getOrReturnCtx(e,i),{validation:"duration",code:L.invalid_string,message:c.message}),l.dirty()):"ip"===c.kind?(t=e.data,("v4"===(s=c.version)||!s)&&ei.test(t)||("v6"===s||!s)&&el.test(t)||(Z(i=this._getOrReturnCtx(e,i),{validation:"ip",code:L.invalid_string,message:c.message}),l.dirty())):"jwt"===c.kind?!function(e,t){if(!er.test(e))return!1;try{let[s]=e.split("."),r=s.replace(/-/g,"+").replace(/_/g,"/").padEnd(s.length+(4-s.length%4)%4,"="),a=JSON.parse(atob(r));if("object"!=typeof a||null===a||"typ"in a&&a?.typ!=="JWT"||!a.alg||t&&a.alg!==t)return!1;return!0}catch{return!1}}(e.data,c.alg)&&(Z(i=this._getOrReturnCtx(e,i),{validation:"jwt",code:L.invalid_string,message:c.message}),l.dirty()):"cidr"===c.kind?(a=e.data,("v4"===(n=c.version)||!n)&&eo.test(a)||("v6"===n||!n)&&ec.test(a)||(Z(i=this._getOrReturnCtx(e,i),{validation:"cidr",code:L.invalid_string,message:c.message}),l.dirty())):"base64"===c.kind?ed.test(e.data)||(Z(i=this._getOrReturnCtx(e,i),{validation:"base64",code:L.invalid_string,message:c.message}),l.dirty()):"base64url"===c.kind?eu.test(e.data)||(Z(i=this._getOrReturnCtx(e,i),{validation:"base64url",code:L.invalid_string,message:c.message}),l.dirty()):o.assertNever(c);return{status:l.value,value:e.data}}_regex(e,t,s){return this.refinement(t=>e.test(t),{validation:t,code:L.invalid_string,...c.errToObj(s)})}_addCheck(e){return new ef({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...c.errToObj(e)})}url(e){return this._addCheck({kind:"url",...c.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...c.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...c.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...c.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...c.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...c.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...c.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...c.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...c.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...c.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...c.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...c.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...c.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...c.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...c.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...c.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...c.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...c.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...c.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...c.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...c.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...c.errToObj(t)})}nonempty(e){return this.min(1,c.errToObj(e))}trim(){return new ef({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ef({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ef({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ef.create=e=>new ef({checks:[],typeName:d.ZodString,coerce:e?.coerce??!1,...X(e)});class ex extends K{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==R.number){let t=this._getOrReturnCtx(e);return Z(t,{code:L.invalid_type,expected:R.number,received:t.parsedType}),$}let s=new z;for(let r of this._def.checks)"int"===r.kind?o.isInteger(e.data)||(Z(t=this._getOrReturnCtx(e,t),{code:L.invalid_type,expected:"integer",received:"float",message:r.message}),s.dirty()):"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(Z(t=this._getOrReturnCtx(e,t),{code:L.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),s.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(Z(t=this._getOrReturnCtx(e,t),{code:L.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),s.dirty()):"multipleOf"===r.kind?0!==function(e,t){let s=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=s>r?s:r;return Number.parseInt(e.toFixed(a).replace(".",""))%Number.parseInt(t.toFixed(a).replace(".",""))/10**a}(e.data,r.value)&&(Z(t=this._getOrReturnCtx(e,t),{code:L.not_multiple_of,multipleOf:r.value,message:r.message}),s.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(Z(t=this._getOrReturnCtx(e,t),{code:L.not_finite,message:r.message}),s.dirty()):o.assertNever(r);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,c.toString(t))}gt(e,t){return this.setLimit("min",e,!1,c.toString(t))}lte(e,t){return this.setLimit("max",e,!0,c.toString(t))}lt(e,t){return this.setLimit("max",e,!1,c.toString(t))}setLimit(e,t,s,r){return new ex({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:c.toString(r)}]})}_addCheck(e){return new ex({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:c.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:c.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:c.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:c.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:c.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:c.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:c.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:c.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:c.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&o.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let s of this._def.checks){if("finite"===s.kind||"int"===s.kind||"multipleOf"===s.kind)return!0;"min"===s.kind?(null===t||s.value>t)&&(t=s.value):"max"===s.kind&&(null===e||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ex.create=e=>new ex({checks:[],typeName:d.ZodNumber,coerce:e?.coerce||!1,...X(e)});class eg extends K{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==R.bigint)return this._getInvalidInput(e);let s=new z;for(let r of this._def.checks)"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(Z(t=this._getOrReturnCtx(e,t),{code:L.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),s.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(Z(t=this._getOrReturnCtx(e,t),{code:L.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),s.dirty()):"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(Z(t=this._getOrReturnCtx(e,t),{code:L.not_multiple_of,multipleOf:r.value,message:r.message}),s.dirty()):o.assertNever(r);return{status:s.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return Z(t,{code:L.invalid_type,expected:R.bigint,received:t.parsedType}),$}gte(e,t){return this.setLimit("min",e,!0,c.toString(t))}gt(e,t){return this.setLimit("min",e,!1,c.toString(t))}lte(e,t){return this.setLimit("max",e,!0,c.toString(t))}lt(e,t){return this.setLimit("max",e,!1,c.toString(t))}setLimit(e,t,s,r){return new eg({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:c.toString(r)}]})}_addCheck(e){return new eg({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:c.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:c.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:c.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:c.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:c.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}eg.create=e=>new eg({checks:[],typeName:d.ZodBigInt,coerce:e?.coerce??!1,...X(e)});class ev extends K{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==R.boolean){let t=this._getOrReturnCtx(e);return Z(t,{code:L.invalid_type,expected:R.boolean,received:t.parsedType}),$}return U(e.data)}}ev.create=e=>new ev({typeName:d.ZodBoolean,coerce:e?.coerce||!1,...X(e)});class ey extends K{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==R.date){let t=this._getOrReturnCtx(e);return Z(t,{code:L.invalid_type,expected:R.date,received:t.parsedType}),$}if(Number.isNaN(e.data.getTime()))return Z(this._getOrReturnCtx(e),{code:L.invalid_date}),$;let s=new z;for(let r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(Z(t=this._getOrReturnCtx(e,t),{code:L.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),s.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(Z(t=this._getOrReturnCtx(e,t),{code:L.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),s.dirty()):o.assertNever(r);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ey({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:c.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:c.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}ey.create=e=>new ey({checks:[],coerce:e?.coerce||!1,typeName:d.ZodDate,...X(e)});class eb extends K{_parse(e){if(this._getType(e)!==R.symbol){let t=this._getOrReturnCtx(e);return Z(t,{code:L.invalid_type,expected:R.symbol,received:t.parsedType}),$}return U(e.data)}}eb.create=e=>new eb({typeName:d.ZodSymbol,...X(e)});class ej extends K{_parse(e){if(this._getType(e)!==R.undefined){let t=this._getOrReturnCtx(e);return Z(t,{code:L.invalid_type,expected:R.undefined,received:t.parsedType}),$}return U(e.data)}}ej.create=e=>new ej({typeName:d.ZodUndefined,...X(e)});class ew extends K{_parse(e){if(this._getType(e)!==R.null){let t=this._getOrReturnCtx(e);return Z(t,{code:L.invalid_type,expected:R.null,received:t.parsedType}),$}return U(e.data)}}ew.create=e=>new ew({typeName:d.ZodNull,...X(e)});class eN extends K{constructor(){super(...arguments),this._any=!0}_parse(e){return U(e.data)}}eN.create=e=>new eN({typeName:d.ZodAny,...X(e)});class e_ extends K{constructor(){super(...arguments),this._unknown=!0}_parse(e){return U(e.data)}}e_.create=e=>new e_({typeName:d.ZodUnknown,...X(e)});class ek extends K{_parse(e){let t=this._getOrReturnCtx(e);return Z(t,{code:L.invalid_type,expected:R.never,received:t.parsedType}),$}}ek.create=e=>new ek({typeName:d.ZodNever,...X(e)});class eC extends K{_parse(e){if(this._getType(e)!==R.undefined){let t=this._getOrReturnCtx(e);return Z(t,{code:L.invalid_type,expected:R.void,received:t.parsedType}),$}return U(e.data)}}eC.create=e=>new eC({typeName:d.ZodVoid,...X(e)});class eS extends K{_parse(e){let{ctx:t,status:s}=this._processInputParams(e),r=this._def;if(t.parsedType!==R.array)return Z(t,{code:L.invalid_type,expected:R.array,received:t.parsedType}),$;if(null!==r.exactLength){let e=t.data.length>r.exactLength.value,a=t.data.length<r.exactLength.value;(e||a)&&(Z(t,{code:e?L.too_big:L.too_small,minimum:a?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(Z(t,{code:L.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(Z(t,{code:L.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((e,s)=>r.type._parseAsync(new G(t,e,t.path,s)))).then(e=>z.mergeArray(s,e));let a=[...t.data].map((e,s)=>r.type._parseSync(new G(t,e,t.path,s)));return z.mergeArray(s,a)}get element(){return this._def.type}min(e,t){return new eS({...this._def,minLength:{value:e,message:c.toString(t)}})}max(e,t){return new eS({...this._def,maxLength:{value:e,message:c.toString(t)}})}length(e,t){return new eS({...this._def,exactLength:{value:e,message:c.toString(t)}})}nonempty(e){return this.min(1,e)}}eS.create=(e,t)=>new eS({type:e,minLength:null,maxLength:null,exactLength:null,typeName:d.ZodArray,...X(t)});class eE extends K{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=o.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==R.object){let t=this._getOrReturnCtx(e);return Z(t,{code:L.invalid_type,expected:R.object,received:t.parsedType}),$}let{status:t,ctx:s}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),n=[];if(!(this._def.catchall instanceof ek&&"strip"===this._def.unknownKeys))for(let e in s.data)a.includes(e)||n.push(e);let i=[];for(let e of a){let t=r[e],a=s.data[e];i.push({key:{status:"valid",value:e},value:t._parse(new G(s,a,s.path,e)),alwaysSet:e in s.data})}if(this._def.catchall instanceof ek){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of n)i.push({key:{status:"valid",value:e},value:{status:"valid",value:s.data[e]}});else if("strict"===e)n.length>0&&(Z(s,{code:L.unrecognized_keys,keys:n}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of n){let r=s.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new G(s,r,s.path,t)),alwaysSet:t in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of i){let s=await t.key,r=await t.value;e.push({key:s,value:r,alwaysSet:t.alwaysSet})}return e}).then(e=>z.mergeObjectSync(t,e)):z.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return c.errToObj,new eE({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,s)=>{let r=this._def.errorMap?.(t,s).message??s.defaultError;return"unrecognized_keys"===t.code?{message:c.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new eE({...this._def,unknownKeys:"strip"})}passthrough(){return new eE({...this._def,unknownKeys:"passthrough"})}extend(e){return new eE({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new eE({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:d.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new eE({...this._def,catchall:e})}pick(e){let t={};for(let s of o.objectKeys(e))e[s]&&this.shape[s]&&(t[s]=this.shape[s]);return new eE({...this._def,shape:()=>t})}omit(e){let t={};for(let s of o.objectKeys(this.shape))e[s]||(t[s]=this.shape[s]);return new eE({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof eE){let s={};for(let r in t.shape){let a=t.shape[r];s[r]=eV.create(e(a))}return new eE({...t._def,shape:()=>s})}return t instanceof eS?new eS({...t._def,type:e(t.element)}):t instanceof eV?eV.create(e(t.unwrap())):t instanceof eq?eq.create(e(t.unwrap())):t instanceof eR?eR.create(t.items.map(t=>e(t))):t}(this)}partial(e){let t={};for(let s of o.objectKeys(this.shape)){let r=this.shape[s];e&&!e[s]?t[s]=r:t[s]=r.optional()}return new eE({...this._def,shape:()=>t})}required(e){let t={};for(let s of o.objectKeys(this.shape))if(e&&!e[s])t[s]=this.shape[s];else{let e=this.shape[s];for(;e instanceof eV;)e=e._def.innerType;t[s]=e}return new eE({...this._def,shape:()=>t})}keyof(){return ez(o.objectKeys(this.shape))}}eE.create=(e,t)=>new eE({shape:()=>e,unknownKeys:"strip",catchall:ek.create(),typeName:d.ZodObject,...X(t)}),eE.strictCreate=(e,t)=>new eE({shape:()=>e,unknownKeys:"strict",catchall:ek.create(),typeName:d.ZodObject,...X(t)}),eE.lazycreate=(e,t)=>new eE({shape:e,unknownKeys:"strip",catchall:ek.create(),typeName:d.ZodObject,...X(t)});class eT extends K{_parse(e){let{ctx:t}=this._processInputParams(e),s=this._def.options;if(t.common.async)return Promise.all(s.map(async e=>{let s={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:s}),ctx:s}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let s of e)if("dirty"===s.result.status)return t.common.issues.push(...s.ctx.common.issues),s.result;let s=e.map(e=>new P(e.ctx.common.issues));return Z(t,{code:L.invalid_union,unionErrors:s}),$});{let e;let r=[];for(let a of s){let s={...t,common:{...t.common,issues:[]},parent:null},n=a._parseSync({data:t.data,path:t.path,parent:s});if("valid"===n.status)return n;"dirty"!==n.status||e||(e={result:n,ctx:s}),s.common.issues.length&&r.push(s.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let a=r.map(e=>new P(e));return Z(t,{code:L.invalid_union,unionErrors:a}),$}}get options(){return this._def.options}}eT.create=(e,t)=>new eT({options:e,typeName:d.ZodUnion,...X(t)});let eO=e=>{if(e instanceof eM)return eO(e.schema);if(e instanceof eW)return eO(e.innerType());if(e instanceof eZ)return[e.value];if(e instanceof e$)return e.options;if(e instanceof eB)return o.objectValues(e.enum);if(e instanceof eH)return eO(e._def.innerType);if(e instanceof ej)return[void 0];else if(e instanceof ew)return[null];else if(e instanceof eV)return[void 0,...eO(e.unwrap())];else if(e instanceof eq)return[null,...eO(e.unwrap())];else if(e instanceof eX)return eO(e.unwrap());else if(e instanceof eJ)return eO(e.unwrap());else if(e instanceof eG)return eO(e._def.innerType);else return[]};class eI extends K{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==R.object)return Z(t,{code:L.invalid_type,expected:R.object,received:t.parsedType}),$;let s=this.discriminator,r=t.data[s],a=this.optionsMap.get(r);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(Z(t,{code:L.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),$)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){let r=new Map;for(let s of t){let t=eO(s.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of t){if(r.has(a))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);r.set(a,s)}}return new eI({typeName:d.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...X(s)})}}class eA extends K{_parse(e){let{status:t,ctx:s}=this._processInputParams(e),r=(e,r)=>{if(W(e)||W(r))return $;let a=function e(t,s){let r=D(t),a=D(s);if(t===s)return{valid:!0,data:t};if(r===R.object&&a===R.object){let r=o.objectKeys(s),a=o.objectKeys(t).filter(e=>-1!==r.indexOf(e)),n={...t,...s};for(let r of a){let a=e(t[r],s[r]);if(!a.valid)return{valid:!1};n[r]=a.data}return{valid:!0,data:n}}if(r===R.array&&a===R.array){if(t.length!==s.length)return{valid:!1};let r=[];for(let a=0;a<t.length;a++){let n=e(t[a],s[a]);if(!n.valid)return{valid:!1};r.push(n.data)}return{valid:!0,data:r}}return r===R.date&&a===R.date&&+t==+s?{valid:!0,data:t}:{valid:!1}}(e.value,r.value);return a.valid?((V(e)||V(r))&&t.dirty(),{status:t.value,value:a.data}):(Z(s,{code:L.invalid_intersection_types}),$)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([e,t])=>r(e,t)):r(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}eA.create=(e,t,s)=>new eA({left:e,right:t,typeName:d.ZodIntersection,...X(s)});class eR extends K{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==R.array)return Z(s,{code:L.invalid_type,expected:R.array,received:s.parsedType}),$;if(s.data.length<this._def.items.length)return Z(s,{code:L.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),$;!this._def.rest&&s.data.length>this._def.items.length&&(Z(s,{code:L.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let r=[...s.data].map((e,t)=>{let r=this._def.items[t]||this._def.rest;return r?r._parse(new G(s,e,s.path,t)):null}).filter(e=>!!e);return s.common.async?Promise.all(r).then(e=>z.mergeArray(t,e)):z.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new eR({...this._def,rest:e})}}eR.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new eR({items:e,typeName:d.ZodTuple,rest:null,...X(t)})};class eD extends K{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==R.object)return Z(s,{code:L.invalid_type,expected:R.object,received:s.parsedType}),$;let r=[],a=this._def.keyType,n=this._def.valueType;for(let e in s.data)r.push({key:a._parse(new G(s,e,s.path,e)),value:n._parse(new G(s,s.data[e],s.path,e)),alwaysSet:e in s.data});return s.common.async?z.mergeObjectAsync(t,r):z.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,s){return new eD(t instanceof K?{keyType:e,valueType:t,typeName:d.ZodRecord,...X(s)}:{keyType:ef.create(),valueType:e,typeName:d.ZodRecord,...X(t)})}}class eL extends K{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==R.map)return Z(s,{code:L.invalid_type,expected:R.map,received:s.parsedType}),$;let r=this._def.keyType,a=this._def.valueType,n=[...s.data.entries()].map(([e,t],n)=>({key:r._parse(new G(s,e,s.path,[n,"key"])),value:a._parse(new G(s,t,s.path,[n,"value"]))}));if(s.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let s of n){let r=await s.key,a=await s.value;if("aborted"===r.status||"aborted"===a.status)return $;("dirty"===r.status||"dirty"===a.status)&&t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}})}{let e=new Map;for(let s of n){let r=s.key,a=s.value;if("aborted"===r.status||"aborted"===a.status)return $;("dirty"===r.status||"dirty"===a.status)&&t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}}}}eL.create=(e,t,s)=>new eL({valueType:t,keyType:e,typeName:d.ZodMap,...X(s)});class eP extends K{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==R.set)return Z(s,{code:L.invalid_type,expected:R.set,received:s.parsedType}),$;let r=this._def;null!==r.minSize&&s.data.size<r.minSize.value&&(Z(s,{code:L.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&s.data.size>r.maxSize.value&&(Z(s,{code:L.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());let a=this._def.valueType;function n(e){let s=new Set;for(let r of e){if("aborted"===r.status)return $;"dirty"===r.status&&t.dirty(),s.add(r.value)}return{status:t.value,value:s}}let i=[...s.data.values()].map((e,t)=>a._parse(new G(s,e,s.path,t)));return s.common.async?Promise.all(i).then(e=>n(e)):n(i)}min(e,t){return new eP({...this._def,minSize:{value:e,message:c.toString(t)}})}max(e,t){return new eP({...this._def,maxSize:{value:e,message:c.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}eP.create=(e,t)=>new eP({valueType:e,minSize:null,maxSize:null,typeName:d.ZodSet,...X(t)});class eF extends K{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==R.function)return Z(t,{code:L.invalid_type,expected:R.function,received:t.parsedType}),$;function s(e,s){return M({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,F,F].filter(e=>!!e),issueData:{code:L.invalid_arguments,argumentsError:s}})}function r(e,s){return M({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,F,F].filter(e=>!!e),issueData:{code:L.invalid_return_type,returnTypeError:s}})}let a={errorMap:t.common.contextualErrorMap},n=t.data;if(this._def.returns instanceof eU){let e=this;return U(async function(...t){let i=new P([]),o=await e._def.args.parseAsync(t,a).catch(e=>{throw i.addIssue(s(t,e)),i}),l=await Reflect.apply(n,this,o);return await e._def.returns._def.type.parseAsync(l,a).catch(e=>{throw i.addIssue(r(l,e)),i})})}{let e=this;return U(function(...t){let i=e._def.args.safeParse(t,a);if(!i.success)throw new P([s(t,i.error)]);let o=Reflect.apply(n,this,i.data),l=e._def.returns.safeParse(o,a);if(!l.success)throw new P([r(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new eF({...this._def,args:eR.create(e).rest(e_.create())})}returns(e){return new eF({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new eF({args:e||eR.create([]).rest(e_.create()),returns:t||e_.create(),typeName:d.ZodFunction,...X(s)})}}class eM extends K{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}eM.create=(e,t)=>new eM({getter:e,typeName:d.ZodLazy,...X(t)});class eZ extends K{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return Z(t,{received:t.data,code:L.invalid_literal,expected:this._def.value}),$}return{status:"valid",value:e.data}}get value(){return this._def.value}}function ez(e,t){return new e$({values:e,typeName:d.ZodEnum,...X(t)})}eZ.create=(e,t)=>new eZ({value:e,typeName:d.ZodLiteral,...X(t)});class e$ extends K{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),s=this._def.values;return Z(t,{expected:o.joinValues(s),received:t.parsedType,code:L.invalid_type}),$}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),s=this._def.values;return Z(t,{received:t.data,code:L.invalid_enum_value,options:s}),$}return U(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return e$.create(e,{...this._def,...t})}exclude(e,t=this._def){return e$.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}e$.create=ez;class eB extends K{_parse(e){let t=o.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==R.string&&s.parsedType!==R.number){let e=o.objectValues(t);return Z(s,{expected:o.joinValues(e),received:s.parsedType,code:L.invalid_type}),$}if(this._cache||(this._cache=new Set(o.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=o.objectValues(t);return Z(s,{received:s.data,code:L.invalid_enum_value,options:e}),$}return U(e.data)}get enum(){return this._def.values}}eB.create=(e,t)=>new eB({values:e,typeName:d.ZodNativeEnum,...X(t)});class eU extends K{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==R.promise&&!1===t.common.async?(Z(t,{code:L.invalid_type,expected:R.promise,received:t.parsedType}),$):U((t.parsedType===R.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}eU.create=(e,t)=>new eU({type:e,typeName:d.ZodPromise,...X(t)});class eW extends K{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===d.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:s}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:e=>{Z(s,e),e.fatal?t.abort():t.dirty()},get path(){return s.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===r.type){let e=r.transform(s.data,a);if(s.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return $;let r=await this._def.schema._parseAsync({data:e,path:s.path,parent:s});return"aborted"===r.status?$:"dirty"===r.status||"dirty"===t.value?B(r.value):r});{if("aborted"===t.value)return $;let r=this._def.schema._parseSync({data:e,path:s.path,parent:s});return"aborted"===r.status?$:"dirty"===r.status||"dirty"===t.value?B(r.value):r}}if("refinement"===r.type){let e=e=>{let t=r.refinement(e,a);if(s.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==s.common.async)return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(s=>"aborted"===s.status?$:("dirty"===s.status&&t.dirty(),e(s.value).then(()=>({status:t.value,value:s.value}))));{let r=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return"aborted"===r.status?$:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}}if("transform"===r.type){if(!1!==s.common.async)return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(e=>q(e)?Promise.resolve(r.transform(e.value,a)).then(e=>({status:t.value,value:e})):$);{let e=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!q(e))return $;let n=r.transform(e.value,a);if(n instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:n}}}o.assertNever(r)}}eW.create=(e,t,s)=>new eW({schema:e,typeName:d.ZodEffects,effect:t,...X(s)}),eW.createWithPreprocess=(e,t,s)=>new eW({schema:t,effect:{type:"preprocess",transform:e},typeName:d.ZodEffects,...X(s)});class eV extends K{_parse(e){return this._getType(e)===R.undefined?U(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eV.create=(e,t)=>new eV({innerType:e,typeName:d.ZodOptional,...X(t)});class eq extends K{_parse(e){return this._getType(e)===R.null?U(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eq.create=(e,t)=>new eq({innerType:e,typeName:d.ZodNullable,...X(t)});class eH extends K{_parse(e){let{ctx:t}=this._processInputParams(e),s=t.data;return t.parsedType===R.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}eH.create=(e,t)=>new eH({innerType:e,typeName:d.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...X(t)});class eG extends K{_parse(e){let{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return H(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new P(s.common.issues)},input:s.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new P(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}eG.create=(e,t)=>new eG({innerType:e,typeName:d.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...X(t)});class eY extends K{_parse(e){if(this._getType(e)!==R.nan){let t=this._getOrReturnCtx(e);return Z(t,{code:L.invalid_type,expected:R.nan,received:t.parsedType}),$}return{status:"valid",value:e.data}}}eY.create=e=>new eY({typeName:d.ZodNaN,...X(e)}),Symbol("zod_brand");class eX extends K{_parse(e){let{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class eK extends K{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return"aborted"===e.status?$:"dirty"===e.status?(t.dirty(),B(e.value)):this._def.out._parseAsync({data:e.value,path:s.path,parent:s})})();{let e=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return"aborted"===e.status?$:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:s.path,parent:s})}}static create(e,t){return new eK({in:e,out:t,typeName:d.ZodPipeline})}}class eJ extends K{_parse(e){let t=this._def.innerType._parse(e),s=e=>(q(e)&&(e.value=Object.freeze(e.value)),e);return H(t)?t.then(e=>s(e)):s(t)}unwrap(){return this._def.innerType}}eJ.create=(e,t)=>new eJ({innerType:e,typeName:d.ZodReadonly,...X(t)}),eE.lazycreate,function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(d||(d={}));let eQ=ef.create;ex.create,eY.create,eg.create,ev.create,ey.create,eb.create,ej.create,ew.create,eN.create,e_.create,ek.create,eC.create;let e0=eS.create,e1=eE.create;eE.strictCreate,eT.create,eI.create,eA.create,eR.create,eD.create,eL.create,eP.create,eF.create,eM.create,eZ.create,e$.create,eB.create,eU.create,eW.create,eV.create,eq.create,eW.createWithPreprocess,eK.create;var e2=s(6991),e3=s(2394),e5=s(6817);function e4(e,[t,s]){return Math.min(s,Math.max(t,e))}var e6=s(319),e9=s(3714),e8=s(3191),e7=s(732),te=s(1310),tt=s(2251),ts=s(5090),tr="dismissableLayer.update",ta=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),tn=x.forwardRef((e,t)=>{let{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:n,onInteractOutside:i,onDismiss:o,...l}=e,c=x.useContext(ta),[d,h]=x.useState(null),m=d?.ownerDocument??globalThis?.document,[,p]=x.useState({}),g=(0,e8.e)(t,e=>h(e)),v=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),b=v.indexOf(y),j=d?v.indexOf(d):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,N=j>=b,_=function(e,t=globalThis?.document){let s=(0,ts.W)(e),r=x.useRef(!1),a=x.useRef(()=>{});return x.useEffect(()=>{let e=e=>{if(e.target&&!r.current){let r=function(){to("dismissableLayer.pointerDownOutside",s,n,{discrete:!0})},n={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",a.current),a.current=r,t.addEventListener("click",a.current,{once:!0})):r()}else t.removeEventListener("click",a.current);r.current=!1},n=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(n),t.removeEventListener("pointerdown",e),t.removeEventListener("click",a.current)}},[t,s]),{onPointerDownCapture:()=>r.current=!0}}(e=>{let t=e.target,s=[...c.branches].some(e=>e.contains(t));!N||s||(a?.(e),i?.(e),e.defaultPrevented||o?.())},m),k=function(e,t=globalThis?.document){let s=(0,ts.W)(e),r=x.useRef(!1);return x.useEffect(()=>{let e=e=>{e.target&&!r.current&&to("dismissableLayer.focusOutside",s,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,s]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{let t=e.target;[...c.branches].some(e=>e.contains(t))||(n?.(e),i?.(e),e.defaultPrevented||o?.())},m);return function(e,t=globalThis?.document){let s=(0,ts.W)(e);x.useEffect(()=>{let e=e=>{"Escape"===e.key&&s(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[s,t])}(e=>{j!==c.layers.size-1||(r?.(e),!e.defaultPrevented&&o&&(e.preventDefault(),o()))},m),x.useEffect(()=>{if(d)return s&&(0===c.layersWithOutsidePointerEventsDisabled.size&&(u=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),ti(),()=>{s&&1===c.layersWithOutsidePointerEventsDisabled.size&&(m.body.style.pointerEvents=u)}},[d,m,s,c]),x.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),ti())},[d,c]),x.useEffect(()=>{let e=()=>p({});return document.addEventListener(tr,e),()=>document.removeEventListener(tr,e)},[]),(0,f.jsx)(tt.WV.div,{...l,ref:g,style:{pointerEvents:w?N?"auto":"none":void 0,...e.style},onFocusCapture:(0,e6.Mj)(e.onFocusCapture,k.onFocusCapture),onBlurCapture:(0,e6.Mj)(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:(0,e6.Mj)(e.onPointerDownCapture,_.onPointerDownCapture)})});function ti(){let e=new CustomEvent(tr);document.dispatchEvent(e)}function to(e,t,s,{discrete:r}){let a=s.originalEvent.target,n=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&a.addEventListener(e,t,{once:!0}),r?(0,tt.jH)(a,n):a.dispatchEvent(n)}tn.displayName="DismissableLayer",x.forwardRef((e,t)=>{let s=x.useContext(ta),r=x.useRef(null),a=(0,e8.e)(t,r);return x.useEffect(()=>{let e=r.current;if(e)return s.branches.add(e),()=>{s.branches.delete(e)}},[s.branches]),(0,f.jsx)(tt.WV.div,{...e,ref:a})}).displayName="DismissableLayerBranch";var tl=0;function tc(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var td="focusScope.autoFocusOnMount",tu="focusScope.autoFocusOnUnmount",th={bubbles:!1,cancelable:!0},tm=x.forwardRef((e,t)=>{let{loop:s=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:n,...i}=e,[o,l]=x.useState(null),c=(0,ts.W)(a),d=(0,ts.W)(n),u=x.useRef(null),h=(0,e8.e)(t,e=>l(e)),m=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(r){let e=function(e){if(m.paused||!o)return;let t=e.target;o.contains(t)?u.current=t:tx(u.current,{select:!0})},t=function(e){if(m.paused||!o)return;let t=e.relatedTarget;null===t||o.contains(t)||tx(u.current,{select:!0})};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let s=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&tx(o)});return o&&s.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),s.disconnect()}}},[r,o,m.paused]),x.useEffect(()=>{if(o){tg.add(m);let e=document.activeElement;if(!o.contains(e)){let t=new CustomEvent(td,th);o.addEventListener(td,c),o.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let s=document.activeElement;for(let r of e)if(tx(r,{select:t}),document.activeElement!==s)return}(tp(o).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&tx(o))}return()=>{o.removeEventListener(td,c),setTimeout(()=>{let t=new CustomEvent(tu,th);o.addEventListener(tu,d),o.dispatchEvent(t),t.defaultPrevented||tx(e??document.body,{select:!0}),o.removeEventListener(tu,d),tg.remove(m)},0)}}},[o,c,d,m]);let p=x.useCallback(e=>{if(!s&&!r||m.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,a=document.activeElement;if(t&&a){let t=e.currentTarget,[r,n]=function(e){let t=tp(e);return[tf(t,e),tf(t.reverse(),e)]}(t);r&&n?e.shiftKey||a!==n?e.shiftKey&&a===r&&(e.preventDefault(),s&&tx(n,{select:!0})):(e.preventDefault(),s&&tx(r,{select:!0})):a===t&&e.preventDefault()}},[s,r,m.paused]);return(0,f.jsx)(tt.WV.div,{tabIndex:-1,...i,ref:h,onKeyDown:p})});function tp(e){let t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function tf(e,t){for(let s of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(s,{upTo:t}))return s}function tx(e,{select:t=!1}={}){if(e&&e.focus){var s;let r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&(s=e)instanceof HTMLInputElement&&"select"in s&&t&&e.select()}}tm.displayName="FocusScope";var tg=function(){let e=[];return{add(t){let s=e[0];t!==s&&s?.pause(),(e=tv(e,t)).unshift(t)},remove(t){e=tv(e,t),e[0]?.resume()}}}();function tv(e,t){let s=[...e],r=s.indexOf(t);return -1!==r&&s.splice(r,1),s}var ty=s(7015);let tb=["top","right","bottom","left"],tj=Math.min,tw=Math.max,tN=Math.round,t_=Math.floor,tk=e=>({x:e,y:e}),tC={left:"right",right:"left",bottom:"top",top:"bottom"},tS={start:"end",end:"start"};function tE(e,t){return"function"==typeof e?e(t):e}function tT(e){return e.split("-")[0]}function tO(e){return e.split("-")[1]}function tI(e){return"x"===e?"y":"x"}function tA(e){return"y"===e?"height":"width"}let tR=new Set(["top","bottom"]);function tD(e){return tR.has(tT(e))?"y":"x"}function tL(e){return e.replace(/start|end/g,e=>tS[e])}let tP=["left","right"],tF=["right","left"],tM=["top","bottom"],tZ=["bottom","top"];function tz(e){return e.replace(/left|right|bottom|top/g,e=>tC[e])}function t$(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function tB(e){let{x:t,y:s,width:r,height:a}=e;return{width:r,height:a,top:s,left:t,right:t+r,bottom:s+a,x:t,y:s}}function tU(e,t,s){let r,{reference:a,floating:n}=e,i=tD(t),o=tI(tD(t)),l=tA(o),c=tT(t),d="y"===i,u=a.x+a.width/2-n.width/2,h=a.y+a.height/2-n.height/2,m=a[l]/2-n[l]/2;switch(c){case"top":r={x:u,y:a.y-n.height};break;case"bottom":r={x:u,y:a.y+a.height};break;case"right":r={x:a.x+a.width,y:h};break;case"left":r={x:a.x-n.width,y:h};break;default:r={x:a.x,y:a.y}}switch(tO(t)){case"start":r[o]-=m*(s&&d?-1:1);break;case"end":r[o]+=m*(s&&d?-1:1)}return r}let tW=async(e,t,s)=>{let{placement:r="bottom",strategy:a="absolute",middleware:n=[],platform:i}=s,o=n.filter(Boolean),l=await (null==i.isRTL?void 0:i.isRTL(t)),c=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:u}=tU(c,r,l),h=r,m={},p=0;for(let s=0;s<o.length;s++){let{name:n,fn:f}=o[s],{x:x,y:g,data:v,reset:y}=await f({x:d,y:u,initialPlacement:r,placement:h,strategy:a,middlewareData:m,rects:c,platform:i,elements:{reference:e,floating:t}});d=null!=x?x:d,u=null!=g?g:u,m={...m,[n]:{...m[n],...v}},y&&p<=50&&(p++,"object"==typeof y&&(y.placement&&(h=y.placement),y.rects&&(c=!0===y.rects?await i.getElementRects({reference:e,floating:t,strategy:a}):y.rects),{x:d,y:u}=tU(c,h,l)),s=-1)}return{x:d,y:u,placement:h,strategy:a,middlewareData:m}};async function tV(e,t){var s;void 0===t&&(t={});let{x:r,y:a,platform:n,rects:i,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:h=!1,padding:m=0}=tE(t,e),p=t$(m),f=o[h?"floating"===u?"reference":"floating":u],x=tB(await n.getClippingRect({element:null==(s=await (null==n.isElement?void 0:n.isElement(f)))||s?f:f.contextElement||await (null==n.getDocumentElement?void 0:n.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),g="floating"===u?{x:r,y:a,width:i.floating.width,height:i.floating.height}:i.reference,v=await (null==n.getOffsetParent?void 0:n.getOffsetParent(o.floating)),y=await (null==n.isElement?void 0:n.isElement(v))&&await (null==n.getScale?void 0:n.getScale(v))||{x:1,y:1},b=tB(n.convertOffsetParentRelativeRectToViewportRelativeRect?await n.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:g,offsetParent:v,strategy:l}):g);return{top:(x.top-b.top+p.top)/y.y,bottom:(b.bottom-x.bottom+p.bottom)/y.y,left:(x.left-b.left+p.left)/y.x,right:(b.right-x.right+p.right)/y.x}}function tq(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function tH(e){return tb.some(t=>e[t]>=0)}let tG=new Set(["left","top"]);async function tY(e,t){let{placement:s,platform:r,elements:a}=e,n=await (null==r.isRTL?void 0:r.isRTL(a.floating)),i=tT(s),o=tO(s),l="y"===tD(s),c=tG.has(i)?-1:1,d=n&&l?-1:1,u=tE(t,e),{mainAxis:h,crossAxis:m,alignmentAxis:p}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return o&&"number"==typeof p&&(m="end"===o?-1*p:p),l?{x:m*d,y:h*c}:{x:h*c,y:m*d}}function tX(){return"undefined"!=typeof window}function tK(e){return t0(e)?(e.nodeName||"").toLowerCase():"#document"}function tJ(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function tQ(e){var t;return null==(t=(t0(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function t0(e){return!!tX()&&(e instanceof Node||e instanceof tJ(e).Node)}function t1(e){return!!tX()&&(e instanceof Element||e instanceof tJ(e).Element)}function t2(e){return!!tX()&&(e instanceof HTMLElement||e instanceof tJ(e).HTMLElement)}function t3(e){return!!tX()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof tJ(e).ShadowRoot)}let t5=new Set(["inline","contents"]);function t4(e){let{overflow:t,overflowX:s,overflowY:r,display:a}=si(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+s)&&!t5.has(a)}let t6=new Set(["table","td","th"]),t9=[":popover-open",":modal"];function t8(e){return t9.some(t=>{try{return e.matches(t)}catch(e){return!1}})}let t7=["transform","translate","scale","rotate","perspective"],se=["transform","translate","scale","rotate","perspective","filter"],st=["paint","layout","strict","content"];function ss(e){let t=sr(),s=t1(e)?si(e):e;return t7.some(e=>!!s[e]&&"none"!==s[e])||!!s.containerType&&"normal"!==s.containerType||!t&&!!s.backdropFilter&&"none"!==s.backdropFilter||!t&&!!s.filter&&"none"!==s.filter||se.some(e=>(s.willChange||"").includes(e))||st.some(e=>(s.contain||"").includes(e))}function sr(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let sa=new Set(["html","body","#document"]);function sn(e){return sa.has(tK(e))}function si(e){return tJ(e).getComputedStyle(e)}function so(e){return t1(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function sl(e){if("html"===tK(e))return e;let t=e.assignedSlot||e.parentNode||t3(e)&&e.host||tQ(e);return t3(t)?t.host:t}function sc(e,t,s){var r;void 0===t&&(t=[]),void 0===s&&(s=!0);let a=function e(t){let s=sl(t);return sn(s)?t.ownerDocument?t.ownerDocument.body:t.body:t2(s)&&t4(s)?s:e(s)}(e),n=a===(null==(r=e.ownerDocument)?void 0:r.body),i=tJ(a);if(n){let e=sd(i);return t.concat(i,i.visualViewport||[],t4(a)?a:[],e&&s?sc(e):[])}return t.concat(a,sc(a,[],s))}function sd(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function su(e){let t=si(e),s=parseFloat(t.width)||0,r=parseFloat(t.height)||0,a=t2(e),n=a?e.offsetWidth:s,i=a?e.offsetHeight:r,o=tN(s)!==n||tN(r)!==i;return o&&(s=n,r=i),{width:s,height:r,$:o}}function sh(e){return t1(e)?e:e.contextElement}function sm(e){let t=sh(e);if(!t2(t))return tk(1);let s=t.getBoundingClientRect(),{width:r,height:a,$:n}=su(t),i=(n?tN(s.width):s.width)/r,o=(n?tN(s.height):s.height)/a;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}let sp=tk(0);function sf(e){let t=tJ(e);return sr()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:sp}function sx(e,t,s,r){var a;void 0===t&&(t=!1),void 0===s&&(s=!1);let n=e.getBoundingClientRect(),i=sh(e),o=tk(1);t&&(r?t1(r)&&(o=sm(r)):o=sm(e));let l=(void 0===(a=s)&&(a=!1),r&&(!a||r===tJ(i))&&a)?sf(i):tk(0),c=(n.left+l.x)/o.x,d=(n.top+l.y)/o.y,u=n.width/o.x,h=n.height/o.y;if(i){let e=tJ(i),t=r&&t1(r)?tJ(r):r,s=e,a=sd(s);for(;a&&r&&t!==s;){let e=sm(a),t=a.getBoundingClientRect(),r=si(a),n=t.left+(a.clientLeft+parseFloat(r.paddingLeft))*e.x,i=t.top+(a.clientTop+parseFloat(r.paddingTop))*e.y;c*=e.x,d*=e.y,u*=e.x,h*=e.y,c+=n,d+=i,a=sd(s=tJ(a))}}return tB({width:u,height:h,x:c,y:d})}function sg(e,t){let s=so(e).scrollLeft;return t?t.left+s:sx(tQ(e)).left+s}function sv(e,t){let s=e.getBoundingClientRect();return{x:s.left+t.scrollLeft-sg(e,s),y:s.top+t.scrollTop}}let sy=new Set(["absolute","fixed"]);function sb(e,t,s){let r;if("viewport"===t)r=function(e,t){let s=tJ(e),r=tQ(e),a=s.visualViewport,n=r.clientWidth,i=r.clientHeight,o=0,l=0;if(a){n=a.width,i=a.height;let e=sr();(!e||e&&"fixed"===t)&&(o=a.offsetLeft,l=a.offsetTop)}let c=sg(r);if(c<=0){let e=r.ownerDocument,t=e.body,s=getComputedStyle(t),a="CSS1Compat"===e.compatMode&&parseFloat(s.marginLeft)+parseFloat(s.marginRight)||0,i=Math.abs(r.clientWidth-t.clientWidth-a);i<=25&&(n-=i)}else c<=25&&(n+=c);return{width:n,height:i,x:o,y:l}}(e,s);else if("document"===t)r=function(e){let t=tQ(e),s=so(e),r=e.ownerDocument.body,a=tw(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),n=tw(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight),i=-s.scrollLeft+sg(e),o=-s.scrollTop;return"rtl"===si(r).direction&&(i+=tw(t.clientWidth,r.clientWidth)-a),{width:a,height:n,x:i,y:o}}(tQ(e));else if(t1(t))r=function(e,t){let s=sx(e,!0,"fixed"===t),r=s.top+e.clientTop,a=s.left+e.clientLeft,n=t2(e)?sm(e):tk(1),i=e.clientWidth*n.x;return{width:i,height:e.clientHeight*n.y,x:a*n.x,y:r*n.y}}(t,s);else{let s=sf(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return tB(r)}function sj(e){return"static"===si(e).position}function sw(e,t){if(!t2(e)||"fixed"===si(e).position)return null;if(t)return t(e);let s=e.offsetParent;return tQ(e)===s&&(s=s.ownerDocument.body),s}function sN(e,t){var s;let r=tJ(e);if(t8(e))return r;if(!t2(e)){let t=sl(e);for(;t&&!sn(t);){if(t1(t)&&!sj(t))return t;t=sl(t)}return r}let a=sw(e,t);for(;a&&(s=a,t6.has(tK(s)))&&sj(a);)a=sw(a,t);return a&&sn(a)&&sj(a)&&!ss(a)?r:a||function(e){let t=sl(e);for(;t2(t)&&!sn(t);){if(ss(t))return t;if(t8(t))break;t=sl(t)}return null}(e)||r}let s_=async function(e){let t=this.getOffsetParent||sN,s=this.getDimensions,r=await s(e.floating);return{reference:function(e,t,s){let r=t2(t),a=tQ(t),n="fixed"===s,i=sx(e,!0,n,t),o={scrollLeft:0,scrollTop:0},l=tk(0);if(r||!r&&!n){if(("body"!==tK(t)||t4(a))&&(o=so(t)),r){let e=sx(t,!0,n,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else a&&(l.x=sg(a))}n&&!r&&a&&(l.x=sg(a));let c=!a||r||n?tk(0):sv(a,o);return{x:i.left+o.scrollLeft-l.x-c.x,y:i.top+o.scrollTop-l.y-c.y,width:i.width,height:i.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},sk={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:s,offsetParent:r,strategy:a}=e,n="fixed"===a,i=tQ(r),o=!!t&&t8(t.floating);if(r===i||o&&n)return s;let l={scrollLeft:0,scrollTop:0},c=tk(1),d=tk(0),u=t2(r);if((u||!u&&!n)&&(("body"!==tK(r)||t4(i))&&(l=so(r)),t2(r))){let e=sx(r);c=sm(r),d.x=e.x+r.clientLeft,d.y=e.y+r.clientTop}let h=!i||u||n?tk(0):sv(i,l);return{width:s.width*c.x,height:s.height*c.y,x:s.x*c.x-l.scrollLeft*c.x+d.x+h.x,y:s.y*c.y-l.scrollTop*c.y+d.y+h.y}},getDocumentElement:tQ,getClippingRect:function(e){let{element:t,boundary:s,rootBoundary:r,strategy:a}=e,n=[..."clippingAncestors"===s?t8(t)?[]:function(e,t){let s=t.get(e);if(s)return s;let r=sc(e,[],!1).filter(e=>t1(e)&&"body"!==tK(e)),a=null,n="fixed"===si(e).position,i=n?sl(e):e;for(;t1(i)&&!sn(i);){let t=si(i),s=ss(i);s||"fixed"!==t.position||(a=null),(n?!s&&!a:!s&&"static"===t.position&&!!a&&sy.has(a.position)||t4(i)&&!s&&function e(t,s){let r=sl(t);return!(r===s||!t1(r)||sn(r))&&("fixed"===si(r).position||e(r,s))}(e,i))?r=r.filter(e=>e!==i):a=t,i=sl(i)}return t.set(e,r),r}(t,this._c):[].concat(s),r],i=n[0],o=n.reduce((e,s)=>{let r=sb(t,s,a);return e.top=tw(r.top,e.top),e.right=tj(r.right,e.right),e.bottom=tj(r.bottom,e.bottom),e.left=tw(r.left,e.left),e},sb(t,i,a));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:sN,getElementRects:s_,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:s}=su(e);return{width:t,height:s}},getScale:sm,isElement:t1,isRTL:function(e){return"rtl"===si(e).direction}};function sC(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}let sS=e=>({name:"arrow",options:e,async fn(t){let{x:s,y:r,placement:a,rects:n,platform:i,elements:o,middlewareData:l}=t,{element:c,padding:d=0}=tE(e,t)||{};if(null==c)return{};let u=t$(d),h={x:s,y:r},m=tI(tD(a)),p=tA(m),f=await i.getDimensions(c),x="y"===m,g=x?"clientHeight":"clientWidth",v=n.reference[p]+n.reference[m]-h[m]-n.floating[p],y=h[m]-n.reference[m],b=await (null==i.getOffsetParent?void 0:i.getOffsetParent(c)),j=b?b[g]:0;j&&await (null==i.isElement?void 0:i.isElement(b))||(j=o.floating[g]||n.floating[p]);let w=j/2-f[p]/2-1,N=tj(u[x?"top":"left"],w),_=tj(u[x?"bottom":"right"],w),k=j-f[p]-_,C=j/2-f[p]/2+(v/2-y/2),S=tw(N,tj(C,k)),E=!l.arrow&&null!=tO(a)&&C!==S&&n.reference[p]/2-(C<N?N:_)-f[p]/2<0,T=E?C<N?C-N:C-k:0;return{[m]:h[m]+T,data:{[m]:S,centerOffset:C-S-T,...E&&{alignmentOffset:T}},reset:E}}}),sE=(e,t,s)=>{let r=new Map,a={platform:sk,...s},n={...a.platform,_c:r};return tW(e,t,{...a,platform:n})};var sT="undefined"!=typeof document?x.useLayoutEffect:function(){};function sO(e,t){let s,r,a;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((s=e.length)!==t.length)return!1;for(r=s;0!=r--;)if(!sO(e[r],t[r]))return!1;return!0}if((s=(a=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=s;0!=r--;)if(!({}).hasOwnProperty.call(t,a[r]))return!1;for(r=s;0!=r--;){let s=a[r];if(("_owner"!==s||!e.$$typeof)&&!sO(e[s],t[s]))return!1}return!0}return e!=e&&t!=t}function sI(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function sA(e,t){let s=sI(e);return Math.round(t*s)/s}function sR(e){let t=x.useRef(e);return sT(()=>{t.current=e}),t}let sD=e=>({name:"arrow",options:e,fn(t){let{element:s,padding:r}="function"==typeof e?e(t):e;return s&&({}).hasOwnProperty.call(s,"current")?null!=s.current?sS({element:s.current,padding:r}).fn(t):{}:s?sS({element:s,padding:r}).fn(t):{}}}),sL=(e,t)=>({...function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var s,r;let{x:a,y:n,placement:i,middlewareData:o}=t,l=await tY(t,e);return i===(null==(s=o.offset)?void 0:s.placement)&&null!=(r=o.arrow)&&r.alignmentOffset?{}:{x:a+l.x,y:n+l.y,data:{...l,placement:i}}}}}(e),options:[e,t]}),sP=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){let{x:s,y:r,placement:a}=t,{mainAxis:n=!0,crossAxis:i=!1,limiter:o={fn:e=>{let{x:t,y:s}=e;return{x:t,y:s}}},...l}=tE(e,t),c={x:s,y:r},d=await tV(t,l),u=tD(tT(a)),h=tI(u),m=c[h],p=c[u];if(n){let e="y"===h?"top":"left",t="y"===h?"bottom":"right",s=m+d[e],r=m-d[t];m=tw(s,tj(m,r))}if(i){let e="y"===u?"top":"left",t="y"===u?"bottom":"right",s=p+d[e],r=p-d[t];p=tw(s,tj(p,r))}let f=o.fn({...t,[h]:m,[u]:p});return{...f,data:{x:f.x-s,y:f.y-r,enabled:{[h]:n,[u]:i}}}}}}(e),options:[e,t]}),sF=(e,t)=>({...function(e){return void 0===e&&(e={}),{options:e,fn(t){let{x:s,y:r,placement:a,rects:n,middlewareData:i}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=tE(e,t),d={x:s,y:r},u=tD(a),h=tI(u),m=d[h],p=d[u],f=tE(o,t),x="number"==typeof f?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(l){let e="y"===h?"height":"width",t=n.reference[h]-n.floating[e]+x.mainAxis,s=n.reference[h]+n.reference[e]-x.mainAxis;m<t?m=t:m>s&&(m=s)}if(c){var g,v;let e="y"===h?"width":"height",t=tG.has(tT(a)),s=n.reference[u]-n.floating[e]+(t&&(null==(g=i.offset)?void 0:g[u])||0)+(t?0:x.crossAxis),r=n.reference[u]+n.reference[e]+(t?0:(null==(v=i.offset)?void 0:v[u])||0)-(t?x.crossAxis:0);p<s?p=s:p>r&&(p=r)}return{[h]:m,[u]:p}}}}(e),options:[e,t]}),sM=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var s,r,a,n,i;let{placement:o,middlewareData:l,rects:c,initialPlacement:d,platform:u,elements:h}=t,{mainAxis:m=!0,crossAxis:p=!0,fallbackPlacements:f,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...y}=tE(e,t);if(null!=(s=l.arrow)&&s.alignmentOffset)return{};let b=tT(o),j=tD(d),w=tT(d)===d,N=await (null==u.isRTL?void 0:u.isRTL(h.floating)),_=f||(w||!v?[tz(d)]:function(e){let t=tz(e);return[tL(e),t,tL(t)]}(d)),k="none"!==g;!f&&k&&_.push(...function(e,t,s,r){let a=tO(e),n=function(e,t,s){switch(e){case"top":case"bottom":if(s)return t?tF:tP;return t?tP:tF;case"left":case"right":return t?tM:tZ;default:return[]}}(tT(e),"start"===s,r);return a&&(n=n.map(e=>e+"-"+a),t&&(n=n.concat(n.map(tL)))),n}(d,v,g,N));let C=[d,..._],S=await tV(t,y),E=[],T=(null==(r=l.flip)?void 0:r.overflows)||[];if(m&&E.push(S[b]),p){let e=function(e,t,s){void 0===s&&(s=!1);let r=tO(e),a=tI(tD(e)),n=tA(a),i="x"===a?r===(s?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[n]>t.floating[n]&&(i=tz(i)),[i,tz(i)]}(o,c,N);E.push(S[e[0]],S[e[1]])}if(T=[...T,{placement:o,overflows:E}],!E.every(e=>e<=0)){let e=((null==(a=l.flip)?void 0:a.index)||0)+1,t=C[e];if(t&&(!("alignment"===p&&j!==tD(t))||T.every(e=>tD(e.placement)!==j||e.overflows[0]>0)))return{data:{index:e,overflows:T},reset:{placement:t}};let s=null==(n=T.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:n.placement;if(!s)switch(x){case"bestFit":{let e=null==(i=T.filter(e=>{if(k){let t=tD(e.placement);return t===j||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:i[0];e&&(s=e);break}case"initialPlacement":s=d}if(o!==s)return{reset:{placement:s}}}return{}}}}(e),options:[e,t]}),sZ=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var s,r;let a,n;let{placement:i,rects:o,platform:l,elements:c}=t,{apply:d=()=>{},...u}=tE(e,t),h=await tV(t,u),m=tT(i),p=tO(i),f="y"===tD(i),{width:x,height:g}=o.floating;"top"===m||"bottom"===m?(a=m,n=p===(await (null==l.isRTL?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(n=m,a="end"===p?"top":"bottom");let v=g-h.top-h.bottom,y=x-h.left-h.right,b=tj(g-h[a],v),j=tj(x-h[n],y),w=!t.middlewareData.shift,N=b,_=j;if(null!=(s=t.middlewareData.shift)&&s.enabled.x&&(_=y),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(N=v),w&&!p){let e=tw(h.left,0),t=tw(h.right,0),s=tw(h.top,0),r=tw(h.bottom,0);f?_=x-2*(0!==e||0!==t?e+t:tw(h.left,h.right)):N=g-2*(0!==s||0!==r?s+r:tw(h.top,h.bottom))}await d({...t,availableWidth:_,availableHeight:N});let k=await l.getDimensions(c.floating);return x!==k.width||g!==k.height?{reset:{rects:!0}}:{}}}}(e),options:[e,t]}),sz=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){let{rects:s}=t,{strategy:r="referenceHidden",...a}=tE(e,t);switch(r){case"referenceHidden":{let e=tq(await tV(t,{...a,elementContext:"reference"}),s.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:tH(e)}}}case"escaped":{let e=tq(await tV(t,{...a,altBoundary:!0}),s.floating);return{data:{escapedOffsets:e,escaped:tH(e)}}}default:return{}}}}}(e),options:[e,t]}),s$=(e,t)=>({...sD(e),options:[e,t]});var sB=x.forwardRef((e,t)=>{let{children:s,width:r=10,height:a=5,...n}=e;return(0,f.jsx)(tt.WV.svg,{...n,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?s:(0,f.jsx)("polygon",{points:"0,0 30,0 15,10"})})});sB.displayName="Arrow";var sU=s(9537);function sW(e){let[t,s]=x.useState(void 0);return(0,sU.b)(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let r,a;if(!Array.isArray(t)||!t.length)return;let n=t[0];if("borderBoxSize"in n){let e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,a=t.blockSize}else r=e.offsetWidth,a=e.offsetHeight;s({width:r,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}s(void 0)},[e]),t}var sV="Popper",[sq,sH]=(0,e7.b)(sV),[sG,sY]=sq(sV),sX=e=>{let{__scopePopper:t,children:s}=e,[r,a]=x.useState(null);return(0,f.jsx)(sG,{scope:t,anchor:r,onAnchorChange:a,children:s})};sX.displayName=sV;var sK="PopperAnchor",sJ=x.forwardRef((e,t)=>{let{__scopePopper:s,virtualRef:r,...a}=e,n=sY(sK,s),i=x.useRef(null),o=(0,e8.e)(t,i),l=x.useRef(null);return x.useEffect(()=>{let e=l.current;l.current=r?.current||i.current,e!==l.current&&n.onAnchorChange(l.current)}),r?null:(0,f.jsx)(tt.WV.div,{...a,ref:o})});sJ.displayName=sK;var sQ="PopperContent",[s0,s1]=sq(sQ),s2=x.forwardRef((e,t)=>{let{__scopePopper:s,side:r="bottom",sideOffset:a=0,align:n="center",alignOffset:i=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:u="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:p,...g}=e,v=sY(sQ,s),[y,b]=x.useState(null),j=(0,e8.e)(t,e=>b(e)),[w,N]=x.useState(null),_=sW(w),k=_?.width??0,C=_?.height??0,S="number"==typeof d?d:{top:0,right:0,bottom:0,left:0,...d},E=Array.isArray(c)?c:[c],T=E.length>0,O={padding:S,boundary:E.filter(s6),altBoundary:T},{refs:I,floatingStyles:A,placement:R,isPositioned:D,middlewareData:L}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:s="absolute",middleware:r=[],platform:a,elements:{reference:n,floating:i}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[d,u]=x.useState({x:0,y:0,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=x.useState(r);sO(h,r)||m(r);let[p,f]=x.useState(null),[g,v]=x.useState(null),y=x.useCallback(e=>{e!==N.current&&(N.current=e,f(e))},[]),b=x.useCallback(e=>{e!==_.current&&(_.current=e,v(e))},[]),j=n||p,w=i||g,N=x.useRef(null),_=x.useRef(null),k=x.useRef(d),C=null!=l,S=sR(l),E=sR(a),T=sR(c),O=x.useCallback(()=>{if(!N.current||!_.current)return;let e={placement:t,strategy:s,middleware:h};E.current&&(e.platform=E.current),sE(N.current,_.current,e).then(e=>{let t={...e,isPositioned:!1!==T.current};I.current&&!sO(k.current,t)&&(k.current=t,e5.flushSync(()=>{u(t)}))})},[h,t,s,E,T]);sT(()=>{!1===c&&k.current.isPositioned&&(k.current.isPositioned=!1,u(e=>({...e,isPositioned:!1})))},[c]);let I=x.useRef(!1);sT(()=>(I.current=!0,()=>{I.current=!1}),[]),sT(()=>{if(j&&(N.current=j),w&&(_.current=w),j&&w){if(S.current)return S.current(j,w,O);O()}},[j,w,O,S,C]);let A=x.useMemo(()=>({reference:N,floating:_,setReference:y,setFloating:b}),[y,b]),R=x.useMemo(()=>({reference:j,floating:w}),[j,w]),D=x.useMemo(()=>{let e={position:s,left:0,top:0};if(!R.floating)return e;let t=sA(R.floating,d.x),r=sA(R.floating,d.y);return o?{...e,transform:"translate("+t+"px, "+r+"px)",...sI(R.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:t,top:r}},[s,o,R.floating,d.x,d.y]);return x.useMemo(()=>({...d,update:O,refs:A,elements:R,floatingStyles:D}),[d,O,A,R,D])}({strategy:"fixed",placement:r+("center"!==n?"-"+n:""),whileElementsMounted:(...e)=>(function(e,t,s,r){let a;void 0===r&&(r={});let{ancestorScroll:n=!0,ancestorResize:i=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:c=!1}=r,d=sh(e),u=n||i?[...d?sc(d):[],...sc(t)]:[];u.forEach(e=>{n&&e.addEventListener("scroll",s,{passive:!0}),i&&e.addEventListener("resize",s)});let h=d&&l?function(e,t){let s,r=null,a=tQ(e);function n(){var e;clearTimeout(s),null==(e=r)||e.disconnect(),r=null}return function i(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),n();let c=e.getBoundingClientRect(),{left:d,top:u,width:h,height:m}=c;if(o||t(),!h||!m)return;let p=t_(u),f=t_(a.clientWidth-(d+h)),x={rootMargin:-p+"px "+-f+"px "+-t_(a.clientHeight-(u+m))+"px "+-t_(d)+"px",threshold:tw(0,tj(1,l))||1},g=!0;function v(t){let r=t[0].intersectionRatio;if(r!==l){if(!g)return i();r?i(!1,r):s=setTimeout(()=>{i(!1,1e-7)},1e3)}1!==r||sC(c,e.getBoundingClientRect())||i(),g=!1}try{r=new IntersectionObserver(v,{...x,root:a.ownerDocument})}catch(e){r=new IntersectionObserver(v,x)}r.observe(e)}(!0),n}(d,s):null,m=-1,p=null;o&&(p=new ResizeObserver(e=>{let[r]=e;r&&r.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),s()}),d&&!c&&p.observe(d),p.observe(t));let f=c?sx(e):null;return c&&function t(){let r=sx(e);f&&!sC(f,r)&&s(),f=r,a=requestAnimationFrame(t)}(),s(),()=>{var e;u.forEach(e=>{n&&e.removeEventListener("scroll",s),i&&e.removeEventListener("resize",s)}),null==h||h(),null==(e=p)||e.disconnect(),p=null,c&&cancelAnimationFrame(a)}})(...e,{animationFrame:"always"===m}),elements:{reference:v.anchor},middleware:[sL({mainAxis:a+C,alignmentAxis:i}),l&&sP({mainAxis:!0,crossAxis:!1,limiter:"partial"===u?sF():void 0,...O}),l&&sM({...O}),sZ({...O,apply:({elements:e,rects:t,availableWidth:s,availableHeight:r})=>{let{width:a,height:n}=t.reference,i=e.floating.style;i.setProperty("--radix-popper-available-width",`${s}px`),i.setProperty("--radix-popper-available-height",`${r}px`),i.setProperty("--radix-popper-anchor-width",`${a}px`),i.setProperty("--radix-popper-anchor-height",`${n}px`)}}),w&&s$({element:w,padding:o}),s9({arrowWidth:k,arrowHeight:C}),h&&sz({strategy:"referenceHidden",...O})]}),[P,F]=s8(R),M=(0,ts.W)(p);(0,sU.b)(()=>{D&&M?.()},[D,M]);let Z=L.arrow?.x,z=L.arrow?.y,$=L.arrow?.centerOffset!==0,[B,U]=x.useState();return(0,sU.b)(()=>{y&&U(window.getComputedStyle(y).zIndex)},[y]),(0,f.jsx)("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...A,transform:D?A.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:B,"--radix-popper-transform-origin":[L.transformOrigin?.x,L.transformOrigin?.y].join(" "),...L.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,f.jsx)(s0,{scope:s,placedSide:P,onArrowChange:N,arrowX:Z,arrowY:z,shouldHideArrow:$,children:(0,f.jsx)(tt.WV.div,{"data-side":P,"data-align":F,...g,ref:j,style:{...g.style,animation:D?void 0:"none"}})})})});s2.displayName=sQ;var s3="PopperArrow",s5={top:"bottom",right:"left",bottom:"top",left:"right"},s4=x.forwardRef(function(e,t){let{__scopePopper:s,...r}=e,a=s1(s3,s),n=s5[a.placedSide];return(0,f.jsx)("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[n]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:(0,f.jsx)(sB,{...r,ref:t,style:{...r.style,display:"block"}})})});function s6(e){return null!==e}s4.displayName=s3;var s9=e=>({name:"transformOrigin",options:e,fn(t){let{placement:s,rects:r,middlewareData:a}=t,n=a.arrow?.centerOffset!==0,i=n?0:e.arrowWidth,o=n?0:e.arrowHeight,[l,c]=s8(s),d={start:"0%",center:"50%",end:"100%"}[c],u=(a.arrow?.x??0)+i/2,h=(a.arrow?.y??0)+o/2,m="",p="";return"bottom"===l?(m=n?d:`${u}px`,p=`${-o}px`):"top"===l?(m=n?d:`${u}px`,p=`${r.floating.height+o}px`):"right"===l?(m=`${-o}px`,p=n?d:`${h}px`):"left"===l&&(m=`${r.floating.width+o}px`,p=n?d:`${h}px`),{data:{x:m,y:p}}}});function s8(e){let[t,s="center"]=e.split("-");return[t,s]}var s7=x.forwardRef((e,t)=>{let{container:s,...r}=e,[a,n]=x.useState(!1);(0,sU.b)(()=>n(!0),[]);let i=s||a&&globalThis?.document?.body;return i?e5.createPortal((0,f.jsx)(tt.WV.div,{...r,ref:t}),i):null});s7.displayName="Portal";var re=s(9008),rt=s(8469);function rs(e){let t=x.useRef({value:e,previous:e});return x.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var rr=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"});x.forwardRef((e,t)=>(0,f.jsx)(tt.WV.span,{...e,ref:t,style:{...rr,...e.style}})).displayName="VisuallyHidden";var ra=new WeakMap,rn=new WeakMap,ri={},ro=0,rl=function(e){return e&&(e.host||rl(e.parentNode))},rc=function(e,t,s,r){var a=(Array.isArray(e)?e:[e]).map(function(e){if(t.contains(e))return e;var s=rl(e);return s&&t.contains(s)?s:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e});ri[s]||(ri[s]=new WeakMap);var n=ri[s],i=[],o=new Set,l=new Set(a),c=function(e){!e||o.has(e)||(o.add(e),c(e.parentNode))};a.forEach(c);var d=function(e){!e||l.has(e)||Array.prototype.forEach.call(e.children,function(e){if(o.has(e))d(e);else try{var t=e.getAttribute(r),a=null!==t&&"false"!==t,l=(ra.get(e)||0)+1,c=(n.get(e)||0)+1;ra.set(e,l),n.set(e,c),i.push(e),1===l&&a&&rn.set(e,!0),1===c&&e.setAttribute(s,"true"),a||e.setAttribute(r,"true")}catch(t){console.error("aria-hidden: cannot operate on ",e,t)}})};return d(t),o.clear(),ro++,function(){i.forEach(function(e){var t=ra.get(e)-1,a=n.get(e)-1;ra.set(e,t),n.set(e,a),t||(rn.has(e)||e.removeAttribute(r),rn.delete(e)),a||e.removeAttribute(s)}),--ro||(ra=new WeakMap,ra=new WeakMap,rn=new WeakMap,ri={})}},rd=function(e,t,s){void 0===s&&(s="data-aria-hidden");var r,a=Array.from(Array.isArray(e)?e:[e]),n=t||(r=e,"undefined"==typeof document?null:(Array.isArray(r)?r[0]:r).ownerDocument.body);return n?(a.push.apply(a,Array.from(n.querySelectorAll("[aria-live], script"))),rc(a,n,s,"aria-hidden")):function(){return null}},ru=function(){return(ru=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function rh(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]]);return s}Object.create,Object.create;var rm=("function"==typeof SuppressedError&&SuppressedError,"right-scroll-bar-position"),rp="width-before-scroll-bar";function rf(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var rx="undefined"!=typeof window?x.useLayoutEffect:x.useEffect,rg=new WeakMap;function rv(e){return e}var ry=function(e){void 0===e&&(e={});var t,s,r,a=(void 0===t&&(t=rv),s=[],r=!1,{read:function(){if(r)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:null},useMedium:function(e){var a=t(e,r);return s.push(a),function(){s=s.filter(function(e){return e!==a})}},assignSyncMedium:function(e){for(r=!0;s.length;){var t=s;s=[],t.forEach(e)}s={push:function(t){return e(t)},filter:function(){return s}}},assignMedium:function(e){r=!0;var t=[];if(s.length){var a=s;s=[],a.forEach(e),t=s}var n=function(){var s=t;t=[],s.forEach(e)},i=function(){return Promise.resolve().then(n)};i(),s={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),s}}}});return a.options=ru({async:!0,ssr:!1},e),a}(),rb=function(){},rj=x.forwardRef(function(e,t){var s,r,a,n,i=x.useRef(null),o=x.useState({onScrollCapture:rb,onWheelCapture:rb,onTouchMoveCapture:rb}),l=o[0],c=o[1],d=e.forwardProps,u=e.children,h=e.className,m=e.removeScrollBar,p=e.enabled,f=e.shards,g=e.sideCar,v=e.noRelative,y=e.noIsolation,b=e.inert,j=e.allowPinchZoom,w=e.as,N=e.gapMode,_=rh(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=(s=[i,t],r=function(e){return s.forEach(function(t){return rf(t,e)})},(a=(0,x.useState)(function(){return{value:null,callback:r,facade:{get current(){return a.value},set current(value){var e=a.value;e!==value&&(a.value=value,a.callback(value,e))}}}})[0]).callback=r,n=a.facade,rx(function(){var e=rg.get(n);if(e){var t=new Set(e),r=new Set(s),a=n.current;t.forEach(function(e){r.has(e)||rf(e,null)}),r.forEach(function(e){t.has(e)||rf(e,a)})}rg.set(n,s)},[s]),n),C=ru(ru({},_),l);return x.createElement(x.Fragment,null,p&&x.createElement(g,{sideCar:ry,removeScrollBar:m,shards:f,noRelative:v,noIsolation:y,inert:b,setCallbacks:c,allowPinchZoom:!!j,lockRef:i,gapMode:N}),d?x.cloneElement(x.Children.only(u),ru(ru({},C),{ref:k})):x.createElement(void 0===w?"div":w,ru({},C,{className:h,ref:k}),u))});rj.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},rj.classNames={fullWidth:rp,zeroRight:rm};var rw=function(e){var t=e.sideCar,s=rh(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw Error("Sidecar medium not found");return x.createElement(r,ru({},s))};rw.isSideCarExport=!0;var rN=function(){var e=0,t=null;return{add:function(r){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=h||s.nc;return t&&e.setAttribute("nonce",t),e}())){var a,n;(a=t).styleSheet?a.styleSheet.cssText=r:a.appendChild(document.createTextNode(r)),n=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(n)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},r_=function(){var e=rN();return function(t,s){x.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&s])}},rk=function(){var e=r_();return function(t){return e(t.styles,t.dynamic),null}},rC={left:0,top:0,right:0,gap:0},rS=function(e){return parseInt(e||"",10)||0},rE=function(e){var t=window.getComputedStyle(document.body),s=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],a=t["padding"===e?"paddingRight":"marginRight"];return[rS(s),rS(r),rS(a)]},rT=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return rC;var t=rE(e),s=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-s+t[2]-t[0])}},rO=rk(),rI="data-scroll-locked",rA=function(e,t,s,r){var a=e.left,n=e.top,i=e.right,o=e.gap;return void 0===s&&(s="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(o,"px ").concat(r,";\n  }\n  body[").concat(rI,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===s&&"\n    padding-left: ".concat(a,"px;\n    padding-top: ").concat(n,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(r,";\n    "),"padding"===s&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(rm," {\n    right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(rp," {\n    margin-right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(rm," .").concat(rm," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(rp," .").concat(rp," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(rI,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},rR=function(){var e=parseInt(document.body.getAttribute(rI)||"0",10);return isFinite(e)?e:0},rD=function(){x.useEffect(function(){return document.body.setAttribute(rI,(rR()+1).toString()),function(){var e=rR()-1;e<=0?document.body.removeAttribute(rI):document.body.setAttribute(rI,e.toString())}},[])},rL=function(e){var t=e.noRelative,s=e.noImportant,r=e.gapMode,a=void 0===r?"margin":r;rD();var n=x.useMemo(function(){return rT(a)},[a]);return x.createElement(rO,{styles:rA(n,!t,a,s?"":"!important")})},rP=!1;if("undefined"!=typeof window)try{var rF=Object.defineProperty({},"passive",{get:function(){return rP=!0,!0}});window.addEventListener("test",rF,rF),window.removeEventListener("test",rF,rF)}catch(e){rP=!1}var rM=!!rP&&{passive:!1},rZ=function(e,t){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return"hidden"!==s[t]&&!(s.overflowY===s.overflowX&&"TEXTAREA"!==e.tagName&&"visible"===s[t])},rz=function(e,t){var s=t.ownerDocument,r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),r$(e,r)){var a=rB(e,r);if(a[1]>a[2])return!0}r=r.parentNode}while(r&&r!==s.body);return!1},r$=function(e,t){return"v"===e?rZ(t,"overflowY"):rZ(t,"overflowX")},rB=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},rU=function(e,t,s,r,a){var n,i=(n=window.getComputedStyle(t).direction,"h"===e&&"rtl"===n?-1:1),o=i*r,l=s.target,c=t.contains(l),d=!1,u=o>0,h=0,m=0;do{if(!l)break;var p=rB(e,l),f=p[0],x=p[1]-p[2]-i*f;(f||x)&&r$(e,l)&&(h+=x,m+=f);var g=l.parentNode;l=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return u&&(a&&1>Math.abs(h)||!a&&o>h)?d=!0:!u&&(a&&1>Math.abs(m)||!a&&-o>m)&&(d=!0),d},rW=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},rV=function(e){return[e.deltaX,e.deltaY]},rq=function(e){return e&&"current"in e?e.current:e},rH=0,rG=[];let rY=(i=function(e){var t=x.useRef([]),s=x.useRef([0,0]),r=x.useRef(),a=x.useState(rH++)[0],n=x.useState(rk)[0],i=x.useRef(e);x.useEffect(function(){i.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var t=(function(e,t,s){if(s||2==arguments.length)for(var r,a=0,n=t.length;a<n;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))})([e.lockRef.current],(e.shards||[]).map(rq),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var o=x.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var a,n=rW(e),o=s.current,l="deltaX"in e?e.deltaX:o[0]-n[0],c="deltaY"in e?e.deltaY:o[1]-n[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var h=rz(u,d);if(!h)return!0;if(h?a=u:(a="v"===u?"h":"v",h=rz(u,d)),!h)return!1;if(!r.current&&"changedTouches"in e&&(l||c)&&(r.current=a),!a)return!0;var m=r.current||a;return rU(m,t,e,"h"===m?l:c,!0)},[]),l=x.useCallback(function(e){if(rG.length&&rG[rG.length-1]===n){var s="deltaY"in e?rV(e):rW(e),r=t.current.filter(function(t){var r;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(r=t.delta)[0]===s[0]&&r[1]===s[1]})[0];if(r&&r.should){e.cancelable&&e.preventDefault();return}if(!r){var a=(i.current.shards||[]).map(rq).filter(Boolean).filter(function(t){return t.contains(e.target)});(a.length>0?o(e,a[0]):!i.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),c=x.useCallback(function(e,s,r,a){var n={name:e,delta:s,target:r,should:a,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(r)};t.current.push(n),setTimeout(function(){t.current=t.current.filter(function(e){return e!==n})},1)},[]),d=x.useCallback(function(e){s.current=rW(e),r.current=void 0},[]),u=x.useCallback(function(t){c(t.type,rV(t),t.target,o(t,e.lockRef.current))},[]),h=x.useCallback(function(t){c(t.type,rW(t),t.target,o(t,e.lockRef.current))},[]);x.useEffect(function(){return rG.push(n),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:h}),document.addEventListener("wheel",l,rM),document.addEventListener("touchmove",l,rM),document.addEventListener("touchstart",d,rM),function(){rG=rG.filter(function(e){return e!==n}),document.removeEventListener("wheel",l,rM),document.removeEventListener("touchmove",l,rM),document.removeEventListener("touchstart",d,rM)}},[]);var m=e.removeScrollBar,p=e.inert;return x.createElement(x.Fragment,null,p?x.createElement(n,{styles:"\n  .block-interactivity-".concat(a," {pointer-events: none;}\n  .allow-interactivity-").concat(a," {pointer-events: all;}\n")}):null,m?x.createElement(rL,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},ry.useMedium(i),rw);var rX=x.forwardRef(function(e,t){return x.createElement(rj,ru({},e,{ref:t,sideCar:rY}))});rX.classNames=rj.classNames;var rK=[" ","Enter","ArrowUp","ArrowDown"],rJ=[" ","Enter"],rQ="Select",[r0,r1,r2]=(0,e9.B)(rQ),[r3,r5]=(0,e7.b)(rQ,[r2,sH]),r4=sH(),[r6,r9]=r3(rQ),[r8,r7]=r3(rQ),ae=e=>{let{__scopeSelect:t,children:s,open:r,defaultOpen:a,onOpenChange:n,value:i,defaultValue:o,onValueChange:l,dir:c,name:d,autoComplete:u,disabled:h,required:m,form:p}=e,g=r4(t),[v,y]=x.useState(null),[b,j]=x.useState(null),[w,N]=x.useState(!1),_=(0,te.gm)(c),[k,C]=(0,rt.T)({prop:r,defaultProp:a??!1,onChange:n,caller:rQ}),[S,E]=(0,rt.T)({prop:i,defaultProp:o,onChange:l,caller:rQ}),T=x.useRef(null),O=!v||p||!!v.closest("form"),[I,A]=x.useState(new Set),R=Array.from(I).map(e=>e.props.value).join(";");return(0,f.jsx)(sX,{...g,children:(0,f.jsxs)(r6,{required:m,scope:t,trigger:v,onTriggerChange:y,valueNode:b,onValueNodeChange:j,valueNodeHasChildren:w,onValueNodeHasChildrenChange:N,contentId:(0,ty.M)(),value:S,onValueChange:E,open:k,onOpenChange:C,dir:_,triggerPointerDownPosRef:T,disabled:h,children:[(0,f.jsx)(r0.Provider,{scope:t,children:(0,f.jsx)(r8,{scope:e.__scopeSelect,onNativeOptionAdd:x.useCallback(e=>{A(t=>new Set(t).add(e))},[]),onNativeOptionRemove:x.useCallback(e=>{A(t=>{let s=new Set(t);return s.delete(e),s})},[]),children:s})}),O?(0,f.jsxs)(aF,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:u,value:S,onChange:e=>E(e.target.value),disabled:h,form:p,children:[void 0===S?(0,f.jsx)("option",{value:""}):null,Array.from(I)]},R):null]})})};ae.displayName=rQ;var at="SelectTrigger",as=x.forwardRef((e,t)=>{let{__scopeSelect:s,disabled:r=!1,...a}=e,n=r4(s),i=r9(at,s),o=i.disabled||r,l=(0,e8.e)(t,i.onTriggerChange),c=r1(s),d=x.useRef("touch"),[u,h,m]=aZ(e=>{let t=c().filter(e=>!e.disabled),s=t.find(e=>e.value===i.value),r=az(t,e,s);void 0!==r&&i.onValueChange(r.value)}),p=e=>{o||(i.onOpenChange(!0),m()),e&&(i.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,f.jsx)(sJ,{asChild:!0,...n,children:(0,f.jsx)(tt.WV.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":aM(i.value)?"":void 0,...a,ref:l,onClick:(0,e6.Mj)(a.onClick,e=>{e.currentTarget.focus(),"mouse"!==d.current&&p(e)}),onPointerDown:(0,e6.Mj)(a.onPointerDown,e=>{d.current=e.pointerType;let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(p(e),e.preventDefault())}),onKeyDown:(0,e6.Mj)(a.onKeyDown,e=>{let t=""!==u.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||h(e.key),(!t||" "!==e.key)&&rK.includes(e.key)&&(p(),e.preventDefault())})})})});as.displayName=at;var ar="SelectValue",aa=x.forwardRef((e,t)=>{let{__scopeSelect:s,className:r,style:a,children:n,placeholder:i="",...o}=e,l=r9(ar,s),{onValueNodeHasChildrenChange:c}=l,d=void 0!==n,u=(0,e8.e)(t,l.onValueNodeChange);return(0,sU.b)(()=>{c(d)},[c,d]),(0,f.jsx)(tt.WV.span,{...o,ref:u,style:{pointerEvents:"none"},children:aM(l.value)?(0,f.jsx)(f.Fragment,{children:i}):n})});aa.displayName=ar;var an=x.forwardRef((e,t)=>{let{__scopeSelect:s,children:r,...a}=e;return(0,f.jsx)(tt.WV.span,{"aria-hidden":!0,...a,ref:t,children:r||"▼"})});an.displayName="SelectIcon";var ai=e=>(0,f.jsx)(s7,{asChild:!0,...e});ai.displayName="SelectPortal";var ao="SelectContent",al=x.forwardRef((e,t)=>{let s=r9(ao,e.__scopeSelect),[r,a]=x.useState();return((0,sU.b)(()=>{a(new DocumentFragment)},[]),s.open)?(0,f.jsx)(ah,{...e,ref:t}):r?e5.createPortal((0,f.jsx)(ac,{scope:e.__scopeSelect,children:(0,f.jsx)(r0.Slot,{scope:e.__scopeSelect,children:(0,f.jsx)("div",{children:e.children})})}),r):null});al.displayName=ao;var[ac,ad]=r3(ao),au=(0,re.Z8)("SelectContent.RemoveScroll"),ah=x.forwardRef((e,t)=>{let{__scopeSelect:s,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:n,onPointerDownOutside:i,side:o,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:h,collisionPadding:m,sticky:p,hideWhenDetached:g,avoidCollisions:v,...y}=e,b=r9(ao,s),[j,w]=x.useState(null),[N,_]=x.useState(null),k=(0,e8.e)(t,e=>w(e)),[C,S]=x.useState(null),[E,T]=x.useState(null),O=r1(s),[I,A]=x.useState(!1),R=x.useRef(!1);x.useEffect(()=>{if(j)return rd(j)},[j]),x.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??tc()),document.body.insertAdjacentElement("beforeend",e[1]??tc()),tl++,()=>{1===tl&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),tl--}},[]);let D=x.useCallback(e=>{let[t,...s]=O().map(e=>e.ref.current),[r]=s.slice(-1),a=document.activeElement;for(let s of e)if(s===a||(s?.scrollIntoView({block:"nearest"}),s===t&&N&&(N.scrollTop=0),s===r&&N&&(N.scrollTop=N.scrollHeight),s?.focus(),document.activeElement!==a))return},[O,N]),L=x.useCallback(()=>D([C,j]),[D,C,j]);x.useEffect(()=>{I&&L()},[I,L]);let{onOpenChange:P,triggerPointerDownPosRef:F}=b;x.useEffect(()=>{if(j){let e={x:0,y:0},t=t=>{e={x:Math.abs(Math.round(t.pageX)-(F.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(F.current?.y??0))}},s=s=>{e.x<=10&&e.y<=10?s.preventDefault():j.contains(s.target)||P(!1),document.removeEventListener("pointermove",t),F.current=null};return null!==F.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",s,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",s,{capture:!0})}}},[j,P,F]),x.useEffect(()=>{let e=()=>P(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[P]);let[M,Z]=aZ(e=>{let t=O().filter(e=>!e.disabled),s=t.find(e=>e.ref.current===document.activeElement),r=az(t,e,s);r&&setTimeout(()=>r.ref.current.focus())}),z=x.useCallback((e,t,s)=>{let r=!R.current&&!s;(void 0!==b.value&&b.value===t||r)&&(S(e),r&&(R.current=!0))},[b.value]),$=x.useCallback(()=>j?.focus(),[j]),B=x.useCallback((e,t,s)=>{let r=!R.current&&!s;(void 0!==b.value&&b.value===t||r)&&T(e)},[b.value]),U="popper"===r?ap:am,W=U===ap?{side:o,sideOffset:l,align:c,alignOffset:d,arrowPadding:u,collisionBoundary:h,collisionPadding:m,sticky:p,hideWhenDetached:g,avoidCollisions:v}:{};return(0,f.jsx)(ac,{scope:s,content:j,viewport:N,onViewportChange:_,itemRefCallback:z,selectedItem:C,onItemLeave:$,itemTextRefCallback:B,focusSelectedItem:L,selectedItemText:E,position:r,isPositioned:I,searchRef:M,children:(0,f.jsx)(rX,{as:au,allowPinchZoom:!0,children:(0,f.jsx)(tm,{asChild:!0,trapped:b.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:(0,e6.Mj)(a,e=>{b.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:(0,f.jsx)(tn,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:(0,f.jsx)(U,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:e=>e.preventDefault(),...y,...W,onPlaced:()=>A(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:(0,e6.Mj)(y.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||Z(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=O().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){let s=e.target,r=t.indexOf(s);t=t.slice(r+1)}setTimeout(()=>D(t)),e.preventDefault()}})})})})})})});ah.displayName="SelectContentImpl";var am=x.forwardRef((e,t)=>{let{__scopeSelect:s,onPlaced:r,...a}=e,n=r9(ao,s),i=ad(ao,s),[o,l]=x.useState(null),[c,d]=x.useState(null),u=(0,e8.e)(t,e=>d(e)),h=r1(s),m=x.useRef(!1),p=x.useRef(!0),{viewport:g,selectedItem:v,selectedItemText:y,focusSelectedItem:b}=i,j=x.useCallback(()=>{if(n.trigger&&n.valueNode&&o&&c&&g&&v&&y){let e=n.trigger.getBoundingClientRect(),t=c.getBoundingClientRect(),s=n.valueNode.getBoundingClientRect(),a=y.getBoundingClientRect();if("rtl"!==n.dir){let r=a.left-t.left,n=s.left-r,i=e.left-n,l=e.width+i,c=Math.max(l,t.width),d=e4(n,[10,Math.max(10,window.innerWidth-10-c)]);o.style.minWidth=l+"px",o.style.left=d+"px"}else{let r=t.right-a.right,n=window.innerWidth-s.right-r,i=window.innerWidth-e.right-n,l=e.width+i,c=Math.max(l,t.width),d=e4(n,[10,Math.max(10,window.innerWidth-10-c)]);o.style.minWidth=l+"px",o.style.right=d+"px"}let i=h(),l=window.innerHeight-20,d=g.scrollHeight,u=window.getComputedStyle(c),p=parseInt(u.borderTopWidth,10),f=parseInt(u.paddingTop,10),x=parseInt(u.borderBottomWidth,10),b=p+f+d+parseInt(u.paddingBottom,10)+x,j=Math.min(5*v.offsetHeight,b),w=window.getComputedStyle(g),N=parseInt(w.paddingTop,10),_=parseInt(w.paddingBottom,10),k=e.top+e.height/2-10,C=v.offsetHeight/2,S=p+f+(v.offsetTop+C);if(S<=k){let e=i.length>0&&v===i[i.length-1].ref.current;o.style.bottom="0px";let t=c.clientHeight-g.offsetTop-g.offsetHeight;o.style.height=S+Math.max(l-k,C+(e?_:0)+t+x)+"px"}else{let e=i.length>0&&v===i[0].ref.current;o.style.top="0px";let t=Math.max(k,p+g.offsetTop+(e?N:0)+C);o.style.height=t+(b-S)+"px",g.scrollTop=S-k+g.offsetTop}o.style.margin="10px 0",o.style.minHeight=j+"px",o.style.maxHeight=l+"px",r?.(),requestAnimationFrame(()=>m.current=!0)}},[h,n.trigger,n.valueNode,o,c,g,v,y,n.dir,r]);(0,sU.b)(()=>j(),[j]);let[w,N]=x.useState();(0,sU.b)(()=>{c&&N(window.getComputedStyle(c).zIndex)},[c]);let _=x.useCallback(e=>{e&&!0===p.current&&(j(),b?.(),p.current=!1)},[j,b]);return(0,f.jsx)(af,{scope:s,contentWrapper:o,shouldExpandOnScrollRef:m,onScrollButtonChange:_,children:(0,f.jsx)("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:(0,f.jsx)(tt.WV.div,{...a,ref:u,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});am.displayName="SelectItemAlignedPosition";var ap=x.forwardRef((e,t)=>{let{__scopeSelect:s,align:r="start",collisionPadding:a=10,...n}=e,i=r4(s);return(0,f.jsx)(s2,{...i,...n,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...n.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ap.displayName="SelectPopperPosition";var[af,ax]=r3(ao,{}),ag="SelectViewport",av=x.forwardRef((e,t)=>{let{__scopeSelect:s,nonce:r,...a}=e,n=ad(ag,s),i=ax(ag,s),o=(0,e8.e)(t,n.onViewportChange),l=x.useRef(0);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),(0,f.jsx)(r0.Slot,{scope:s,children:(0,f.jsx)(tt.WV.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:(0,e6.Mj)(a.onScroll,e=>{let t=e.currentTarget,{contentWrapper:s,shouldExpandOnScrollRef:r}=i;if(r?.current&&s){let e=Math.abs(l.current-t.scrollTop);if(e>0){let r=window.innerHeight-20,a=Math.max(parseFloat(s.style.minHeight),parseFloat(s.style.height));if(a<r){let n=a+e,i=Math.min(r,n),o=n-i;s.style.height=i+"px","0px"===s.style.bottom&&(t.scrollTop=o>0?o:0,s.style.justifyContent="flex-end")}}}l.current=t.scrollTop})})})]})});av.displayName=ag;var ay="SelectGroup",[ab,aj]=r3(ay);x.forwardRef((e,t)=>{let{__scopeSelect:s,...r}=e,a=(0,ty.M)();return(0,f.jsx)(ab,{scope:s,id:a,children:(0,f.jsx)(tt.WV.div,{role:"group","aria-labelledby":a,...r,ref:t})})}).displayName=ay;var aw="SelectLabel";x.forwardRef((e,t)=>{let{__scopeSelect:s,...r}=e,a=aj(aw,s);return(0,f.jsx)(tt.WV.div,{id:a.id,...r,ref:t})}).displayName=aw;var aN="SelectItem",[a_,ak]=r3(aN),aC=x.forwardRef((e,t)=>{let{__scopeSelect:s,value:r,disabled:a=!1,textValue:n,...i}=e,o=r9(aN,s),l=ad(aN,s),c=o.value===r,[d,u]=x.useState(n??""),[h,m]=x.useState(!1),p=(0,e8.e)(t,e=>l.itemRefCallback?.(e,r,a)),g=(0,ty.M)(),v=x.useRef("touch"),y=()=>{a||(o.onValueChange(r),o.onOpenChange(!1))};if(""===r)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,f.jsx)(a_,{scope:s,value:r,disabled:a,textId:g,isSelected:c,onItemTextChange:x.useCallback(e=>{u(t=>t||(e?.textContent??"").trim())},[]),children:(0,f.jsx)(r0.ItemSlot,{scope:s,value:r,disabled:a,textValue:d,children:(0,f.jsx)(tt.WV.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...i,ref:p,onFocus:(0,e6.Mj)(i.onFocus,()=>m(!0)),onBlur:(0,e6.Mj)(i.onBlur,()=>m(!1)),onClick:(0,e6.Mj)(i.onClick,()=>{"mouse"!==v.current&&y()}),onPointerUp:(0,e6.Mj)(i.onPointerUp,()=>{"mouse"===v.current&&y()}),onPointerDown:(0,e6.Mj)(i.onPointerDown,e=>{v.current=e.pointerType}),onPointerMove:(0,e6.Mj)(i.onPointerMove,e=>{v.current=e.pointerType,a?l.onItemLeave?.():"mouse"===v.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,e6.Mj)(i.onPointerLeave,e=>{e.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:(0,e6.Mj)(i.onKeyDown,e=>{l.searchRef?.current!==""&&" "===e.key||(rJ.includes(e.key)&&y()," "===e.key&&e.preventDefault())})})})})});aC.displayName=aN;var aS="SelectItemText",aE=x.forwardRef((e,t)=>{let{__scopeSelect:s,className:r,style:a,...n}=e,i=r9(aS,s),o=ad(aS,s),l=ak(aS,s),c=r7(aS,s),[d,u]=x.useState(null),h=(0,e8.e)(t,e=>u(e),l.onItemTextChange,e=>o.itemTextRefCallback?.(e,l.value,l.disabled)),m=d?.textContent,p=x.useMemo(()=>(0,f.jsx)("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:v}=c;return(0,sU.b)(()=>(g(p),()=>v(p)),[g,v,p]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(tt.WV.span,{id:l.textId,...n,ref:h}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?e5.createPortal(n.children,i.valueNode):null]})});aE.displayName=aS;var aT="SelectItemIndicator",aO=x.forwardRef((e,t)=>{let{__scopeSelect:s,...r}=e;return ak(aT,s).isSelected?(0,f.jsx)(tt.WV.span,{"aria-hidden":!0,...r,ref:t}):null});aO.displayName=aT;var aI="SelectScrollUpButton",aA=x.forwardRef((e,t)=>{let s=ad(aI,e.__scopeSelect),r=ax(aI,e.__scopeSelect),[a,n]=x.useState(!1),i=(0,e8.e)(t,r.onScrollButtonChange);return(0,sU.b)(()=>{if(s.viewport&&s.isPositioned){let e=function(){n(t.scrollTop>0)},t=s.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[s.viewport,s.isPositioned]),a?(0,f.jsx)(aL,{...e,ref:i,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=s;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});aA.displayName=aI;var aR="SelectScrollDownButton",aD=x.forwardRef((e,t)=>{let s=ad(aR,e.__scopeSelect),r=ax(aR,e.__scopeSelect),[a,n]=x.useState(!1),i=(0,e8.e)(t,r.onScrollButtonChange);return(0,sU.b)(()=>{if(s.viewport&&s.isPositioned){let e=function(){let e=t.scrollHeight-t.clientHeight;n(Math.ceil(t.scrollTop)<e)},t=s.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[s.viewport,s.isPositioned]),a?(0,f.jsx)(aL,{...e,ref:i,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=s;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});aD.displayName=aR;var aL=x.forwardRef((e,t)=>{let{__scopeSelect:s,onAutoScroll:r,...a}=e,n=ad("SelectScrollButton",s),i=x.useRef(null),o=r1(s),l=x.useCallback(()=>{null!==i.current&&(window.clearInterval(i.current),i.current=null)},[]);return x.useEffect(()=>()=>l(),[l]),(0,sU.b)(()=>{let e=o().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[o]),(0,f.jsx)(tt.WV.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:(0,e6.Mj)(a.onPointerDown,()=>{null===i.current&&(i.current=window.setInterval(r,50))}),onPointerMove:(0,e6.Mj)(a.onPointerMove,()=>{n.onItemLeave?.(),null===i.current&&(i.current=window.setInterval(r,50))}),onPointerLeave:(0,e6.Mj)(a.onPointerLeave,()=>{l()})})});x.forwardRef((e,t)=>{let{__scopeSelect:s,...r}=e;return(0,f.jsx)(tt.WV.div,{"aria-hidden":!0,...r,ref:t})}).displayName="SelectSeparator";var aP="SelectArrow";x.forwardRef((e,t)=>{let{__scopeSelect:s,...r}=e,a=r4(s),n=r9(aP,s),i=ad(aP,s);return n.open&&"popper"===i.position?(0,f.jsx)(s4,{...a,...r,ref:t}):null}).displayName=aP;var aF=x.forwardRef(({__scopeSelect:e,value:t,...s},r)=>{let a=x.useRef(null),n=(0,e8.e)(r,a),i=rs(t);return x.useEffect(()=>{let e=a.current;if(!e)return;let s=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(i!==t&&s){let r=new Event("change",{bubbles:!0});s.call(e,t),e.dispatchEvent(r)}},[i,t]),(0,f.jsx)(tt.WV.select,{...s,style:{...rr,...s.style},ref:n,defaultValue:t})});function aM(e){return""===e||void 0===e}function aZ(e){let t=(0,ts.W)(e),s=x.useRef(""),r=x.useRef(0),a=x.useCallback(e=>{let a=s.current+e;t(a),function e(t){s.current=t,window.clearTimeout(r.current),""!==t&&(r.current=window.setTimeout(()=>e(""),1e3))}(a)},[t]),n=x.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,a,n]}function az(e,t,s){var r;let a=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,n=(r=Math.max(s?e.indexOf(s):-1,0),e.map((t,s)=>e[(r+s)%e.length]));1===a.length&&(n=n.filter(e=>e!==s));let i=n.find(e=>e.textValue.toLowerCase().startsWith(a.toLowerCase()));return i!==s?i:void 0}aF.displayName="SelectBubbleInput";let a$=(0,_.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),aB=(0,_.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),aU=(0,_.Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var aW=s(5008);function aV({...e}){return f.jsx(ae,{"data-slot":"select",...e})}function aq({...e}){return f.jsx(aa,{"data-slot":"select-value",...e})}function aH({className:e,size:t="default",children:s,...r}){return(0,f.jsxs)(as,{"data-slot":"select-trigger","data-size":t,className:(0,aW.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[s,f.jsx(an,{asChild:!0,children:f.jsx(a$,{className:"size-4 opacity-50"})})]})}function aG({className:e,children:t,position:s="popper",...r}){return f.jsx(ai,{children:(0,f.jsxs)(al,{"data-slot":"select-content",className:(0,aW.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...r,children:[f.jsx(aX,{}),f.jsx(av,{className:(0,aW.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),f.jsx(aK,{})]})})}function aY({className:e,children:t,...s}){return(0,f.jsxs)(aC,{"data-slot":"select-item",className:(0,aW.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...s,children:[f.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:f.jsx(aO,{children:f.jsx(aB,{className:"size-4"})})}),f.jsx(aE,{children:t})]})}function aX({className:e,...t}){return f.jsx(aA,{"data-slot":"select-scroll-up-button",className:(0,aW.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:f.jsx(aU,{className:"size-4"})})}function aK({className:e,...t}){return f.jsx(aD,{"data-slot":"select-scroll-down-button",className:(0,aW.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:f.jsx(a$,{className:"size-4"})})}let aJ=(0,_.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var aQ=s(8749),a0=s(7246);let a1=eQ().email();function a2({onSubmit:e}){let[t,s]=(0,x.useState)({name:"",gender:"",age:"",idNumber:"",phone:"",nationality:"",email:""}),[r,a]=(0,x.useState)({}),[n,i]=(0,x.useState)([]),{connected:o,publicKey:l}=(0,I.K)(),{isLoading:c,error:d,result:u,isSuccess:h,registerTourist:m,getExplorerUrl:p,resetState:y}=(0,a0.j)(),_=()=>{let e={};return t.name?t.name.length<2&&(e.name="Name must be at least 2 characters."):e.name="Full Name is required.",t.gender||(e.gender="Please select a gender."),t.age?(isNaN(Number(t.age))||0>=Number(t.age)||Number(t.age)>120)&&(e.age="Please enter a valid age."):e.age="Age is required.",t.nationality||(e.nationality="Country of Origin is required."),t.idNumber||(e.idNumber="ID Number is required."),t.phone?/^\+?\d{4,15}$/.test(t.phone)||(e.phone="Please enter a valid phone number."):e.phone="Phone number is required.",t.email&&!a1.safeParse(t.email).success&&(e.email="Please enter a valid email address."),e},k=async s=>{s.preventDefault();let r=_();if(Object.keys(r).length>0){a(r);return}if(o&&l){a({}),y();try{let s={digitalId:"",name:t.name,gender:t.gender,age:Number.parseInt(t.age),idNumber:t.idNumber,phone:t.phone,nationality:t.nationality,email:t.email||void 0,registrationTimestamp:Date.now()};console.log("[v0] Submitting tourist data to blockchain:",s);let r=await m(s);r&&setTimeout(()=>{e({...t,blockchainData:{digitalId:r.touristAccountAddress,transactionSignature:r.signature,slot:r.slot,blockTime:r.blockTime,touristAccountAddress:r.touristAccountAddress}})},2e3)}catch(e){console.error("[v0] Blockchain submission failed:",e)}}},S=(e,t)=>{let n=t;"phone"===e&&(n=(n=n.replace(/[^\d+]/g,"")).includes("+")?"+"+n.replace(/\+/g,"").replace(/\D/g,""):n.replace(/\D/g,"")),s(t=>({...t,[e]:n})),r[e]&&a(t=>({...t,[e]:void 0}))};return f.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-primary/5 to-accent/5",children:(0,f.jsxs)(v.Zb,{className:"w-full max-w-md animate-in fade-in-0 slide-in-from-bottom-4 duration-500",children:[(0,f.jsxs)(v.Ol,{className:"text-center space-y-2",children:[f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:f.jsx(aJ,{className:"h-8 w-8 text-primary"})})}),f.jsx(v.ll,{className:"text-2xl",children:"Personal Information"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Please provide your details for safety monitoring"}),o&&l&&(0,f.jsxs)("div",{className:"p-3 bg-green-50 dark:bg-green-950/30 rounded-lg border border-green-200 dark:border-green-800",children:[(0,f.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[f.jsx(j.Z,{className:"h-4 w-4 text-green-600"}),f.jsx("span",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Wallet Connected"})]}),(0,f.jsxs)("div",{className:"text-xs text-green-700 dark:text-green-300 mt-1",children:[l.slice(0,4),"...",l.slice(-4)]})]})]}),f.jsx(v.aY,{children:(0,f.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[d&&(0,f.jsxs)(b.bZ,{variant:"destructive",children:[f.jsx(w.Z,{className:"h-4 w-4"}),f.jsx(b.X,{children:d})]}),h&&u&&(0,f.jsxs)(b.bZ,{className:"border-green-200 bg-green-50 dark:bg-green-950/30",children:[f.jsx(C.Z,{className:"h-4 w-4 text-green-600"}),f.jsx(b.X,{className:"text-green-800 dark:text-green-200",children:(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx("p",{children:"Data successfully submitted to Solana blockchain!"}),(0,f.jsxs)("div",{className:"flex items-center space-x-2 text-xs",children:[f.jsx("span",{children:"Transaction:"}),(0,f.jsxs)("a",{href:p(u.signature),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline inline-flex items-center",children:[u.signature.slice(0,8),"...",f.jsx(N.Z,{className:"h-3 w-3 ml-1"})]})]})]})})]}),(0,f.jsxs)("div",{className:"space-y-3",children:[f.jsx(e3._,{htmlFor:"name",children:"Full Name"}),f.jsx(e2.I,{id:"name",placeholder:"Enter your full name",value:t.name,onChange:e=>S("name",e.target.value),disabled:c}),r.name&&f.jsx("p",{className:"text-sm text-destructive",children:r.name})]}),(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,f.jsxs)("div",{className:"space-y-3",children:[f.jsx(e3._,{htmlFor:"gender",children:"Gender"}),(0,f.jsxs)(aV,{value:t.gender,onValueChange:e=>S("gender",e),disabled:c,children:[f.jsx(aH,{id:"gender",children:f.jsx(aq,{placeholder:"Select"})}),(0,f.jsxs)(aG,{children:[f.jsx(aY,{value:"male",className:"hover:bg-blue-700 focus:bg-blue-800 text-white",children:"Male"}),f.jsx(aY,{value:"female",className:"hover:bg-blue-700 focus:bg-blue-800 text-white",children:"Female"}),f.jsx(aY,{value:"other",className:"hover:bg-blue-700 focus:bg-blue-800 text-white",children:"Other"})]})]}),r.gender&&f.jsx("p",{className:"text-sm text-destructive",children:r.gender})]}),(0,f.jsxs)("div",{className:"space-y-3",children:[f.jsx(e3._,{htmlFor:"age",children:"Age"}),f.jsx(e2.I,{id:"age",type:"number",placeholder:"Age",value:t.age,onChange:e=>S("age",e.target.value),disabled:c}),r.age&&f.jsx("p",{className:"text-sm text-destructive",children:r.age})]})]}),(0,f.jsxs)("div",{className:"space-y-3",children:[f.jsx(e3._,{htmlFor:"nationality",children:"Country of Origin"}),(0,f.jsxs)(aV,{value:t.nationality,onValueChange:e=>S("nationality",e),disabled:0===n.length||c,children:[f.jsx(aH,{id:"nationality",children:f.jsx(aq,{placeholder:0===n.length?"Loading countries...":"Select your country"})}),f.jsx(aG,{className:"max-h-60 overflow-auto",children:n.map(e=>f.jsx(aY,{value:e,className:"hover:bg-blue-700 focus:bg-blue-800 text-white",children:e},e))})]}),r.nationality&&f.jsx("p",{className:"text-sm text-destructive",children:r.nationality})]}),(0,f.jsxs)("div",{className:"space-y-3",children:[f.jsx(e3._,{htmlFor:"idNumber",children:"Passport/Aadhaar Number"}),f.jsx(e2.I,{id:"idNumber",placeholder:"Enter ID number",value:t.idNumber,onChange:e=>S("idNumber",e.target.value),disabled:c}),r.idNumber&&f.jsx("p",{className:"text-sm text-destructive",children:r.idNumber})]}),(0,f.jsxs)("div",{className:"space-y-3",children:[f.jsx(e3._,{htmlFor:"phone",children:"Phone Number"}),f.jsx(e2.I,{id:"phone",type:"tel",placeholder:"+91 XXXXX XXXXX",value:t.phone,onChange:e=>S("phone",e.target.value),disabled:c}),r.phone&&f.jsx("p",{className:"text-sm text-destructive",children:r.phone})]}),(0,f.jsxs)("div",{className:"space-y-3",children:[f.jsx(e3._,{htmlFor:"email",children:"Email Address (Optional)"}),f.jsx(e2.I,{id:"email",type:"email",placeholder:"your.email@example.com",value:t.email,onChange:e=>S("email",e.target.value),disabled:c}),r.email&&f.jsx("p",{className:"text-sm text-destructive",children:r.email})]}),(0,f.jsxs)("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/30 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[f.jsx(j.Z,{className:"h-4 w-4 text-blue-600"}),f.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Blockchain Security"})]}),f.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:"Your data will be securely stored on Solana Devnet blockchain for verification and privacy protection."}),(0,f.jsxs)("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:[f.jsx("strong",{children:"Note:"})," You'll need to approve a blockchain transaction (no cost) to complete registration."]})]}),(0,f.jsxs)("div",{className:"pt-4",children:[f.jsx(g.z,{type:"submit",className:"w-full bg-blue-700 hover:bg-blue-800 text-white",disabled:c||!o,children:c?(0,f.jsxs)(f.Fragment,{children:[f.jsx(aQ.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Submitting to Blockchain..."]}):"Continue"}),!o&&f.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"Please connect your wallet to continue"})]})]})})]})})}function a3({className:e,...t}){return f.jsx("textarea",{"data-slot":"textarea",className:(0,aW.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}let a5=(0,_.Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),a4=(0,_.Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),a6=(0,_.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),a9=(0,_.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),a8=(0,_.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),a7=(0,_.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ne=e1({name:eQ().min(1,"All fields are required for this contact"),relationship:eQ().min(1,"All fields are required for this contact"),phone:eQ().regex(/^\+91\s?[6-9]\d{4}\s?\d{5}$/,"Phone number must be valid (+91 XXXXX XXXXX)")}),nt=e1({startDate:eQ().min(1,"Start date is required").refine(e=>new Date(e)>=new Date(new Date().setHours(0,0,0,0)),{message:"Start date cannot be in the past"}),endDate:eQ().min(1,"End date is required"),itinerary:eQ().min(1,"Trip itinerary is required"),purpose:eQ().min(1,"Purpose of visit is required"),accommodation:eQ().optional(),emergencyContacts:e0(ne).min(1,"At least one valid emergency contact is required")}).refine(e=>new Date(e.endDate)>new Date(e.startDate),{message:"End date must be after start date",path:["endDate"]});function ns({onSubmit:e,onBack:t,userInfo:s}){let[r,a]=(0,x.useState)({startDate:"",endDate:"",itinerary:"",purpose:"",accommodation:"",emergencyContacts:[{name:"",relationship:"",phone:""}]}),[n,i]=(0,x.useState)({}),{isLoading:o,error:l,result:c,isSuccess:d,updateTripDetails:u,getExplorerUrl:h,resetState:m}=(0,a0.j)(),p=async t=>{t.preventDefault();let a=nt.safeParse(r);if(!a.success){let e={};a.error.errors.forEach(t=>{e[t.path.join("_")]=t.message}),i(e);return}if(i({}),m(),s?.blockchainData?.digitalId)try{let t={startDate:new Date(r.startDate).getTime(),endDate:new Date(r.endDate).getTime(),purpose:r.purpose,accommodation:r.accommodation||void 0,itinerary:r.itinerary,emergencyContacts:r.emergencyContacts};console.log("[v0] Submitting trip details to blockchain:",t);let a=await u(s.blockchainData.digitalId,t);a&&setTimeout(()=>{e({...r,blockchainTripData:{transactionSignature:a.signature,slot:a.slot,blockTime:a.blockTime,touristAccountAddress:a.touristAccountAddress}})},2e3)}catch(e){console.error("[v0] Trip details blockchain submission failed:",e)}else e(r)},_=(e,t)=>{a(s=>({...s,[e]:t})),n[e]&&i(t=>({...t,[e]:""}))},k=e=>{a(t=>({...t,emergencyContacts:t.emergencyContacts.filter((t,s)=>s!==e)}))},S=(e,t,s)=>{a(r=>({...r,emergencyContacts:r.emergencyContacts.map((r,a)=>a===e?{...r,[t]:s}:r)}));let r=`emergencyContacts_${e}_${t}`;(n[r]||n.emergencyContacts)&&i(e=>({...e,[r]:"",emergencyContacts:""}))},E=()=>{if(r.startDate&&r.endDate){let e=new Date(r.startDate);return Math.ceil(Math.abs(new Date(r.endDate).getTime()-e.getTime())/864e5)}return 0};return f.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-primary/5 to-accent/5",children:(0,f.jsxs)(v.Zb,{className:"w-full max-w-2xl animate-in fade-in-0 slide-in-from-bottom-4 duration-500",children:[(0,f.jsxs)(v.Ol,{className:"text-center space-y-2",children:[f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:f.jsx(a5,{className:"h-8 w-8 text-primary"})})}),f.jsx(v.ll,{className:"text-2xl",children:"Trip Details & Emergency Contacts"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Help us keep you safe by providing your travel plans and emergency contacts"}),s?.blockchainData&&(0,f.jsxs)("div",{className:"p-3 bg-green-50 dark:bg-green-950/30 rounded-lg border border-green-200 dark:border-green-800",children:[(0,f.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[f.jsx(j.Z,{className:"h-4 w-4 text-green-600"}),f.jsx("span",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Personal Data Secured on Blockchain"})]}),(0,f.jsxs)("div",{className:"text-xs text-green-700 dark:text-green-300 mt-1",children:["Digital ID: ",s.blockchainData.digitalId?.slice(0,16),"..."]})]})]}),(0,f.jsxs)(v.aY,{className:"space-y-6",children:[l&&(0,f.jsxs)(b.bZ,{variant:"destructive",children:[f.jsx(w.Z,{className:"h-4 w-4"}),f.jsx(b.X,{children:l})]}),d&&c&&(0,f.jsxs)(b.bZ,{className:"border-green-200 bg-green-50 dark:bg-green-950/30",children:[f.jsx(C.Z,{className:"h-4 w-4 text-green-600"}),f.jsx(b.X,{className:"text-green-800 dark:text-green-200",children:(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx("p",{children:"Trip details successfully stored on blockchain!"}),(0,f.jsxs)("div",{className:"flex items-center space-x-2 text-xs",children:[f.jsx("span",{children:"Transaction:"}),(0,f.jsxs)("a",{href:h(c.signature),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline inline-flex items-center",children:[c.signature.slice(0,8),"...",f.jsx(N.Z,{className:"h-3 w-3 ml-1"})]})]})]})})]}),f.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-950 rounded-lg border border-blue-200 dark:border-blue-800 animate-in fade-in-0 slide-in-from-top-4 duration-500 delay-200",children:(0,f.jsxs)("div",{className:"flex items-start space-x-3",children:[f.jsx(w.Z,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,f.jsxs)("div",{className:"space-y-1",children:[f.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Time-Bound Digital Tourist ID"}),f.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:"Your Digital Tourist ID will be valid only for the duration of your visit. The system will automatically deactivate monitoring after your trip ends."})]})]})}),(0,f.jsxs)("form",{onSubmit:p,className:"space-y-8",children:[(0,f.jsxs)("div",{className:"space-y-5",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(a4,{className:"h-5 w-5 text-primary"}),f.jsx(e3._,{className:"text-base font-semibold",children:"Trip Duration"})]}),(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,f.jsxs)("div",{className:"space-y-3",children:[f.jsx(e3._,{htmlFor:"startDate",className:"text-sm font-medium",children:"Start Date"}),f.jsx(e2.I,{id:"startDate",type:"date",value:r.startDate,onChange:e=>_("startDate",e.target.value),className:`h-11 rounded-lg border-2 focus:ring-2 focus:ring-primary/20 transition-all duration-200 ${n.startDate?"border-red-500":""}`}),n.startDate&&f.jsx("p",{className:"text-xs text-red-500 mt-1",children:n.startDate})]}),(0,f.jsxs)("div",{className:"space-y-3",children:[f.jsx(e3._,{htmlFor:"endDate",className:"text-sm font-medium",children:"End Date"}),f.jsx(e2.I,{id:"endDate",type:"date",value:r.endDate,onChange:e=>_("endDate",e.target.value),className:`h-11 rounded-lg border-2 focus:ring-2 focus:ring-primary/20 transition-all duration-200 ${n.endDate?"border-red-500":""}`}),n.endDate&&f.jsx("p",{className:"text-xs text-red-500 mt-1",children:n.endDate})]})]}),E()>0&&(0,f.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground bg-blue-50 dark:bg-blue-950/30 p-3 rounded-lg",children:[f.jsx(a6,{className:"h-4 w-4"}),(0,f.jsxs)("span",{children:["Trip duration: ",E()," days"]})]})]}),(0,f.jsxs)("div",{className:"space-y-3",children:[f.jsx(e3._,{htmlFor:"purpose",className:"text-sm font-medium",children:"Purpose of Visit"}),f.jsx(e2.I,{id:"purpose",placeholder:"e.g., Tourism, Business, Family visit",value:r.purpose,onChange:e=>_("purpose",e.target.value),className:`h-11 rounded-lg border-2 focus:ring-2 focus:ring-primary/20 transition-all duration-200 ${n.purpose?"border-red-500":""}`}),n.purpose&&f.jsx("p",{className:"text-xs text-red-500 mt-1",children:n.purpose})]}),(0,f.jsxs)("div",{className:"space-y-3",children:[f.jsx(e3._,{htmlFor:"accommodation",className:"text-sm font-medium",children:"Accommodation Details (Optional)"}),f.jsx(e2.I,{id:"accommodation",placeholder:"Hotel name, address, or contact details",value:r.accommodation,onChange:e=>_("accommodation",e.target.value),className:"h-11 rounded-lg border-2 focus:ring-2 focus:ring-primary/20 transition-all duration-200"})]}),(0,f.jsxs)("div",{className:"space-y-3",children:[f.jsx(e3._,{htmlFor:"itinerary",className:"text-sm font-medium",children:"Trip Itinerary"}),f.jsx(a3,{id:"itinerary",placeholder:"Describe your planned activities, places to visit, and daily schedule...",value:r.itinerary,onChange:e=>_("itinerary",e.target.value),className:`min-h-24 rounded-lg border-2 focus:ring-2 focus:ring-primary/20 transition-all duration-200 ${n.itinerary?"border-red-500":""}`}),n.itinerary&&f.jsx("p",{className:"text-xs text-red-500 mt-1",children:n.itinerary}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"This helps authorities locate you quickly in case of emergencies"})]}),(0,f.jsxs)("div",{className:"space-y-5",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(a9,{className:"h-5 w-5 text-primary"}),f.jsx(e3._,{className:"text-base font-semibold",children:"Emergency Contacts"})]}),(0,f.jsxs)(g.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{a(e=>({...e,emergencyContacts:[...e.emergencyContacts,{name:"",relationship:"",phone:""}]}))},className:"hover:scale-105 transition-all duration-200 bg-transparent rounded-lg",children:[f.jsx(a8,{className:"h-4 w-4 mr-1"}),"Add Contact"]})]}),n.emergencyContacts&&f.jsx("p",{className:"text-xs text-red-500",children:n.emergencyContacts}),f.jsx("div",{className:"space-y-4",children:r.emergencyContacts.map((e,t)=>(0,f.jsxs)("div",{className:"p-5 border-2 border-border rounded-xl space-y-4 animate-in fade-in-0 slide-in-from-left-4 duration-300 hover:shadow-md transition-shadow",style:{animationDelay:`${100*t}ms`},children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)(y.C,{variant:"outline",className:"px-3 py-1",children:["Contact ",t+1]}),r.emergencyContacts.length>1&&f.jsx(g.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>k(t),className:"hover:scale-105 transition-all duration-200 text-red-500 hover:text-red-700 hover:bg-red-50",children:f.jsx(a7,{className:"h-4 w-4"})})]}),(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(e3._,{className:"text-xs font-medium",children:"Full Name"}),f.jsx(e2.I,{placeholder:"Contact name",value:e.name,onChange:e=>S(t,"name",e.target.value),className:"h-10 rounded-lg border-2 focus:ring-2 focus:ring-primary/20 transition-all duration-200"}),n[`emergencyContacts_${t}_name`]&&f.jsx("p",{className:"text-xs text-red-500",children:n[`emergencyContacts_${t}_name`]})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(e3._,{className:"text-xs font-medium",children:"Relationship"}),f.jsx(e2.I,{placeholder:"e.g., Spouse, Parent, Friend",value:e.relationship,onChange:e=>S(t,"relationship",e.target.value),className:"h-10 rounded-lg border-2 focus:ring-2 focus:ring-primary/20 transition-all duration-200"})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(e3._,{className:"text-xs font-medium",children:"Phone Number"}),f.jsx(e2.I,{type:"tel",placeholder:"+91 XXXXX XXXXX",value:e.phone,onChange:e=>S(t,"phone",e.target.value),className:"h-10 rounded-lg border-2 focus:ring-2 focus:ring-primary/20 transition-all duration-200"}),n[`emergencyContacts_${t}_phone`]&&f.jsx("p",{className:"text-xs text-red-500",children:n[`emergencyContacts_${t}_phone`]})]})]})]},t))})]}),(0,f.jsxs)("div",{className:"flex space-x-4 pt-6",children:[f.jsx(g.z,{type:"button",variant:"outline",onClick:t,disabled:o,className:"flex-1 h-12 rounded-lg hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 bg-transparent border-2",children:"Back"}),f.jsx(g.z,{type:"submit",disabled:o,className:"flex-1 h-12 rounded-lg shadow-lg hover:shadow-xl hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 focus:ring-2 focus:ring-primary/20 focus:ring-offset-2",children:o?(0,f.jsxs)(f.Fragment,{children:[f.jsx(aQ.Z,{className:"h-4 w-4 mr-2 animate-spin"}),"Storing on Blockchain..."]}):"Complete Registration"})]})]})]})]})})}function nr({onContinue:e,userInfo:t,tripDetails:s}){let r=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return f.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-primary/5 to-accent/5",children:f.jsx(v.Zb,{className:"w-full max-w-2xl animate-in fade-in-0 slide-in-from-bottom-4 duration-500",children:(0,f.jsxs)(v.aY,{className:"p-8 space-y-6",children:[(0,f.jsxs)("div",{className:"text-center space-y-6",children:[(0,f.jsxs)("div",{className:"p-8 bg-gradient-to-br from-primary/10 to-accent/10 rounded-2xl border-2 border-primary/20 animate-in fade-in-0 zoom-in-95 duration-700 delay-200",children:[f.jsx("div",{className:"flex justify-center mb-4",children:(0,f.jsxs)("div",{className:"relative",children:[f.jsx("div",{className:"p-6 bg-primary rounded-full animate-pulse",children:f.jsx(j.Z,{className:"h-20 w-20 text-white"})}),f.jsx("div",{className:"absolute -bottom-2 -right-2 p-2 bg-accent rounded-full animate-bounce",children:f.jsx(C.Z,{className:"h-8 w-8 text-white"})})]})}),(0,f.jsxs)("div",{className:"space-y-3",children:[f.jsx("h1",{className:"text-3xl font-bold text-primary animate-in fade-in-0 slide-in-from-bottom-2 duration-500 delay-400",children:"You're Protected"}),f.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed animate-in fade-in-0 slide-in-from-bottom-2 duration-500 delay-500",children:"NaviSafe is now actively monitoring your safety throughout your entire trip"}),f.jsx("div",{className:"flex justify-center pt-2",children:f.jsx(y.C,{variant:"default",className:"px-4 py-2 text-sm font-semibold animate-pulse",children:"\uD83D\uDEE1️ Active Protection Status"})})]})]}),(0,f.jsxs)("div",{className:"space-y-2 animate-in fade-in-0 slide-in-from-bottom-2 duration-500 delay-600",children:[f.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Registration Complete!"}),f.jsx("p",{className:"text-muted-foreground",children:"Our advanced AI system will track your location and alert authorities in case of emergencies."})]})]}),s&&(0,f.jsxs)("div",{className:"space-y-4 p-4 bg-muted/30 rounded-lg border animate-in fade-in-0 slide-in-from-top-4 duration-500 delay-200",children:[(0,f.jsxs)("h3",{className:"font-semibold flex items-center space-x-2",children:[f.jsx(a4,{className:"h-5 w-5 text-primary"}),f.jsx("span",{children:"Trip Summary"})]}),(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,f.jsxs)("div",{className:"space-y-2",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(a6,{className:"h-4 w-4 text-muted-foreground"}),f.jsx("span",{className:"font-medium",children:"Duration:"}),(0,f.jsxs)(y.C,{variant:"outline",children:[(()=>{if(s?.startDate&&s?.endDate){let e=new Date(s.startDate);return Math.ceil(Math.abs(new Date(s.endDate).getTime()-e.getTime())/864e5)}return 0})()," days"]})]}),(0,f.jsxs)("div",{className:"space-y-1",children:[(0,f.jsxs)("p",{children:[f.jsx("span",{className:"font-medium",children:"Start:"})," ",r(s.startDate)]}),(0,f.jsxs)("p",{children:[f.jsx("span",{className:"font-medium",children:"End:"})," ",r(s.endDate)]})]}),f.jsx("div",{children:(0,f.jsxs)("p",{children:[f.jsx("span",{className:"font-medium",children:"Purpose:"})," ",s.purpose]})})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(a9,{className:"h-4 w-4 text-muted-foreground"}),f.jsx("span",{className:"font-medium",children:"Emergency Contacts:"}),f.jsx(y.C,{variant:"outline",children:s.emergencyContacts?.length||0})]}),s.emergencyContacts?.slice(0,2).map((e,t)=>f.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.name," (",e.relationship,")"]},t))]})]})]}),(0,f.jsxs)("div",{className:"space-y-3 p-4 bg-blue-50 dark:bg-blue-950 rounded-lg border border-blue-200 dark:border-blue-800 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-300",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(j.Z,{className:"h-5 w-5 text-blue-600"}),f.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Time-Bound Digital Tourist ID Active"})]}),(0,f.jsxs)("div",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[(0,f.jsxs)("p",{children:["• Your Digital ID is valid from ",s?.startDate?r(s.startDate):"today"," ","to ",s?.endDate?r(s.endDate):"your departure"]}),f.jsx("p",{children:"• Safety monitoring will automatically deactivate after your trip ends"}),f.jsx("p",{children:"• All data will be securely archived according to privacy regulations"})]})]}),(0,f.jsxs)("div",{className:"space-y-3 p-4 bg-accent/10 rounded-lg border border-accent/20 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-400",children:[(0,f.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[f.jsx(j.Z,{className:"h-5 w-5 text-accent"}),f.jsx("span",{className:"text-sm font-medium text-accent",children:"Safety Features Activated"})]}),(0,f.jsxs)("ul",{className:"text-xs text-muted-foreground space-y-1",children:[f.jsx("li",{children:"• Real-time location monitoring during trip duration"}),f.jsx("li",{children:"• Emergency SOS alerts with automatic authority notification"}),f.jsx("li",{children:"• Safe zone notifications and risk area warnings"}),f.jsx("li",{children:"• 24/7 authority connection and emergency response"}),f.jsx("li",{children:"• AI-powered anomaly detection for your safety"})]})]}),f.jsx(g.z,{onClick:e,className:"w-full h-12 text-base font-semibold hover:scale-105 transition-all duration-200",size:"lg",children:"Continue to Safety Dashboard"})]})})})}let na=(0,_.Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),nn=(0,_.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),ni=(0,_.Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),no=(0,_.Z)("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),nl=(0,_.Z)("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),nc=(0,_.Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),nd=(0,_.Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),nu=(0,_.Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),nh=(0,_.Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),nm=(0,_.Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var np=s(5367),nf=s.t(np,2);let nx=Object.create(null);nx.open="0",nx.close="1",nx.ping="2",nx.pong="3",nx.message="4",nx.upgrade="5",nx.noop="6";let ng=Object.create(null);Object.keys(nx).forEach(e=>{ng[nx[e]]=e});let nv={type:"error",data:"parser error"},ny=({type:e,data:t},s,r)=>r(t instanceof ArrayBuffer||ArrayBuffer.isView(t)?s?t:"b"+nb(t,!0).toString("base64"):nx[e]+(t||"")),nb=(e,t)=>Buffer.isBuffer(e)||e instanceof Uint8Array&&!t?e:e instanceof ArrayBuffer?Buffer.from(e):Buffer.from(e.buffer,e.byteOffset,e.byteLength),nj=(e,t)=>{if("string"!=typeof e)return{type:"message",data:nw(e,t)};let s=e.charAt(0);return"b"===s?{type:"message",data:nw(Buffer.from(e.substring(1),"base64"),t)}:ng[s]?e.length>1?{type:ng[s],data:e.substring(1)}:{type:ng[s]}:nv},nw=(e,t)=>"arraybuffer"===t?e instanceof ArrayBuffer?e:Buffer.isBuffer(e)?e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength):e.buffer:Buffer.isBuffer(e)?e:Buffer.from(e),nN=(e,t)=>{let s=e.length,r=Array(s),a=0;e.forEach((e,n)=>{ny(e,!1,e=>{r[n]=e,++a===s&&t(r.join("\x1e"))})})},n_=(e,t)=>{let s=e.split("\x1e"),r=[];for(let e=0;e<s.length;e++){let a=nj(s[e],t);if(r.push(a),"error"===a.type)break}return r};function nk(e){return e.reduce((e,t)=>e+t.length,0)}function nC(e,t){if(e[0].length===t)return e.shift();let s=new Uint8Array(t),r=0;for(let a=0;a<t;a++)s[a]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),s}function nS(e){if(e)return function(e){for(var t in nS.prototype)e[t]=nS.prototype[t];return e}(e)}nS.prototype.on=nS.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},nS.prototype.once=function(e,t){function s(){this.off(e,s),t.apply(this,arguments)}return s.fn=t,this.on(e,s),this},nS.prototype.off=nS.prototype.removeListener=nS.prototype.removeAllListeners=nS.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var a=0;a<r.length;a++)if((s=r[a])===t||s.fn===t){r.splice(a,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},nS.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=Array(arguments.length-1),s=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(s){s=s.slice(0);for(var r=0,a=s.length;r<a;++r)s[r].apply(this,t)}return this},nS.prototype.emitReserved=nS.prototype.emit,nS.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},nS.prototype.hasListeners=function(e){return!!this.listeners(e).length};let nE=process.nextTick,nT=global;class nO{constructor(){this._cookies=new Map}parseCookies(e){e&&e.forEach(e=>{let t=function(e){let t=e.split("; "),s=t[0].indexOf("=");if(-1===s)return;let r=t[0].substring(0,s).trim();if(!r.length)return;let a=t[0].substring(s+1).trim();34===a.charCodeAt(0)&&(a=a.slice(1,-1));let n={name:r,value:a};for(let e=1;e<t.length;e++){let s=t[e].split("=");if(2!==s.length)continue;let r=s[0].trim(),a=s[1].trim();switch(r){case"Expires":n.expires=new Date(a);break;case"Max-Age":let i=new Date;i.setUTCSeconds(i.getUTCSeconds()+parseInt(a,10)),n.expires=i}}return n}(e);t&&this._cookies.set(t.name,t)})}get cookies(){let e=Date.now();return this._cookies.forEach((t,s)=>{var r;(null===(r=t.expires)||void 0===r?void 0:r.getTime())<e&&this._cookies.delete(s)}),this._cookies.entries()}addCookies(e){let t=[];for(let[e,s]of this.cookies)t.push(`${e}=${s.value}`);t.length&&(e.setDisableHeaderCheck(!0),e.setRequestHeader("cookie",t.join("; ")))}appendCookies(e){for(let[t,s]of this.cookies)e.append("cookie",`${t}=${s.value}`)}}function nI(e,...t){return t.reduce((t,s)=>(e.hasOwnProperty(s)&&(t[s]=e[s]),t),{})}let nA=nT.setTimeout,nR=nT.clearTimeout;function nD(e,t){t.useNativeTimers?(e.setTimeoutFn=nA.bind(nT),e.clearTimeoutFn=nR.bind(nT)):(e.setTimeoutFn=nT.setTimeout.bind(nT),e.clearTimeoutFn=nT.clearTimeout.bind(nT))}function nL(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}var nP=s(5356);let nF=nP("engine.io-client:transport");class nM extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class nZ extends nS{constructor(e){super(),this.writable=!1,nD(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,s){return super.emitReserved("error",new nM(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState?this.write(e):nF("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let t=nj(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){let e=this.opts.hostname;return -1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){let t=function(e){let t="";for(let s in e)e.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t}(e);return t.length?"?"+t:""}}let nz=nP("engine.io-client:polling");class n$ extends nZ{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";let t=()=>{nz("paused"),this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(nz("we are currently polling - waiting to pause"),e++,this.once("pollComplete",function(){nz("pre-pause polling complete"),--e||t()})),this.writable||(nz("we are currently writing - waiting to pause"),e++,this.once("drain",function(){nz("pre-pause writing complete"),--e||t()}))}else t()}_poll(){nz("polling"),this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){nz("polling got data %s",e),n_(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState?this._poll():nz('ignoring poll - transport state "%s"',this.readyState))}doClose(){let e=()=>{nz("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(nz("transport open - closing"),e()):(nz("transport not open - deferring close"),this.once("open",e))}write(e){this.writable=!1,nN(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=nL()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let nB=!1;try{nB="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}let nU=nB,nW=nP("engine.io-client:polling");function nV(){}class nq extends n${constructor(e){if(super(e),"undefined"!=typeof location){let t="https:"===location.protocol,s=location.port;s||(s=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,t){let s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){nW("xhr poll");let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class nH extends nS{constructor(e,t,s){super(),this.createRequest=e,nD(this,s),this._opts=s,this._method=s.method||"GET",this._uri=t,this._data=void 0!==s.data?s.data:null,this._create()}_create(){var e;let t=nI(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;let s=this._xhr=this.createRequest(t);try{nW("xhr open %s: %s",this._method,this._uri),s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders)for(let e in s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0),this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&s.setRequestHeader(e,this._opts.extraHeaders[e])}catch(e){}if("POST"===this._method)try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{s.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var e;3===s.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(s.getResponseHeader("set-cookie"))),4===s.readyState&&(200===s.status||1223===s.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof s.status?s.status:0)},0))},nW("xhr data %s",this._data),s.send(this._data)}catch(e){this.setTimeoutFn(()=>{this._onError(e)},0);return}"undefined"!=typeof document&&(this._index=nH.requestsCount++,nH.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=nV,e)try{this._xhr.abort()}catch(e){}"undefined"!=typeof document&&delete nH.requests[this._index],this._xhr=null}}_onLoad(){let e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}function nG(){for(let e in nH.requests)nH.requests.hasOwnProperty(e)&&nH.requests[e].abort()}nH.requestsCount=0,nH.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",nG):"function"==typeof addEventListener&&addEventListener("onpagehide"in nT?"pagehide":"unload",nG,!1)),function(){let e=function(e){let t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||nU))return new XMLHttpRequest}catch(e){}if(!t)try{return new nT[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(e){}}({xdomain:!1});e&&e.responseType}();let nY=np||nf;class nX extends nq{request(e={}){var t;return Object.assign(e,{xd:this.xd,cookieJar:null===(t=this.socket)||void 0===t?void 0:t._cookieJar},this.opts),new nH(e=>new nY(e),this.uri(),e)}}s(3821),s(8054),s(9114);var nK=s(4150);s(9585);let nJ=nP("engine.io-client:websocket"),nQ="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class n0 extends nZ{get name(){return"websocket"}doOpen(){let e=this.uri(),t=this.opts.protocols,s=nQ?{}:nI(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,s)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let s=e[t],r=t===e.length-1;ny(s,this.supportsBinary,e=>{try{this.doWrite(s,e)}catch(e){nJ("websocket closed before onclose event")}r&&nE(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=nL()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}nT.WebSocket||nT.MozWebSocket;class n1 extends n0{createSocket(e,t,s){var r;if(null===(r=this.socket)||void 0===r?void 0:r._cookieJar)for(let[e,t]of(s.headers=s.headers||{},s.headers.cookie="string"==typeof s.headers.cookie?[s.headers.cookie]:s.headers.cookie||[],this.socket._cookieJar.cookies))s.headers.cookie.push(`${e}=${t.value}`);return new nK(e,t,s)}doWrite(e,t){let s={};e.options&&(s.compress=e.options.compress),this.opts.perMessageDeflate&&("string"==typeof t?Buffer.byteLength(t):t.length)<this.opts.perMessageDeflate.threshold&&(s.compress=!1),this.ws.send(t,s)}}let n2=nP("engine.io-client:webtransport");class n3 extends nZ{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{n2("transport closed gracefully"),this.onClose()}).catch(e=>{n2("transport closed due to %s",e),this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{let t=function(e,t){n||(n=new TextDecoder);let s=[],r=0,a=-1,i=!1;return new TransformStream({transform(o,l){for(s.push(o);;){if(0===r){if(1>nk(s))break;let e=nC(s,1);i=(128&e[0])==128,r=(a=127&e[0])<126?3:126===a?1:2}else if(1===r){if(2>nk(s))break;let e=nC(s,2);a=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),r=3}else if(2===r){if(8>nk(s))break;let e=nC(s,8),t=new DataView(e.buffer,e.byteOffset,e.length),n=t.getUint32(0);if(n>2097151){l.enqueue(nv);break}a=4294967296*n+t.getUint32(4),r=3}else{if(nk(s)<a)break;let e=nC(s,a);l.enqueue(nj(i?e:n.decode(e),t)),r=0}if(0===a||a>e){l.enqueue(nv);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(t).getReader(),r=new TransformStream({transform(e,t){!function(e,t){if(e.data instanceof ArrayBuffer||ArrayBuffer.isView(e.data))return t(nb(e.data,!1));ny(e,!0,e=>{a||(a=new TextEncoder),t(a.encode(e))})}(e,s=>{let r;let a=s.length;if(a<126)new DataView((r=new Uint8Array(1)).buffer).setUint8(0,a);else if(a<65536){let e=new DataView((r=new Uint8Array(3)).buffer);e.setUint8(0,126),e.setUint16(1,a)}else{let e=new DataView((r=new Uint8Array(9)).buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(a))}e.data&&"string"!=typeof e.data&&(r[0]|=128),t.enqueue(r),t.enqueue(s)})}});r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();let i=()=>{s.read().then(({done:e,value:t})=>{if(e){n2("session is closed");return}n2("received chunk: %o",t),this.onPacket(t),i()}).catch(e=>{n2("an error occurred while reading: %s",e)})};i();let o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let s=e[t],r=t===e.length-1;this._writer.write(s).then(()=>{r&&nE(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}}let n5={websocket:n1,webtransport:n3,polling:nX},n4=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n6=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function n9(e){if(e.length>8e3)throw"URI too long";let t=e,s=e.indexOf("["),r=e.indexOf("]");-1!=s&&-1!=r&&(e=e.substring(0,s)+e.substring(s,r).replace(/:/g,";")+e.substring(r,e.length));let a=n4.exec(e||""),n={},i=14;for(;i--;)n[n6[i]]=a[i]||"";return -1!=s&&-1!=r&&(n.source=t,n.host=n.host.substring(1,n.host.length-1).replace(/;/g,":"),n.authority=n.authority.replace("[","").replace("]","").replace(/;/g,":"),n.ipv6uri=!0),n.pathNames=function(e,t){let s=t.replace(/\/{2,9}/g,"/").split("/");return("/"==t.slice(0,1)||0===t.length)&&s.splice(0,1),"/"==t.slice(-1)&&s.splice(s.length-1,1),s}(0,n.path),n.queryKey=function(e,t){let s={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,r){t&&(s[t]=r)}),s}(0,n.query),n}let n8=nP("engine.io-client:socket"),n7="function"==typeof addEventListener&&"function"==typeof removeEventListener,ie=[];n7&&addEventListener("offline",()=>{n8("closing %d connection(s) because the network was lost",ie.length),ie.forEach(e=>e())},!1);class it extends nS{constructor(e,t){if(super(),this.binaryType="nodebuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){let s=n9(e);t.hostname=s.host,t.secure="https"===s.protocol||"wss"===s.protocol,t.port=s.port,s.query&&(t.query=s.query)}else t.host&&(t.hostname=n9(t.host).host);nD(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{let t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},s=e.split("&");for(let e=0,r=s.length;e<r;e++){let r=s[e].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}(this.opts.query)),n7&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(n8("adding listener for the 'offline' event"),this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ie.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=new nO),this._open()}createTransport(e){n8('creating transport "%s"',e);let t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);let s=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return n8("options: %j",s),new this._transportsByName[e](s)}_open(){if(0===this.transports.length){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}let e=this.opts.rememberUpgrade&&it.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";let t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){n8("setting transport %s",e.name),this.transport&&(n8("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){n8("socket open"),this.readyState="open",it.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(n8('socket receive: type "%s", data "%s"',e.type,e.data),this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":let t=Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}else n8('packet received with socket readyState "%s"',this.readyState)}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);let e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this._getWritablePackets();n8("flushing %d packets in socket",e.length),this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){let s=this.writeBuffer[t].data;if(s&&(e+="string"==typeof s?function(e){let t=0,s=0;for(let r=0,a=e.length;r<a;r++)(t=e.charCodeAt(r))<128?s+=1:t<2048?s+=2:t<55296||t>=57344?s+=3:(r++,s+=4);return s}(s):Math.ceil(1.33*(s.byteLength||s.size))),t>0&&e>this._maxPayload)return n8("only send %d out of %d packets",t,this.writeBuffer.length),this.writeBuffer.slice(0,t);e+=2}return n8("payload size is %d (max: %d)",e,this._maxPayload),this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;let e=Date.now()>this._pingTimeoutTime;return e&&(n8("throttled timer detected, scheduling connection close"),this._pingTimeoutTime=0,nE(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,s){return this._sendPacket("message",e,t,s),this}send(e,t,s){return this._sendPacket("message",e,t,s),this}_sendPacket(e,t,s,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof s&&(r=s,s=null),"closing"===this.readyState||"closed"===this.readyState)return;(s=s||{}).compress=!1!==s.compress;let a={type:e,data:t,options:s};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),r&&this.once("flush",r),this.flush()}close(){let e=()=>{this._onClose("forced close"),n8("socket closing - telling transport to close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(n8("socket error %j",e),it.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return n8("trying next transport"),this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(n8('socket close with reason: "%s"',e),this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),n7&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){let e=ie.indexOf(this._offlineEventListener);-1!==e&&(n8("removing listener for the 'offline' event"),ie.splice(e,1))}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}it.protocol=4;class is extends it{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade){n8("starting upgrade probes");for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}}_probe(e){n8('probing transport "%s"',e);let t=this.createTransport(e),s=!1;it.priorWebsocketSuccess=!1;let r=()=>{s||(n8('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",r=>{if(!s){if("pong"===r.type&&"probe"===r.data)n8('probe transport "%s" pong',e),this.upgrading=!0,this.emitReserved("upgrading",t),t&&(it.priorWebsocketSuccess="websocket"===t.name,n8('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{s||"closed"===this.readyState||(n8("changing transport and sending upgrade packet"),c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}));else{n8('probe transport "%s" failed',e);let s=Error("probe error");s.transport=t.name,this.emitReserved("upgradeError",s)}}}))};function a(){s||(s=!0,c(),t.close(),t=null)}let n=s=>{let r=Error("probe error: "+s);r.transport=t.name,a(),n8('probe transport "%s" failed because of error: %s',e,s),this.emitReserved("upgradeError",r)};function i(){n("transport closed")}function o(){n("socket closed")}function l(e){t&&e.name!==t.name&&(n8('"%s" works - aborting "%s"',e.name,t.name),a())}let c=()=>{t.removeListener("open",r),t.removeListener("error",n),t.removeListener("close",i),this.off("close",o),this.off("upgrading",l)};t.once("open",r),t.once("error",n),t.once("close",i),this.once("close",o),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{s||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){let t=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}class ir extends is{constructor(e,t={}){let s="object"==typeof e?e:t;(!s.transports||s.transports&&"string"==typeof s.transports[0])&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(e=>n5[e]).filter(e=>!!e)),super(e,s)}}ir.protocol;var ia=s(943);let ii=ia("socket.io-client:url"),io="function"==typeof ArrayBuffer,il=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,ic=Object.prototype.toString,id="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===ic.call(Blob),iu="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===ic.call(File);function ih(e){return io&&(e instanceof ArrayBuffer||il(e))||id&&e instanceof Blob||iu&&e instanceof File}let im=s(4946)("socket.io-parser"),ip=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ix=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(m||(m={}));class ig{constructor(e){this.replacer=e}encode(e){return(im("encoding packet %j",e),(e.type===m.EVENT||e.type===m.ACK)&&function e(t,s){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let s=0,r=t.length;s<r;s++)if(e(t[s]))return!0;return!1}if(ih(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1==arguments.length)return e(t.toJSON(),!0);for(let s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e(t[s]))return!0;return!1}(e))?this.encodeAsBinary({type:e.type===m.EVENT?m.BINARY_EVENT:m.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===m.BINARY_EVENT||e.type===m.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),im("encoded %j as %s",e,t),t}encodeAsBinary(e){let t=function(e){let t=[],s=e.data;return e.data=function e(t,s){if(!t)return t;if(ih(t)){let e={_placeholder:!0,num:s.length};return s.push(t),e}if(Array.isArray(t)){let r=Array(t.length);for(let a=0;a<t.length;a++)r[a]=e(t[a],s);return r}if("object"==typeof t&&!(t instanceof Date)){let r={};for(let a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=e(t[a],s));return r}return t}(s,t),e.attachments=t.length,{packet:e,buffers:t}}(e),s=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(s),r}}function iv(e){return"[object Object]"===Object.prototype.toString.call(e)}class iy extends nS{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");let s=(t=this.decodeString(e)).type===m.BINARY_EVENT;s||t.type===m.BINARY_ACK?(t.type=s?m.EVENT:m.ACK,this.reconstructor=new ib(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(ih(e)||e.base64){if(this.reconstructor)(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw Error("got binary data when not reconstructing a packet")}else throw Error("Unknown type: "+e)}decodeString(e){let t=0,s={type:Number(e.charAt(0))};if(void 0===m[s.type])throw Error("unknown packet type "+s.type);if(s.type===m.BINARY_EVENT||s.type===m.BINARY_ACK){let r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);let a=e.substring(r,t);if(a!=Number(a)||"-"!==e.charAt(t))throw Error("Illegal attachments");s.attachments=Number(a)}if("/"===e.charAt(t+1)){let r=t+1;for(;++t&&","!==e.charAt(t)&&t!==e.length;);s.nsp=e.substring(r,t)}else s.nsp="/";let r=e.charAt(t+1);if(""!==r&&Number(r)==r){let r=t+1;for(;++t;){let s=e.charAt(t);if(null==s||Number(s)!=s){--t;break}if(t===e.length)break}s.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){let r=this.tryParse(e.substr(t));if(iy.isPayloadValid(s.type,r))s.data=r;else throw Error("invalid payload")}return im("decoded %s as %j",e,s),s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case m.CONNECT:return iv(t);case m.DISCONNECT:return void 0===t;case m.CONNECT_ERROR:return"string"==typeof t||iv(t);case m.EVENT:case m.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===ip.indexOf(t[0]));case m.ACK:case m.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ib{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t,s;let e=(t=this.reconPack,s=this.buffers,t.data=function e(t,s){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<s.length)return s[t.num];throw Error("illegal attachments")}if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=e(t[r],s);else if("object"==typeof t)for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=e(t[r],s));return t}(t.data,s),delete t.attachments,t);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function ij(e,t,s){return e.on(t,s),function(){e.off(t,s)}}let iw=ia("socket.io-client:socket"),iN=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class i_ extends nS{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[ij(e,"open",this.onopen.bind(this)),ij(e,"packet",this.onpacket.bind(this)),ij(e,"error",this.onerror.bind(this)),ij(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var s,r,a;if(iN.hasOwnProperty(e))throw Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;let n={type:m.EVENT,data:t};if(n.options={},n.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){let e=this.ids++;iw("emitting packet with ack id %d",e);let s=t.pop();this._registerAckCallback(e,s),n.id=e}let i=null===(r=null===(s=this.io.engine)||void 0===s?void 0:s.transport)||void 0===r?void 0:r.writable,o=this.connected&&!(null===(a=this.io.engine)||void 0===a?void 0:a._hasPingExpired());return this.flags.volatile&&!i?iw("discard packet as the transport is not currently writable"):o?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n),this.flags={},this}_registerAckCallback(e,t){var s;let r=null!==(s=this.flags.timeout)&&void 0!==s?s:this._opts.ackTimeout;if(void 0===r){this.acks[e]=t;return}let a=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&(iw("removing packet with ack id %d from the buffer",e),this.sendBuffer.splice(t,1));iw("event with ack id %d has timed out after %d ms",e,r),t.call(this,Error("operation has timed out"))},r),n=(...e)=>{this.io.clearTimeoutFn(a),t.apply(this,e)};n.withError=!0,this.acks[e]=n}emitWithAck(e,...t){return new Promise((s,r)=>{let a=(e,t)=>e?r(e):s(t);a.withError=!0,t.push(a),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());let s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...r)=>{if(s===this._queue[0])return null!==e?s.tryCount>this._opts.retries&&(iw("packet [%d] is discarded after %d tries",s.id,s.tryCount),this._queue.shift(),t&&t(e)):(iw("packet [%d] was successfully sent",s.id),this._queue.shift(),t&&t(null,...r)),s.pending=!1,this._drainQueue()}),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(iw("draining queue"),!this.connected||0===this._queue.length)return;let t=this._queue[0];if(t.pending&&!e){iw("packet [%d] has already been sent and is waiting for an ack",t.id);return}t.pending=!0,t.tryCount++,iw("sending packet [%d] (try n\xb0%d)",t.id,t.tryCount),this.flags=t.flags,this.emit.apply(this,t.args)}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){iw("transport is open - connecting"),"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:m.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){iw("close (%s)",e),this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){let t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,Error("socket has been disconnected"))}})}onpacket(e){if(!(e.nsp!==this.nsp))switch(e.type){case m.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case m.EVENT:case m.BINARY_EVENT:this.onevent(e);break;case m.ACK:case m.BINARY_ACK:this.onack(e);break;case m.DISCONNECT:this.ondisconnect();break;case m.CONNECT_ERROR:this.destroy();let t=Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){let t=e.data||[];iw("emitting event %j",t),null!=e.id&&(iw("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length)for(let t of this._anyListeners.slice())t.apply(this,e);super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){let t=this,s=!1;return function(...r){s||(s=!0,iw("sending ack %j",r),t.packet({type:m.ACK,id:e,data:r}))}}onack(e){let t=this.acks[e.id];if("function"!=typeof t){iw("bad ack %s",e.id);return}delete this.acks[e.id],iw("calling ack %s with %j",e.id,e.data),t.withError&&e.data.unshift(null),t.apply(this,e.data)}onconnect(e,t){iw("socket connected with id %s",e),this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){iw("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(iw("performing disconnect (%s)",this.nsp),this.packet({type:m.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s]){t.splice(s,1);break}}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s]){t.splice(s,1);break}}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length)for(let t of this._anyOutgoingListeners.slice())t.apply(this,e.data)}}function ik(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ik.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),s=Math.floor(t*this.jitter*e);e=(1&Math.floor(10*t))==0?e-s:e+s}return 0|Math.min(e,this.max)},ik.prototype.reset=function(){this.attempts=0},ik.prototype.setMin=function(e){this.ms=e},ik.prototype.setMax=function(e){this.max=e},ik.prototype.setJitter=function(e){this.jitter=e};let iC=ia("socket.io-client:manager");class iS extends nS{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,nD(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(s=t.randomizationFactor)&&void 0!==s?s:.5),this.backoff=new ik({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;let r=t.parser||p;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(iC("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;iC("opening %s",this.uri),this.engine=new ir(this.uri,this.opts);let t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;let r=ij(t,"open",function(){s.onopen(),e&&e()}),a=t=>{iC("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},n=ij(t,"error",a);if(!1!==this._timeout){let e=this._timeout;iC("connect attempt will timeout after %d",e);let s=this.setTimeoutFn(()=>{iC("connect attempt timed out after %d",e),r(),a(Error("timeout")),t.close()},e);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}return this.subs.push(r),this.subs.push(n),this}connect(e){return this.open(e)}onopen(){iC("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(ij(e,"ping",this.onping.bind(this)),ij(e,"data",this.ondata.bind(this)),ij(e,"error",this.onerror.bind(this)),ij(e,"close",this.onclose.bind(this)),ij(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){nE(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){iC("error",e),this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new i_(this,e,t),this.nsps[e]=s),s}_destroy(e){for(let e of Object.keys(this.nsps))if(this.nsps[e].active){iC("socket %s is still active, skipping close",e);return}this._close()}_packet(e){iC("writing packet %j",e);let t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){iC("cleanup"),this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){iC("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var s;iC("closed due to %s",e),this.cleanup(),null===(s=this.engine)||void 0===s||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)iC("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let t=this.backoff.duration();iC("will wait %dms before reconnect attempt",t),this._reconnecting=!0;let s=this.setTimeoutFn(()=>{!e.skipReconnect&&(iC("attempting reconnect"),this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(iC("reconnect attempt error"),e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):(iC("reconnect success"),e.onreconnect())}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}let iE=ia("socket.io-client"),iT={};function iO(e,t){let s;"object"==typeof e&&(t=e,e=void 0);let r=function(e,t="",s){let r=e;s=s||"undefined"!=typeof location&&location,null==e&&(e=s.protocol+"//"+s.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?s.protocol+e:s.host+e),/^(https?|wss?):\/\//.test(e)||(ii("protocol-less url %s",e),e=void 0!==s?s.protocol+"//"+e:"https://"+e),ii("parse %s",e),r=n9(e)),!r.port&&(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";let a=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port+t,r.href=r.protocol+"://"+a+(s&&s.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),a=r.source,n=r.id,i=r.path,o=iT[n]&&i in iT[n].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||o?(iE("ignoring socket cache for %s",a),s=new iS(a,t)):(iT[n]||(iE("new io instance for %s",a),iT[n]=new iS(a,t)),s=iT[n]),r.query&&!t.query&&(t.query=r.queryKey),s.socket(r.path,t)}Object.assign(iO,{Manager:iS,Socket:i_,io:iO,connect:iO});let iI=e=>{console.log("[v0] Socket not connected, location update queued:",e)},iA=e=>{console.log("[v0] Socket not connected, geofence event queued:",e)},iR=e=>{console.log("[v0] Socket not connected, safety alert queued:",e)},iD=[{id:"green-safe-zone-center",name:"Central Safe Zone",lat:28.754605,lng:77.503009,radius:300,type:"safe",color:"#10b981"},{id:"green-safe-zone-north",name:"North Safe Zone",lat:28.757605,lng:77.503009,radius:200,type:"safe",color:"#10b981"},{id:"green-safe-zone-south",name:"South Safe Zone",lat:28.751605,lng:77.503009,radius:200,type:"safe",color:"#10b981"},{id:"orange-caution-northeast",name:"Northeast Caution Zone",lat:28.758605,lng:77.508009,radius:250,type:"caution",color:"#f59e0b"},{id:"orange-caution-northwest",name:"Northwest Caution Zone",lat:28.758605,lng:77.498009,radius:250,type:"caution",color:"#f59e0b"},{id:"orange-caution-southeast",name:"Southeast Caution Zone",lat:28.750605,lng:77.508009,radius:250,type:"caution",color:"#f59e0b"},{id:"orange-caution-southwest",name:"Southwest Caution Zone",lat:28.750605,lng:77.498009,radius:250,type:"caution",color:"#f59e0b"},{id:"purple-crowded-east",name:"East Crowded Area",lat:28.754605,lng:77.510009,radius:180,type:"crowded",color:"#7c3aed"},{id:"purple-crowded-west",name:"West Crowded Area",lat:28.754605,lng:77.496009,radius:180,type:"crowded",color:"#7c3aed"},{id:"red-restricted-far-north",name:"North Restricted Zone",lat:28.762605,lng:77.503009,radius:200,type:"restricted",color:"#dc2626"},{id:"red-restricted-far-south",name:"South Restricted Zone",lat:28.746605,lng:77.503009,radius:200,type:"restricted",color:"#dc2626"},{id:"red-restricted-far-east",name:"East Restricted Zone",lat:28.754605,lng:77.515009,radius:200,type:"restricted",color:"#dc2626"},{id:"red-restricted-far-west",name:"West Restricted Zone",lat:28.754605,lng:77.491009,radius:200,type:"restricted",color:"#dc2626"},{id:"red-restricted-northeast-corner",name:"Northeast Restricted Zone",lat:28.760605,lng:77.512009,radius:150,type:"restricted",color:"#dc2626"},{id:"red-restricted-northwest-corner",name:"Northwest Restricted Zone",lat:28.760605,lng:77.494009,radius:150,type:"restricted",color:"#dc2626"}],iL=e=>{let[t,s]=(0,x.useState)(null),[r,a]=(0,x.useState)(!1),[n,i]=(0,x.useState)(null),[o,l]=(0,x.useState)("unknown"),[c,d]=(0,x.useState)(100),[u,h]=(0,x.useState)(!1),[m,p]=(0,x.useState)({isActive:!1,zoneName:"",countdown:0}),f=(0,x.useRef)(null),g=(0,x.useRef)(null),v=(0,x.useRef)(new Set),y=(0,x.useRef)(null),b=(0,x.useRef)(null),j=(0,x.useRef)(null),w=(0,x.useRef)(iD),N=(0,x.useRef)(e.touristId);N.current=e.touristId,(0,x.useCallback)(()=>w.current,[]);let _=(0,x.useCallback)((e,t,s,r)=>{let a=(s-e)*Math.PI/180,n=(r-t)*Math.PI/180,i=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371e3},[]),k=(0,x.useCallback)((e,t)=>{let s=50,r=!1,a=!1,n=!1,i=!1;return t.forEach(t=>{if(_(e.lat,e.lng,t.lat,t.lng)<=t.radius)switch(t.type){case"safe":r=!0,s=Math.max(s,95);break;case"caution":n=!0,s=Math.min(s,65);break;case"restricted":a=!0,s=Math.min(s,15);break;case"crowded":i=!0,s=Math.min(s,70)}}),a?s=15:!r||n||i?r&&(n||i)?s=75:r||n||a||i||(s=60):s=95,Math.round(Math.max(0,Math.min(100,s)))},[_]),C=(0,x.useCallback)(e=>{console.log("[v0] Emergency alert triggered for zone:",e),p({isActive:!0,zoneName:e,countdown:5});let t=5;j.current=setInterval(()=>{t-=1,p(e=>({...e,countdown:t})),t<=0&&(j.current&&clearInterval(j.current),S(e))},1e3),b.current=setTimeout(()=>{S(e)},5e3)},[]),S=(0,x.useCallback)(e=>{console.log("[v0] Initiating police call for emergency in zone:",e),b.current&&clearTimeout(b.current),j.current&&clearInterval(j.current),alert(`🚨 EMERGENCY CALL INITIATED 🚨

Police have been contacted automatically.
Location: ${e}
Help is on the way!

Stay calm and move to a safe area if possible.`),p({isActive:!1,zoneName:"",countdown:0}),iR({touristId:N.current,alertType:"emergency_call_initiated",location:t?{lat:t.lat,lng:t.lng}:{lat:0,lng:0},safetyScore:0,message:`EMERGENCY: Police call initiated automatically for tourist in ${e}`,timestamp:new Date().toISOString()})},[t]),E=(0,x.useCallback)(()=>{console.log("[v0] Emergency alert dismissed by user"),b.current&&clearTimeout(b.current),j.current&&clearInterval(j.current),p({isActive:!1,zoneName:"",countdown:0})},[]),T=(0,x.useCallback)((e,t)=>{let s=new Set;t.forEach(r=>{_(e.lat,e.lng,r.lat,r.lng)<=r.radius&&(s.add(r.id),v.current.has(r.id)||(console.log(`[v0] Entered zone: ${r.name} (${r.type})`),iA({touristId:N.current,eventType:"enter",zoneName:r.name,zoneType:r.type,location:{lat:e.lat,lng:e.lng},timestamp:e.timestamp}),"restricted"===r.type&&(C(r.name),iR({touristId:N.current,alertType:"restricted_zone",location:{lat:e.lat,lng:e.lng},safetyScore:k(e,t),message:`CRITICAL: Tourist entered restricted zone: ${r.name}`,timestamp:e.timestamp}))))}),v.current.forEach(r=>{if(!s.has(r)){let s=t.find(e=>e.id===r);s&&(console.log(`[v0] Exited zone: ${s.name} (${s.type})`),iA({touristId:N.current,eventType:"exit",zoneName:s.name,zoneType:s.type,location:{lat:e.lat,lng:e.lng},timestamp:e.timestamp}))}}),v.current=s},[_,k,C]),O=(0,x.useCallback)((e,t)=>{h(!0),y.current&&(clearTimeout(y.current),y.current=null);let r={lat:e,lng:t,accuracy:10,timestamp:new Date().toISOString()};console.log("[v0] Simulated position update:",r);let a={lat:r.lat,lng:r.lng,accuracy:r.accuracy,timestamp:r.timestamp};console.log("[v0] GPS position updated:",a);let n=w.current,o=k(a,n);d(o),T(a,n),iI({touristId:N.current,location:{lat:a.lat,lng:a.lng},safetyScore:o,zoneType:n.find(e=>_(a.lat,a.lng,e.lat,e.lng)<=e.radius)?.type||"unknown",timestamp:a.timestamp}),o<30&&g.current&&k(g.current,n)>=30&&iR({touristId:N.current,alertType:"low_safety_score",location:{lat:a.lat,lng:a.lng},safetyScore:o,message:`Safety score dropped to ${o}% - immediate attention required`,timestamp:a.timestamp}),s(a),g.current=a,i(null)},[k,T,_]),I=(0,x.useCallback)(e=>{let t={lat:e.coords.latitude,lng:e.coords.longitude,accuracy:e.coords.accuracy,timestamp:new Date().toISOString()};console.log("[v0] GPS position updated:",t);let r=w.current,a=k(t,r);d(a),T(t,r),iI({touristId:N.current,location:{lat:t.lat,lng:t.lng},safetyScore:a,zoneType:r.find(e=>_(t.lat,t.lng,e.lat,e.lng)<=e.radius)?.type||"unknown",timestamp:t.timestamp}),a<30&&g.current&&k(g.current,r)>=30&&iR({touristId:N.current,alertType:"low_safety_score",location:{lat:t.lat,lng:t.lng},safetyScore:a,message:`Safety score dropped to ${a}% - immediate attention required`,timestamp:t.timestamp}),s(t),g.current=t,i(null)},[k,T,_]),A=(0,x.useCallback)(e=>{let s="Unknown GPS error";switch(e.code){case e.PERMISSION_DENIED:s="GPS access denied by user",l("denied");break;case e.POSITION_UNAVAILABLE:s="GPS position unavailable";break;case e.TIMEOUT:s="GPS request timeout"}console.error("[v0] GPS error:",s,e),e.code!==e.TIMEOUT||u?e.code!==e.TIMEOUT&&i(s):(console.log("[v0] GPS timeout - starting fallback timer"),y.current=setTimeout(()=>{u||t||(console.log("[v0] GPS unavailable, starting with specified coordinates"),O(28.754605,77.503009))},5e3))},[u,t,O]),R=(0,x.useCallback)(()=>{null!==f.current&&(navigator.geolocation.clearWatch(f.current),f.current=null),y.current&&(clearTimeout(y.current),y.current=null),b.current&&clearTimeout(b.current),j.current&&clearInterval(j.current),a(!1),console.log("[v0] GPS tracking stopped")},[]),D=(0,x.useCallback)(async()=>{if(!navigator.geolocation)return i("Geolocation not supported by this browser"),!1;try{if("permissions"in navigator){let e=await navigator.permissions.query({name:"geolocation"});l(e.state),e.addEventListener("change",()=>{l(e.state)})}let t={enableHighAccuracy:e.enableHighAccuracy??!0,timeout:e.timeout??15e3,maximumAge:e.maximumAge??3e5};return u||navigator.geolocation.getCurrentPosition(I,A,t),u||(f.current=navigator.geolocation.watchPosition(I,A,t)),a(!0),console.log("[v0] GPS tracking started"),!0}catch(e){return console.error("[v0] Failed to start GPS tracking:",e),i("Failed to start GPS tracking"),!1}},[e.enableHighAccuracy,e.timeout,e.maximumAge,I,A,u]),L=(0,x.useCallback)(()=>{h(!1),r&&(R(),setTimeout(()=>D(),100))},[r,D,R]);return(0,x.useEffect)(()=>()=>{R()},[R]),{currentPosition:t,isTracking:r,error:n,permissionStatus:o,currentZones:w.current,safetyScore:c,isManualMode:u,emergencyAlert:m,dismissEmergencyAlert:E,startTracking:D,stopTracking:R,simulatePositionUpdate:O,enableGPSMode:L}},iP=(0,_.Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),iF=(0,_.Z)("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),iM=(0,_.Z)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),iZ=(0,_.Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);function iz({touristId:e,userAge:t,onLocationChange:s,onSafeScoreChange:r,initialZones:a}){let n=(0,x.useRef)(null),[i,o]=(0,x.useState)(null),[l,c]=(0,x.useState)(null),[d,u]=(0,x.useState)([]),[h,m]=(0,x.useState)(!0),[p,b]=(0,x.useState)(null),[j,w]=(0,x.useState)(!1),{currentPosition:N,isTracking:_,error:k,permissionStatus:C,currentZones:S,safetyScore:E,emergencyAlert:T,startTracking:O,stopTracking:I,simulatePositionUpdate:A}=iL({touristId:e,enableHighAccuracy:!0,timeout:15e3,maximumAge:3e4}),R=async()=>{await O()||"denied"!==C||b("GPS permission denied. Please enable location access in your browser settings.")};return p?f.jsx(v.Zb,{className:"border-destructive",children:(0,f.jsxs)(v.aY,{className:"p-6 text-center",children:[(0,f.jsxs)("div",{className:"text-destructive mb-4",children:[f.jsx(a5,{className:"h-12 w-12 mx-auto mb-2"}),f.jsx("h3",{className:"text-lg font-semibold",children:"Map Error"}),f.jsx("p",{className:"text-sm",children:p})]}),(0,f.jsxs)(g.z,{onClick:()=>window.location.reload(),variant:"outline",children:[f.jsx(iP,{className:"h-4 w-4 mr-2"}),"Retry"]})]})}):(0,f.jsxs)("div",{className:"space-y-4",children:[(0,f.jsxs)(v.Zb,{className:"dark:bg-card dark:border-border",children:[f.jsx(v.Ol,{className:"pb-3",children:(0,f.jsxs)(v.ll,{className:"flex items-center justify-between text-sm",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[f.jsx(no,{className:`h-4 w-4 ${_?"animate-pulse text-green-500":"text-gray-400"}`}),f.jsx("span",{className:"text-foreground",children:"Real-Time GPS Tracking"}),T.isActive&&f.jsx(y.C,{variant:"destructive",className:"animate-pulse",children:"\uD83D\uDEA8 EMERGENCY"})]}),f.jsx("div",{className:"flex items-center gap-2",children:j||_?(0,f.jsxs)(y.C,{variant:"outline",className:"text-green-600 border-green-300 dark:text-green-400 dark:border-green-600",children:[f.jsx(nl,{className:"h-3 w-3 mr-1"}),"Connected"]}):(0,f.jsxs)(y.C,{variant:"outline",className:"text-red-600 border-red-300 dark:text-red-400 dark:border-red-600",children:[f.jsx(iF,{className:"h-3 w-3 mr-1"}),"Offline"]})})]})}),(0,f.jsxs)(v.aY,{className:"space-y-3",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[f.jsx(g.z,{onClick:_?I:R,size:"sm",variant:_?"destructive":"default",className:"transition-all duration-200",children:_?(0,f.jsxs)(f.Fragment,{children:[f.jsx(iM,{className:"h-4 w-4 mr-2"}),"Stop GPS"]}):(0,f.jsxs)(f.Fragment,{children:[f.jsx(iZ,{className:"h-4 w-4 mr-2"}),"Start GPS"]})}),"denied"===C&&f.jsx(y.C,{variant:"destructive",className:"text-xs",children:"Permission Denied"}),k&&f.jsx(y.C,{variant:"destructive",className:"text-xs",children:k})]}),(0,f.jsxs)("div",{className:"text-right text-sm",children:[(0,f.jsxs)("div",{className:`font-semibold ${E>=70?"text-green-600 dark:text-green-400":E>=30?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`,children:["Safety: ",E,"%"]}),f.jsx("div",{className:"text-xs text-muted-foreground",children:N?`\xb1${N.accuracy?.toFixed(0)||"?"}m accuracy`:"No GPS signal"})]})]}),N&&(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs bg-muted/50 dark:bg-muted/30 rounded p-2",children:[(0,f.jsxs)("div",{children:[f.jsx("span",{className:"text-muted-foreground",children:"Lat:"}),f.jsx("div",{className:"font-mono text-foreground",children:N.lat.toFixed(6)})]}),(0,f.jsxs)("div",{children:[f.jsx("span",{className:"text-muted-foreground",children:"Lng:"}),f.jsx("div",{className:"font-mono text-foreground",children:N.lng.toFixed(6)})]})]})]})]}),f.jsx(v.Zb,{className:"dark:bg-card dark:border-border",children:f.jsx(v.aY,{className:"p-0",children:(0,f.jsxs)("div",{className:"relative",children:[f.jsx("div",{ref:n,className:"h-96 w-full rounded-lg overflow-hidden",style:{minHeight:"384px"}}),h&&f.jsx("div",{className:"absolute inset-0 bg-background/80 dark:bg-background/90 backdrop-blur-sm rounded-lg flex items-center justify-center",children:(0,f.jsxs)("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),f.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading interactive map..."})]})})]})})}),(0,f.jsxs)(v.Zb,{className:"dark:bg-card dark:border-border",children:[f.jsx(v.Ol,{className:"pb-3",children:f.jsx(v.ll,{className:"text-sm text-foreground",children:"Static Safety Zones (Predefined)"})}),(0,f.jsxs)(v.aY,{children:[(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),f.jsx("span",{className:"text-foreground",children:"Green Safe Zones (3 zones)"})]}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),f.jsx("span",{className:"text-foreground",children:"Orange Caution Zones (4 zones)"})]}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),f.jsx("span",{className:"text-foreground",children:"Red Restricted Zones (6 zones)"})]}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),f.jsx("span",{className:"text-foreground",children:"Purple Crowded Areas (2 zones)"})]})]}),(0,f.jsxs)("div",{className:"mt-3 pt-3 border-t text-xs text-muted-foreground",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("span",{children:["Total Zones: ",S.length]}),f.jsx("span",{children:"\uD83D\uDCCD Drag marker to test emergency alerts"})]}),(0,f.jsxs)("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-950/50 rounded border border-red-200 dark:border-red-800",children:[f.jsx("p",{className:"text-red-700 dark:text-red-300 font-medium",children:"⚠️ Red zones trigger automatic emergency alerts"}),f.jsx("p",{className:"text-red-600 dark:text-red-400 text-xs",children:"Police call initiated if not dismissed within 5 seconds"})]})]})]})]})]})}var i$="horizontal",iB=["horizontal","vertical"],iU=x.forwardRef((e,t)=>{let{decorative:s,orientation:r=i$,...a}=e,n=iB.includes(r)?r:i$;return(0,f.jsx)(tt.WV.div,{"data-orientation":n,...s?{role:"none"}:{"aria-orientation":"vertical"===n?n:void 0,role:"separator"},...a,ref:t})});function iW({className:e,orientation:t="horizontal",decorative:s=!0,...r}){return f.jsx(iU,{"data-slot":"separator",decorative:s,orientation:t,className:(0,aW.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}iU.displayName="Separator";let iV=(0,_.Z)("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),iq=(0,_.Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var iH=s(1625);let iG=(0,_.Z)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),iY=(0,_.Z)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);function iX({userInfo:e}){let[t,s]=(0,x.useState)([]),[r,a]=(0,x.useState)({blockHeight:18945672,networkHashRate:"245.7 TH/s",avgBlockTime:"12.3s",totalTransactions:1847293}),[n,i]=(0,x.useState)(""),[o,l]=(0,x.useState)(""),c=e=>{navigator.clipboard.writeText(e),i(e),setTimeout(()=>i(""),2e3)},d=e=>{switch(e){case"ID_ISSUANCE":return"bg-primary/10 text-primary";case"LOCATION_UPDATE":return"bg-blue-500/10 text-blue-600";case"INCIDENT_LOG":return"bg-destructive/10 text-destructive";case"VERIFICATION":return"bg-accent/10 text-accent";default:return"bg-muted text-muted-foreground"}},u=e=>{window.open(`https://solscan.io/tx/${e}?cluster=devnet`,"_blank")},h=o?t.filter(e=>e.hash.toLowerCase().includes(o.toLowerCase())||e.touristId.toLowerCase().includes(o.toLowerCase())):t;return(0,f.jsxs)("div",{className:"space-y-4",children:[(0,f.jsxs)(v.Zb,{children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2",children:[f.jsx(iq,{className:"h-5 w-5 text-primary"}),f.jsx("span",{children:"NaviSafe Blockchain Network"}),f.jsx(y.C,{variant:"secondary",className:"bg-accent/10 text-accent",children:"Live"})]})}),(0,f.jsxs)(v.aY,{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-lg font-bold text-primary",children:r.blockHeight.toLocaleString()}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Block Height"})]}),(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-lg font-bold text-accent",children:r.networkHashRate}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Hash Rate"})]}),(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-lg font-bold text-orange-500",children:r.avgBlockTime}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Block Time"})]}),(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-lg font-bold text-blue-600",children:r.totalTransactions.toLocaleString()}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Transactions"})]})]}),f.jsx(iW,{}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(iG,{className:"h-4 w-4 text-muted-foreground"}),f.jsx(e2.I,{placeholder:"Search by transaction hash or tourist ID...",value:o,onChange:e=>l(e.target.value),className:"flex-1"})]})]})]}),(0,f.jsxs)(v.Zb,{children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2",children:[f.jsx(iY,{className:"h-5 w-5"}),f.jsx("span",{children:"Recent Blockchain Transactions"})]})}),f.jsx(v.aY,{className:"space-y-3",children:0===h.length?(0,f.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[f.jsx(iq,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),f.jsx("p",{children:"No transactions found matching your search."})]}):h.map(e=>f.jsx("div",{className:"p-4 border border-border rounded-lg space-y-3",children:(0,f.jsxs)("div",{className:"flex items-start justify-between",children:[(0,f.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-3",children:[f.jsx(y.C,{className:d(e.type),children:e.type.replace("_"," ")}),f.jsx(y.C,{variant:"confirmed"===e.status?"default":"pending"===e.status?"secondary":"destructive",children:e.status}),(0,f.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Block #",e.blockNumber.toLocaleString()]})]}),(0,f.jsxs)("div",{className:"space-y-1",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx("span",{className:"text-sm font-medium",children:"Hash:"}),(0,f.jsxs)("span",{className:"text-xs font-mono bg-muted px-2 py-1 rounded",children:[e.hash.slice(0,20),"...",e.hash.slice(-8)]}),f.jsx(g.z,{variant:"ghost",size:"sm",onClick:()=>c(e.hash),className:"h-6 w-6 p-0",children:n===e.hash?f.jsx(C.Z,{className:"h-3 w-3 text-accent"}):f.jsx(iH.Z,{className:"h-3 w-3"})})]}),(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-xs",children:[(0,f.jsxs)("div",{children:[f.jsx("span",{className:"text-muted-foreground",children:"From:"}),(0,f.jsxs)("p",{className:"font-mono",children:[e.from.slice(0,10),"...",e.from.slice(-8)]})]}),(0,f.jsxs)("div",{children:[f.jsx("span",{className:"text-muted-foreground",children:"To:"}),(0,f.jsxs)("p",{className:"font-mono",children:[e.to.slice(0,10),"...",e.to.slice(-8)]})]}),(0,f.jsxs)("div",{children:[f.jsx("span",{className:"text-muted-foreground",children:"Tourist ID:"}),f.jsx("p",{className:"font-medium",children:e.touristId})]}),(0,f.jsxs)("div",{children:[f.jsx("span",{className:"text-muted-foreground",children:"Gas Used:"}),f.jsx("p",{children:e.gasUsed.toLocaleString()})]})]}),f.jsx("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground",children:(0,f.jsxs)("div",{className:"flex items-center space-x-1",children:[f.jsx(a6,{className:"h-3 w-3"}),f.jsx("span",{children:e.timestamp.toLocaleString()})]})})]})]}),(0,f.jsxs)(g.z,{variant:"outline",size:"sm",onClick:()=>u(e.hash),className:"ml-4",children:[f.jsx(N.Z,{className:"h-4 w-4 mr-2"}),"Explorer"]})]})},e.hash))})]}),(0,f.jsxs)(v.Zb,{children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2",children:[f.jsx(j.Z,{className:"h-5 w-5 text-primary"}),f.jsx("span",{children:"NaviSafe Smart Contracts"})]})}),f.jsx(v.aY,{className:"space-y-3",children:(0,f.jsxs)("div",{className:"grid gap-3",children:[f.jsx("div",{className:"p-3 bg-muted/50 rounded-lg",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[f.jsx("p",{className:"font-medium",children:"Tourist ID Contract"}),f.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:"0xNaviSafeContract123456789abcdef"})]}),f.jsx(y.C,{variant:"secondary",className:"bg-primary/10 text-primary",children:"Active"})]})}),f.jsx("div",{className:"p-3 bg-muted/50 rounded-lg",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[f.jsx("p",{className:"font-medium",children:"Authority Management"}),f.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:"0xAuthorityContract987654321fedcba"})]}),f.jsx(y.C,{variant:"secondary",className:"bg-accent/10 text-accent",children:"Active"})]})})]})})]})]})}function iK({userInfo:e,onBack:t}){let[s,r]=(0,x.useState)(new Date),[a,n]=(0,x.useState)(!1),[i,o]=(0,x.useState)("en"),[l,c]=(0,x.useState)(!1),d=e?.blockchainData?.transactionSignature||"5J7X9K2M8N4P6Q1R3S5T7U9V2W4X6Y8Z1A3B5C7D9E",u=e?.blockchainData?.slot?.toString()||"200123456",h=e?.blockchainData?.digitalId||`NVS-${Date.now().toString().slice(-8)}`,m=new Date(e?.blockchainData?.blockTime?1e3*e.blockchainData.blockTime:Date.now()),p=new Date(e?.expiryDate||Date.now()+2592e6),b=e=>{navigator.clipboard.writeText(e),n(!0),setTimeout(()=>n(!1),2e3)},w={en:{title:"Digital Tourist ID",subtitle:"Your secure travel identification",touristId:"Tourist ID",status:"Status",active:"Active",validUntil:"Valid Until",issuedOn:"Issued On",blockchainId:"Blockchain ID",viewOnBlockchain:"View on Blockchain",qrCode:"QR Code",scanInstructions:"Scan this QR code for instant verification",emergencyInfo:"Emergency Information",bloodType:"Blood Type",allergies:"Allergies",emergencyContact:"Emergency Contact",backToDashboard:"Back to Dashboard",blockchainDetails:"Blockchain Details"},hi:{title:"डिजिटल पर्यटक पहचान",subtitle:"आपकी सुरक्षित यात्रा पहचान",touristId:"पर्यटक आईडी",status:"स्थिति",active:"सक्रिय",validUntil:"तक वैध",issuedOn:"जारी किया गया",blockchainId:"ब्लॉकचेन आईडी",viewOnBlockchain:"ब्लॉकचेन पर देखें",qrCode:"क्यूआर कोड",scanInstructions:"तत्काल सत्यापन के लिए इस QR कोड को स्कैन करें",emergencyInfo:"आपातकालीन जानकारी",bloodType:"रक्त समूह",allergies:"एलर्जी",emergencyContact:"आपातकालीन संपर्क",backToDashboard:"डैशबोर्ड पर वापस",blockchainDetails:"ब्लॉकचेन विवरण"}}[i];return l?(0,f.jsxs)("div",{className:"min-h-screen bg-background",children:[f.jsx("div",{className:"bg-foreground text-background p-4 sticky top-0 z-[1000] shadow-md animate-in slide-in-from-top-4 duration-500",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[f.jsx(g.z,{variant:"ghost",onClick:()=>c(!1),className:"text-background hover:bg-background/10 hover:scale-105 transition-all duration-200",children:"← Back to Digital ID"}),(0,f.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,f.jsxs)(g.z,{variant:"outline",size:"sm",onClick:()=>o("en"===i?"hi":"en"),className:"flex items-center space-x-2 bg-transparent border-background/20 text-background hover:bg-background/10 hover:scale-105 transition-all duration-200",children:[f.jsx(ni,{className:"h-4 w-4 hover:rotate-12 transition-transform duration-300"}),f.jsx("span",{children:"en"===i?"हिंदी":"English"})]}),f.jsx(O,{})]})]})}),f.jsx("div",{className:"p-4 animate-in fade-in-0 slide-in-from-bottom-4 duration-500",children:f.jsx(iX,{userInfo:e})})]}):(0,f.jsxs)("div",{className:"min-h-screen bg-background",children:[f.jsx("div",{className:"bg-foreground text-background p-4 sticky top-0 z-[1000] shadow-md animate-in slide-in-from-top-4 duration-500",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)(g.z,{variant:"ghost",onClick:t,className:"text-background hover:bg-background/10 hover:scale-105 transition-all duration-200",children:["← ",w.backToDashboard]}),(0,f.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,f.jsxs)(g.z,{variant:"outline",size:"sm",onClick:()=>o("en"===i?"hi":"en"),className:"flex items-center space-x-2 bg-transparent border-background/20 text-background hover:bg-background/10 hover:scale-105 transition-all duration-200",children:[f.jsx(ni,{className:"h-4 w-4 hover:rotate-12 transition-transform duration-300"}),f.jsx("span",{children:"en"===i?"हिंदी":"English"})]}),f.jsx(O,{})]})]})}),f.jsx("div",{className:"p-4 space-y-4",children:(0,f.jsxs)(v.Zb,{className:"border-2 border-primary/20 shadow-lg hover:shadow-2xl hover:scale-[1.02] transition-all duration-500 animate-in fade-in-0 slide-in-from-bottom-8 duration-700 hover:shadow-primary/10",children:[(0,f.jsxs)(v.Ol,{className:"text-center space-y-2 bg-gradient-to-r from-primary/5 to-accent/5 hover:from-primary/10 hover:to-accent/10 transition-all duration-300",children:[f.jsx("div",{className:"flex justify-center animate-in fade-in-0 zoom-in-50 duration-700 delay-200",children:f.jsx("div",{className:"p-3 bg-primary/10 rounded-full hover:bg-primary/20 transition-all duration-300 hover:scale-110 hover:rotate-6 group",children:f.jsx(j.Z,{className:"h-8 w-8 text-primary group-hover:text-primary/80 transition-colors duration-300"})})}),f.jsx(v.ll,{className:"text-xl animate-in fade-in-0 slide-in-from-bottom-4 duration-700 delay-300 hover:text-primary transition-colors duration-300 cursor-default",children:w.title}),f.jsx("p",{className:"text-sm text-muted-foreground animate-in fade-in-0 slide-in-from-bottom-4 duration-700 delay-400",children:w.subtitle})]}),(0,f.jsxs)(v.aY,{className:"space-y-6 p-6",children:[(0,f.jsxs)("div",{className:"space-y-4 animate-in fade-in-0 slide-in-from-bottom-4 duration-700 delay-500",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-4 hover:bg-muted/30 p-3 rounded-lg transition-all duration-300 hover:scale-[1.02]",children:[f.jsx("div",{className:"p-3 bg-muted rounded-full hover:bg-muted/80 transition-all duration-300 hover:scale-110",children:f.jsx(aJ,{className:"h-6 w-6"})}),(0,f.jsxs)("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-semibold text-lg hover:text-primary transition-colors duration-300",children:e?.name||"John Doe"}),(0,f.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e?.age||"28"," years • ",e?.gender||"Male"]})]}),f.jsx(y.C,{variant:"secondary",className:"bg-accent/10 text-accent hover:bg-accent/20 hover:scale-105 transition-all duration-300 animate-pulse",children:w.active})]}),f.jsx(iW,{className:"animate-in fade-in-0 duration-700 delay-600"}),(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm animate-in fade-in-0 slide-in-from-bottom-4 duration-700 delay-700",children:[(0,f.jsxs)("div",{className:"hover:bg-muted/30 p-2 rounded transition-all duration-300 hover:scale-105",children:[f.jsx("p",{className:"text-muted-foreground",children:w.touristId}),f.jsx("p",{className:"font-mono font-semibold",children:h})]}),(0,f.jsxs)("div",{className:"hover:bg-muted/30 p-2 rounded transition-all duration-300 hover:scale-105",children:[f.jsx("p",{className:"text-muted-foreground",children:w.status}),f.jsx(y.C,{variant:"secondary",className:"bg-primary/10 text-primary hover:bg-primary/20 transition-colors duration-300",children:w.active})]}),(0,f.jsxs)("div",{className:"hover:bg-muted/30 p-2 rounded transition-all duration-300 hover:scale-105",children:[f.jsx("p",{className:"text-muted-foreground",children:w.issuedOn}),f.jsx("p",{className:"font-medium",children:m.toLocaleDateString()})]}),(0,f.jsxs)("div",{className:"hover:bg-muted/30 p-2 rounded transition-all duration-300 hover:scale-105",children:[f.jsx("p",{className:"text-muted-foreground",children:w.validUntil}),f.jsx("p",{className:"font-medium",children:p.toLocaleDateString()})]})]})]}),f.jsx(iW,{className:"animate-in fade-in-0 duration-700 delay-800"}),(0,f.jsxs)("div",{className:"text-center space-y-4 animate-in fade-in-0 slide-in-from-bottom-4 duration-700 delay-900",children:[(0,f.jsxs)("h4",{className:"font-semibold flex items-center justify-center space-x-2 hover:text-primary transition-colors duration-300",children:[f.jsx(iV,{className:"h-5 w-5 hover:rotate-12 transition-transform duration-300"}),f.jsx("span",{children:w.qrCode})]}),f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:"p-4 bg-white border-2 border-border rounded-lg shadow-sm hover:shadow-lg hover:scale-105 transition-all duration-300 hover:border-primary/30 group",children:(0,f.jsxs)("svg",{width:"200",height:"200",className:"border group-hover:border-primary/20 transition-colors duration-300",children:[f.jsx("defs",{children:(0,f.jsxs)("pattern",{id:"qr-pattern",patternUnits:"userSpaceOnUse",width:"10",height:"10",children:[f.jsx("rect",{width:"5",height:"5",fill:"#000"}),f.jsx("rect",{x:"5",y:"5",width:"5",height:"5",fill:"#000"})]})}),f.jsx("rect",{width:"200",height:"200",fill:"white"}),f.jsx("rect",{x:"10",y:"10",width:"180",height:"180",fill:"url(#qr-pattern)"}),f.jsx("rect",{x:"20",y:"20",width:"40",height:"40",fill:"#059669"}),f.jsx("rect",{x:"140",y:"20",width:"40",height:"40",fill:"#059669"}),f.jsx("rect",{x:"20",y:"140",width:"40",height:"40",fill:"#059669"}),f.jsx("text",{x:"100",y:"105",textAnchor:"middle",fontSize:"8",fill:"#059669",fontWeight:"bold",children:"NaviSafe"})]})})}),f.jsx("p",{className:"text-xs text-muted-foreground",children:w.scanInstructions})]}),f.jsx(iW,{className:"animate-in fade-in-0 duration-700 delay-1000"}),(0,f.jsxs)("div",{className:"space-y-3 animate-in fade-in-0 slide-in-from-bottom-4 duration-700 delay-1100",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[f.jsx("h4",{className:"font-semibold hover:text-primary transition-colors duration-300",children:w.blockchainId}),(0,f.jsxs)(g.z,{variant:"outline",size:"sm",onClick:()=>c(!0),className:"flex items-center space-x-2 hover:scale-105 active:scale-95 transition-all duration-200 hover:shadow-md",children:[f.jsx(iq,{className:"h-4 w-4 hover:rotate-12 transition-transform duration-300"}),f.jsx("span",{children:w.blockchainDetails})]})]}),(0,f.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg space-y-2 hover:bg-muted/70 transition-colors duration-300 hover:shadow-sm",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-xs font-mono break-all hover:text-primary transition-colors duration-300",children:d}),f.jsx(g.z,{variant:"ghost",size:"sm",onClick:()=>b(d),className:"h-8 w-8 p-0 hover:scale-110 active:scale-95 transition-all duration-200",children:a?f.jsx(C.Z,{className:"h-4 w-4 text-accent animate-bounce"}):f.jsx(iH.Z,{className:"h-4 w-4 hover:text-primary transition-colors duration-300"})})]}),(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-xs text-muted-foreground",children:"Block:"}),f.jsx("span",{className:"text-xs font-mono",children:u})]}),(0,f.jsxs)(g.z,{variant:"outline",size:"sm",className:"w-full bg-transparent hover:scale-105 active:scale-95 transition-all duration-200 hover:shadow-md",onClick:()=>window.open(`https://solscan.io/tx/${d}?cluster=devnet`,"_blank"),children:[f.jsx(N.Z,{className:"h-4 w-4 mr-2 hover:rotate-12 transition-transform duration-300"}),w.viewOnBlockchain]})]})]}),f.jsx(iW,{className:"animate-in fade-in-0 duration-700 delay-1200"}),(0,f.jsxs)("div",{className:"space-y-3 animate-in fade-in-0 slide-in-from-bottom-4 duration-700 delay-1300",children:[f.jsx("h4",{className:"font-semibold text-destructive hover:text-destructive/80 transition-colors duration-300",children:w.emergencyInfo}),(0,f.jsxs)("div",{className:"grid grid-cols-1 gap-3 text-sm",children:[(0,f.jsxs)("div",{className:"flex justify-between hover:bg-muted/30 p-2 rounded transition-all duration-300 hover:scale-[1.02]",children:[(0,f.jsxs)("span",{className:"text-muted-foreground",children:[w.bloodType,":"]}),f.jsx("span",{className:"font-medium",children:"O+"})]}),(0,f.jsxs)("div",{className:"flex justify-between hover:bg-muted/30 p-2 rounded transition-all duration-300 hover:scale-[1.02]",children:[(0,f.jsxs)("span",{className:"text-muted-foreground",children:[w.allergies,":"]}),f.jsx("span",{className:"font-medium",children:"None"})]}),(0,f.jsxs)("div",{className:"flex justify-between hover:bg-muted/30 p-2 rounded transition-all duration-300 hover:scale-[1.02]",children:[(0,f.jsxs)("span",{className:"text-muted-foreground",children:[w.emergencyContact,":"]}),f.jsx("span",{className:"font-medium",children:e?.phone||"+91 98765 43210"})]})]})]}),(0,f.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-xs text-muted-foreground animate-in fade-in-0 duration-700 delay-1400",children:[f.jsx(a6,{className:"h-4 w-4 animate-spin",style:{animationDuration:"8s"}}),(0,f.jsxs)("span",{children:["Last updated: ",s.toLocaleTimeString()]})]})]})]})})]})}let iJ=(0,_.Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),iQ=(0,_.Z)("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]),i0=(0,_.Z)("Siren",[["path",{d:"M7 18v-6a5 5 0 1 1 10 0v6",key:"pcx96s"}],["path",{d:"M5 21a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-1a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2z",key:"1b4s83"}],["path",{d:"M21 12h1",key:"jtio3y"}],["path",{d:"M18.5 4.5 18 5",key:"g5sp9y"}],["path",{d:"M2 12h1",key:"1uaihz"}],["path",{d:"M12 2v1",key:"11qlp1"}],["path",{d:"m4.929 4.929.707.707",key:"1i51kw"}],["path",{d:"M12 12v6",key:"3ahymv"}]]);function i1({userInfo:e,currentLocation:t,onBack:s}){let[r,a]=(0,x.useState)(null),[n,i]=(0,x.useState)(""),[o,l]=(0,x.useState)("en"),c=[{id:"medical",icon:iJ,label:"Medical Emergency",color:"bg-red-500",priority:"HIGH"},{id:"security",icon:j.Z,label:"Security Threat",color:"bg-orange-500",priority:"HIGH"},{id:"accident",icon:iQ,label:"Accident",color:"bg-yellow-500",priority:"MEDIUM"},{id:"lost",icon:a5,label:"Lost/Stranded",color:"bg-blue-500",priority:"MEDIUM"},{id:"harassment",icon:a9,label:"Harassment",color:"bg-purple-500",priority:"HIGH"},{id:"other",icon:na,label:"Other Emergency",color:"bg-gray-500",priority:"MEDIUM"}],d={en:{title:"Emergency Response",subtitle:"Get immediate help when you need it",selectType:"Select Emergency Type",additionalInfo:"Additional Information (Optional)",placeholder:"Describe your situation...",sendAlert:"Send Emergency Alert",quickCall:"Quick Call",currentLocation:"Current Location",estimatedResponse:"Estimated Response Time: 5-10 minutes",backToDashboard:"Back to Dashboard"},hi:{title:"आपातकालीन प्रतिक्रिया",subtitle:"जब आपको जरूरत हो तो तुरंत मदद पाएं",selectType:"आपातकाल का प्रकार चुनें",additionalInfo:"अतिरिक्त जानकारी (वैकल्पिक)",placeholder:"अपनी स्थिति का वर्णन करें...",sendAlert:"आपातकालीन अलर्ट भेजें",quickCall:"त्वरित कॉल",currentLocation:"वर्तमान स्थान",estimatedResponse:"अनुमानित प्रतिक्रिया समय: 5-10 मिनट",backToDashboard:"डैशबोर्ड पर वापस"}}[o];return(0,f.jsxs)("div",{className:"min-h-screen bg-background",children:[f.jsx("div",{className:"bg-foreground text-background p-4 sticky top-0 z-[1000] shadow-md",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)(g.z,{variant:"ghost",onClick:s,className:"text-background hover:bg-background/10",children:["← ",d.backToDashboard]}),(0,f.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,f.jsxs)(g.z,{variant:"outline",size:"sm",onClick:()=>l("en"===o?"hi":"en"),className:"flex items-center space-x-2 bg-transparent border-background/20 text-background hover:bg-background/10",children:[f.jsx(ni,{className:"h-4 w-4"}),f.jsx("span",{children:"en"===o?"हिंदी":"English"})]}),f.jsx(O,{})]})]})}),(0,f.jsxs)("div",{className:"p-4 space-y-4",children:[f.jsx(v.Zb,{className:"border-2 border-destructive/20 bg-destructive/5",children:(0,f.jsxs)(v.Ol,{className:"text-center space-y-2",children:[f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:"p-3 bg-destructive/10 rounded-full animate-pulse",children:f.jsx(i0,{className:"h-8 w-8 text-destructive"})})}),f.jsx(v.ll,{className:"text-xl text-destructive",children:d.title}),f.jsx("p",{className:"text-sm text-muted-foreground",children:d.subtitle})]})}),(0,f.jsxs)(v.Zb,{children:[f.jsx(v.Ol,{children:f.jsx(v.ll,{className:"text-lg",children:d.selectType})}),f.jsx(v.aY,{className:"space-y-3",children:f.jsx("div",{className:"grid grid-cols-2 gap-3",children:c.map(e=>{let t=e.icon;return f.jsx(g.z,{variant:r===e.id?"default":"outline",className:`h-20 flex-col space-y-2 p-3 ${r===e.id?e.color:""}`,onClick:()=>a(e.id),children:(0,f.jsxs)("div",{className:"flex flex-col items-center space-y-1",children:[f.jsx(t,{className:"h-6 w-6 flex-shrink-0"}),f.jsx("span",{className:"text-xs text-center leading-tight",children:e.label}),f.jsx(y.C,{variant:"secondary",className:"text-xs px-1 py-0",children:e.priority})]})},e.id)})})})]}),(0,f.jsxs)(v.Zb,{children:[f.jsx(v.Ol,{children:f.jsx(v.ll,{className:"text-lg",children:d.additionalInfo})}),f.jsx(v.aY,{children:f.jsx(a3,{placeholder:d.placeholder,value:n,onChange:e=>i(e.target.value),className:"min-h-20"})})]}),f.jsx(v.Zb,{children:f.jsx(v.aY,{className:"p-4",children:(0,f.jsxs)("div",{className:"flex items-center space-x-3",children:[f.jsx(a5,{className:"h-5 w-5 text-primary"}),(0,f.jsxs)("div",{className:"flex-1",children:[f.jsx("p",{className:"font-medium",children:d.currentLocation}),(0,f.jsxs)("p",{className:"text-sm text-muted-foreground",children:[t.lat.toFixed(4),", ",t.lng.toFixed(4)]})]}),(0,f.jsxs)(y.C,{variant:"secondary",className:"bg-accent/10 text-accent",children:[f.jsx(a6,{className:"h-3 w-3 mr-1"}),"Live"]})]})})}),(0,f.jsxs)(v.Zb,{children:[f.jsx(v.Ol,{children:f.jsx(v.ll,{className:"text-lg",children:d.quickCall})}),f.jsx(v.aY,{className:"space-y-2",children:[{name:"Police",number:"100",type:"security"},{name:"Medical Emergency",number:"108",type:"medical"},{name:"Fire Department",number:"101",type:"fire"},{name:"Tourist Helpline",number:"1363",type:"tourist"},{name:"Women Helpline",number:"1091",type:"women"}].map((e,t)=>(0,f.jsxs)(g.z,{variant:"outline",className:"w-full justify-between h-12 bg-transparent p-3",onClick:()=>alert(`Calling ${e.name} at ${e.number}`),children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(nn,{className:"h-4 w-4 flex-shrink-0"}),f.jsx("span",{className:"truncate",children:e.name})]}),f.jsx("span",{className:"font-mono text-sm flex-shrink-0",children:e.number})]},t))})]}),(0,f.jsxs)(g.z,{onClick:()=>{let s=c.find(e=>e.id===r);alert(`🚨 EMERGENCY ALERT ACTIVATED 🚨

Emergency Type: ${s?.label||"General Emergency"}
Priority: ${s?.priority||"MEDIUM"}

Tourist Details:
• Name: ${e?.name||"Unknown"}
• ID: NVS-${Date.now().toString().slice(-8)}
• Phone: ${e?.phone||"Not provided"}

Location Details:
• Coordinates: ${t.lat.toFixed(6)}, ${t.lng.toFixed(6)}
• Address: Connaught Place, New Delhi, Delhi 110001, India
• Timestamp: ${new Date().toLocaleString()}

Additional Information:
${n||"None provided"}

AUTHORITIES NOTIFIED:
✅ Local Police (100)
✅ Medical Emergency (108)
✅ Tourist Helpline (1363)

Response teams are being dispatched to your location.
Stay calm and wait for assistance.`)},disabled:!r,className:"w-full h-16 text-lg font-bold bg-destructive hover:bg-destructive/90 shadow-lg",size:"lg",children:[f.jsx(i0,{className:"h-6 w-6 mr-2"}),d.sendAlert]}),f.jsx("p",{className:"text-center text-sm text-muted-foreground",children:d.estimatedResponse})]})]})}var i2="Switch",[i3,i5]=(0,e7.b)(i2),[i4,i6]=i3(i2),i9=x.forwardRef((e,t)=>{let{__scopeSwitch:s,name:r,checked:a,defaultChecked:n,required:i,disabled:o,value:l="on",onCheckedChange:c,form:d,...u}=e,[h,m]=x.useState(null),p=(0,e8.e)(t,e=>m(e)),g=x.useRef(!1),v=!h||d||!!h.closest("form"),[y,b]=(0,rt.T)({prop:a,defaultProp:n??!1,onChange:c,caller:i2});return(0,f.jsxs)(i4,{scope:s,checked:y,disabled:o,children:[(0,f.jsx)(tt.WV.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":ot(y),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:p,onClick:(0,e6.Mj)(e.onClick,e=>{b(e=>!e),v&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})}),v&&(0,f.jsx)(oe,{control:h,bubbles:!g.current,name:r,value:l,checked:y,required:i,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});i9.displayName=i2;var i8="SwitchThumb",i7=x.forwardRef((e,t)=>{let{__scopeSwitch:s,...r}=e,a=i6(i8,s);return(0,f.jsx)(tt.WV.span,{"data-state":ot(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});i7.displayName=i8;var oe=x.forwardRef(({__scopeSwitch:e,control:t,checked:s,bubbles:r=!0,...a},n)=>{let i=x.useRef(null),o=(0,e8.e)(i,n),l=rs(s),c=sW(t);return x.useEffect(()=>{let e=i.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==s&&t){let a=new Event("click",{bubbles:r});t.call(e,s),e.dispatchEvent(a)}},[l,s,r]),(0,f.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...a,tabIndex:-1,ref:o,style:{...a.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function ot(e){return e?"checked":"unchecked"}function os({className:e,...t}){return f.jsx(i9,{"data-slot":"switch",className:(0,aW.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:f.jsx(i7,{"data-slot":"switch-thumb",className:(0,aW.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}oe.displayName="SwitchBubbleInput";var or=s(7316);let oa=(0,_.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var on=s(457);let oi=(0,_.Z)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function oo({userInfo:e,emergencyContacts:t,currentLocation:s,onBack:r}){let a;let[n,i]=(0,x.useState)(!1),[o,l]=(0,x.useState)("1"),[c,d]=(0,x.useState)([]),[u,h]=(0,x.useState)(!1),[m,p]=(0,x.useState)(!0),[b,w]=(0,x.useState)(0),[N,_]=(0,x.useState)(null),k=e=>{i(e),e?(_(new Date),w(3600*Number.parseInt(o))):(_(null),w(0))},S=e=>{d(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},E=e=>{let t=Math.floor(e/3600),s=Math.floor(e%3600/60),r=e%60;return t>0?`${t}h ${s}m ${r}s`:s>0?`${s}m ${r}s`:`${r}s`};return(0,f.jsxs)("div",{className:"min-h-screen bg-background",children:[f.jsx("div",{className:"bg-foreground text-background p-4 sticky top-0 z-[1000] shadow-md",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[f.jsx(g.z,{variant:"ghost",onClick:r,className:"text-background hover:bg-background/10",children:"← Back to Dashboard"}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(or.Z,{className:"h-5 w-5"}),f.jsx("span",{className:"font-semibold",children:"Location Sharing"})]})]})}),(0,f.jsxs)("div",{className:"p-4 space-y-4",children:[f.jsx(v.Zb,{className:"border-2 border-blue-200 bg-blue-50 dark:bg-blue-950 dark:border-blue-800",children:f.jsx(v.aY,{className:"p-4",children:(0,f.jsxs)("div",{className:"flex items-start space-x-3",children:[f.jsx(oa,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"Privacy-First Location Sharing"}),f.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"You have complete control over your location data. Sharing is secure, encrypted, and can be revoked at any time. Location data is only shared with your chosen contacts and authorized personnel when enabled."})]})]})})}),(0,f.jsxs)(v.Zb,{className:`border-2 ${n?"border-accent bg-accent/5":"border-border"}`,children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(a5,{className:`h-5 w-5 ${n?"text-accent animate-pulse":"text-muted-foreground"}`}),f.jsx("span",{children:"Real-Time Location Sharing"})]}),f.jsx(y.C,{variant:n?"default":"secondary",className:n?"bg-accent animate-pulse":"",children:n?"Active":"Inactive"})]})}),(0,f.jsxs)(v.aY,{className:"space-y-6",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between p-4 bg-muted/30 rounded-lg",children:[(0,f.jsxs)("div",{className:"space-y-1",children:[f.jsx(e3._,{className:"text-base font-medium",children:"Enable Location Sharing"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Share your real-time location with selected contacts and authorities"})]}),f.jsx(os,{checked:n,onCheckedChange:k,className:"data-[state=checked]:bg-accent"})]}),n&&f.jsx("div",{className:"space-y-4 animate-in fade-in-0 slide-in-from-bottom-4 duration-500",children:(0,f.jsxs)("div",{className:"p-4 bg-accent/10 border border-accent/20 rounded-lg",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(C.Z,{className:"h-5 w-5 text-accent"}),f.jsx("span",{className:"font-medium text-accent",children:"Location Sharing Active"})]}),(0,f.jsxs)(y.C,{variant:"outline",className:"text-accent border-accent/30",children:[(a=c.length,u&&(a+=1),a)," Recipients"]})]}),(0,f.jsxs)("div",{className:"text-sm text-muted-foreground space-y-1",children:[(0,f.jsxs)("p",{children:["Started: ",N?.toLocaleString()]}),(0,f.jsxs)("p",{children:["Time Remaining:"," ",f.jsx("span",{className:"font-mono font-medium",children:E(b)})]}),(0,f.jsxs)("p",{children:["Current Location: ",s.lat.toFixed(4),", ",s.lng.toFixed(4)]})]})]})}),f.jsx(iW,{}),(0,f.jsxs)("div",{className:"space-y-3",children:[f.jsx(e3._,{className:"text-base font-medium",children:"Sharing Duration"}),(0,f.jsxs)(aV,{value:o,onValueChange:l,disabled:n,children:[f.jsx(aH,{children:f.jsx(aq,{})}),(0,f.jsxs)(aG,{children:[f.jsx(aY,{value:"0.5",children:"30 minutes"}),f.jsx(aY,{value:"1",children:"1 hour"}),f.jsx(aY,{value:"2",children:"2 hours"}),f.jsx(aY,{value:"4",children:"4 hours"}),f.jsx(aY,{value:"8",children:"8 hours"}),f.jsx(aY,{value:"24",children:"24 hours"})]})]}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Location sharing will automatically stop after the selected duration"})]}),f.jsx(iW,{}),(0,f.jsxs)("div",{className:"space-y-3",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"space-y-1",children:[f.jsx(e3._,{className:"text-base font-medium",children:"Emergency Only Mode"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Only share location during active emergencies or SOS alerts"})]}),f.jsx(os,{checked:m,onCheckedChange:p,disabled:n})]}),m&&f.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-950 border border-orange-200 dark:border-orange-800 rounded-lg",children:(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(na,{className:"h-4 w-4 text-orange-600"}),f.jsx("span",{className:"text-sm font-medium text-orange-800 dark:text-orange-200",children:"Location will only be shared during emergencies"})]})})]})]})]}),(0,f.jsxs)(v.Zb,{children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2",children:[f.jsx(a9,{className:"h-5 w-5"}),f.jsx("span",{children:"Share with Emergency Contacts"})]})}),f.jsx(v.aY,{className:"space-y-3",children:t.length>0?t.map((e,t)=>(0,f.jsxs)("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[(0,f.jsxs)("div",{className:"flex-1",children:[f.jsx("p",{className:"font-medium",children:e.name}),(0,f.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.relationship," • ",e.phone]})]}),f.jsx(os,{checked:c.includes(t.toString()),onCheckedChange:()=>S(t.toString()),disabled:n})]},t)):(0,f.jsxs)("div",{className:"text-center py-6 text-muted-foreground",children:[f.jsx(a9,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),f.jsx("p",{children:"No emergency contacts available"}),f.jsx("p",{className:"text-sm",children:"Add emergency contacts in your trip details"})]})})]}),(0,f.jsxs)(v.Zb,{children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2",children:[f.jsx(j.Z,{className:"h-5 w-5"}),f.jsx("span",{children:"Share with Authorities"})]})}),f.jsx(v.aY,{children:(0,f.jsxs)("div",{className:"flex items-center justify-between p-3 border border-border rounded-lg",children:[(0,f.jsxs)("div",{className:"flex-1",children:[f.jsx("p",{className:"font-medium",children:"Authorized Law Enforcement"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"NaviSafe authorities and local police for emergency response"})]}),f.jsx(os,{checked:u,onCheckedChange:h,disabled:n})]})})]}),(0,f.jsxs)(v.Zb,{className:"border-2 border-muted",children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2",children:[f.jsx(on.Z,{className:"h-5 w-5"}),f.jsx("span",{children:"Sharing Status Summary"})]})}),(0,f.jsxs)(v.aY,{className:"space-y-3",children:[(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx("p",{className:"text-muted-foreground",children:"Status:"}),f.jsx(y.C,{variant:n?"default":"secondary",children:n?"Sharing Active":"Not Sharing"})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx("p",{className:"text-muted-foreground",children:"Mode:"}),f.jsx(y.C,{variant:"outline",children:m?"Emergency Only":"Continuous"})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx("p",{className:"text-muted-foreground",children:"Emergency Contacts:"}),(0,f.jsxs)(y.C,{variant:"outline",children:[c.length," Selected"]})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx("p",{className:"text-muted-foreground",children:"Authorities:"}),f.jsx(y.C,{variant:"outline",children:u?"Enabled":"Disabled"})]})]}),n&&f.jsx("div",{className:"pt-3 border-t border-border",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm font-medium",children:"Time Remaining:"}),f.jsx("span",{className:"font-mono text-sm",children:E(b)})]})})]})]}),n&&(0,f.jsxs)(g.z,{onClick:()=>k(!1),variant:"destructive",className:"w-full h-12 font-semibold",children:[f.jsx(oi,{className:"h-5 w-5 mr-2"}),"Stop Location Sharing Immediately"]})]})]})}var ol="Progress",[oc,od]=(0,e7.b)(ol),[ou,oh]=oc(ol),om=x.forwardRef((e,t)=>{var s,r;let{__scopeProgress:a,value:n=null,max:i,getValueLabel:o=ox,...l}=e;(i||0===i)&&!oy(i)&&console.error((s=`${i}`,`Invalid prop \`max\` of value \`${s}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let c=oy(i)?i:100;null===n||ob(n,c)||console.error((r=`${n}`,`Invalid prop \`value\` of value \`${r}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let d=ob(n,c)?n:null,u=ov(d)?o(d,c):void 0;return(0,f.jsx)(ou,{scope:a,value:d,max:c,children:(0,f.jsx)(tt.WV.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":ov(d)?d:void 0,"aria-valuetext":u,role:"progressbar","data-state":og(d,c),"data-value":d??void 0,"data-max":c,...l,ref:t})})});om.displayName=ol;var op="ProgressIndicator",of=x.forwardRef((e,t)=>{let{__scopeProgress:s,...r}=e,a=oh(op,s);return(0,f.jsx)(tt.WV.div,{"data-state":og(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...r,ref:t})});function ox(e,t){return`${Math.round(e/t*100)}%`}function og(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function ov(e){return"number"==typeof e}function oy(e){return ov(e)&&!isNaN(e)&&e>0}function ob(e,t){return ov(e)&&!isNaN(e)&&e<=t&&e>=0}function oj({className:e,value:t,...s}){return f.jsx(om,{"data-slot":"progress",className:(0,aW.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...s,children:f.jsx(of,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}of.displayName=op;let ow=(0,_.Z)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),oN=(0,_.Z)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),o_=(0,_.Z)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),ok=(0,_.Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),oC=(0,_.Z)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);function oS({userInfo:e,tripDetails:t,safeScore:s,onBack:r}){var a;let[n,i]=(0,x.useState)({totalPoints:850,level:3,rank:"Safety Explorer",safetyStreak:5,zonesVisited:8,emergencyContactsAdded:t?.emergencyContacts?.length||0,reportsSubmitted:2}),[o,l]=(0,x.useState)([{id:"first_steps",name:"First Steps",description:"Complete your tourist registration",icon:"\uD83C\uDFAF",points:100,unlocked:!0,progress:1,maxProgress:1,category:"safety"},{id:"safety_conscious",name:"Safety Conscious",description:"Add emergency contacts to your profile",icon:"\uD83D\uDC65",points:150,unlocked:t?.emergencyContacts?.length>0,progress:t?.emergencyContacts?.length||0,maxProgress:3,category:"safety"},{id:"zone_explorer",name:"Zone Explorer",description:"Visit 5 different safety zones",icon:"\uD83D\uDDFA️",points:200,unlocked:!1,progress:3,maxProgress:5,category:"exploration"},{id:"safety_streak",name:"Safety Streak",description:"Maintain 80%+ safety score for 7 days",icon:"\uD83D\uDD25",points:300,unlocked:!1,progress:5,maxProgress:7,category:"safety"},{id:"community_guardian",name:"Community Guardian",description:"Submit 5 anonymous safety reports",icon:"\uD83D\uDEE1️",points:250,unlocked:!1,progress:2,maxProgress:5,category:"community"},{id:"emergency_ready",name:"Emergency Ready",description:"Complete emergency preparedness checklist",icon:"\uD83D\uDEA8",points:400,unlocked:!1,progress:3,maxProgress:5,category:"emergency"}]),[c,d]=(0,x.useState)("all"),u=e=>(e+1)*300,h=o.filter(e=>"all"===c||e.category===c),m=e=>{switch(e){case"safety":return f.jsx(j.Z,{className:"h-4 w-4"});case"exploration":return f.jsx(a5,{className:"h-4 w-4"});case"community":return f.jsx(a9,{className:"h-4 w-4"});case"emergency":return f.jsx(ow,{className:"h-4 w-4"});default:return f.jsx(oN,{className:"h-4 w-4"})}},{progress:p,maxProgress:b}=(()=>{let e=300*n.level,t=u(n.level);return{progress:n.totalPoints-e,maxProgress:t-e}})();return(0,f.jsxs)("div",{className:"min-h-screen bg-background",children:[f.jsx("div",{className:"bg-foreground text-background p-4 sticky top-0 z-[1000] shadow-md",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[f.jsx(g.z,{variant:"ghost",onClick:r,className:"text-background hover:bg-background/10",children:"← Back to Dashboard"}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(nc,{className:"h-5 w-5"}),f.jsx("span",{className:"font-semibold",children:"Safety Achievements"})]})]})}),(0,f.jsxs)("div",{className:"p-4 space-y-4",children:[(0,f.jsxs)(v.Zb,{className:"border-2 border-primary/20 bg-gradient-to-br from-primary/5 to-accent/5",children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:f.jsx(o_,{className:"h-8 w-8 text-primary"})}),(0,f.jsxs)("div",{children:[f.jsx("h2",{className:"text-xl font-bold",children:e?.name||"Tourist"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:(a=n.level)>=5?"Safety Guardian":a>=4?"Safety Expert":a>=3?"Safety Explorer":a>=2?"Safety Aware":"Safety Novice"})]})]}),(0,f.jsxs)(y.C,{variant:"default",className:"bg-primary text-lg px-3 py-1",children:["Level ",n.level]})]})}),(0,f.jsxs)(v.aY,{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"space-y-3",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm font-medium",children:"Safety Points"}),f.jsx("span",{className:"text-lg font-bold text-primary",children:n.totalPoints})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,f.jsxs)("span",{children:["Progress to Level ",n.level+1]}),(0,f.jsxs)("span",{children:[p,"/",b]})]}),f.jsx(oj,{value:p/b*100,className:"h-2"})]})]}),f.jsx(iW,{}),(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,f.jsxs)("div",{className:"text-center p-3 bg-muted/30 rounded-lg",children:[(0,f.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-1",children:[f.jsx(j.Z,{className:"h-4 w-4 text-emerald-500"}),f.jsx("span",{className:"text-sm font-medium",children:"Safety Score"})]}),(0,f.jsxs)("p",{className:"text-xl font-bold text-emerald-500",children:[s,"%"]})]}),(0,f.jsxs)("div",{className:"text-center p-3 bg-muted/30 rounded-lg",children:[(0,f.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-1",children:[f.jsx(ok,{className:"h-4 w-4 text-orange-500"}),f.jsx("span",{className:"text-sm font-medium",children:"Safety Streak"})]}),(0,f.jsxs)("p",{className:"text-xl font-bold text-orange-500",children:[n.safetyStreak," days"]})]}),(0,f.jsxs)("div",{className:"text-center p-3 bg-muted/30 rounded-lg",children:[(0,f.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-1",children:[f.jsx(a5,{className:"h-4 w-4 text-blue-500"}),f.jsx("span",{className:"text-sm font-medium",children:"Zones Visited"})]}),f.jsx("p",{className:"text-xl font-bold text-blue-500",children:n.zonesVisited})]}),(0,f.jsxs)("div",{className:"text-center p-3 bg-muted/30 rounded-lg",children:[(0,f.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-1",children:[f.jsx(a9,{className:"h-4 w-4 text-purple-500"}),f.jsx("span",{className:"text-sm font-medium",children:"Reports Submitted"})]}),f.jsx("p",{className:"text-xl font-bold text-purple-500",children:n.reportsSubmitted})]})]})]})]}),(0,f.jsxs)(v.Zb,{children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2",children:[f.jsx(oC,{className:"h-5 w-5"}),f.jsx("span",{children:"Achievements"})]})}),(0,f.jsxs)(v.aY,{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,f.jsxs)(g.z,{variant:"all"===c?"default":"outline",size:"sm",onClick:()=>d("all"),className:"flex items-center space-x-1",children:[f.jsx(oN,{className:"h-4 w-4"}),f.jsx("span",{children:"All"})]}),(0,f.jsxs)(g.z,{variant:"safety"===c?"default":"outline",size:"sm",onClick:()=>d("safety"),className:"flex items-center space-x-1",children:[f.jsx(j.Z,{className:"h-4 w-4"}),f.jsx("span",{children:"Safety"})]}),(0,f.jsxs)(g.z,{variant:"exploration"===c?"default":"outline",size:"sm",onClick:()=>d("exploration"),className:"flex items-center space-x-1",children:[f.jsx(a5,{className:"h-4 w-4"}),f.jsx("span",{children:"Exploration"})]}),(0,f.jsxs)(g.z,{variant:"community"===c?"default":"outline",size:"sm",onClick:()=>d("community"),className:"flex items-center space-x-1",children:[f.jsx(a9,{className:"h-4 w-4"}),f.jsx("span",{children:"Community"})]}),(0,f.jsxs)(g.z,{variant:"emergency"===c?"default":"outline",size:"sm",onClick:()=>d("emergency"),className:"flex items-center space-x-1",children:[f.jsx(ow,{className:"h-4 w-4"}),f.jsx("span",{children:"Emergency"})]})]}),f.jsx("div",{className:"space-y-3",children:h.map(e=>f.jsx("div",{className:`p-4 border rounded-lg transition-all duration-300 hover:shadow-md ${e.unlocked?"border-primary/30 bg-primary/5 hover:bg-primary/10":"border-border bg-muted/30 hover:bg-muted/50"}`,children:(0,f.jsxs)("div",{className:"flex items-start justify-between",children:[(0,f.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[f.jsx("div",{className:`text-2xl p-2 rounded-full ${e.unlocked?"bg-primary/10":"bg-muted/50 grayscale"}`,children:e.icon}),(0,f.jsxs)("div",{className:"flex-1",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[f.jsx("h3",{className:`font-semibold ${e.unlocked?"text-foreground":"text-muted-foreground"}`,children:e.name}),e.unlocked&&(0,f.jsxs)(y.C,{variant:"default",className:"bg-primary text-xs",children:["+",e.points," pts"]})]}),f.jsx("p",{className:`text-sm ${e.unlocked?"text-muted-foreground":"text-muted-foreground/70"}`,children:e.description}),!e.unlocked&&e.maxProgress>1&&(0,f.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[f.jsx("span",{children:"Progress"}),(0,f.jsxs)("span",{children:[e.progress,"/",e.maxProgress]})]}),f.jsx(oj,{value:e.progress/e.maxProgress*100,className:"h-1"})]})]})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[m(e.category),e.unlocked?f.jsx(y.C,{variant:"default",className:"bg-emerald-500",children:"✓ Unlocked"}):f.jsx(y.C,{variant:"outline",children:"Locked"})]})]})},e.id))})]})]}),(0,f.jsxs)(v.Zb,{children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2",children:[f.jsx(ow,{className:"h-5 w-5"}),f.jsx("span",{children:"Earn More Points"})]})}),f.jsx(v.aY,{className:"space-y-3",children:(0,f.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,f.jsxs)(g.z,{variant:"outline",className:"justify-between h-auto p-4 bg-transparent hover:bg-muted/50",onClick:()=>{},children:[(0,f.jsxs)("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-full",children:f.jsx(a6,{className:"h-4 w-4 text-blue-600"})}),(0,f.jsxs)("div",{className:"text-left",children:[f.jsx("p",{className:"font-medium",children:"Complete Trip Itinerary"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"+100 points"})]})]}),f.jsx(y.C,{variant:"outline",children:"+100"})]}),(0,f.jsxs)(g.z,{variant:"outline",className:"justify-between h-auto p-4 bg-transparent hover:bg-muted/50",onClick:()=>{},children:[(0,f.jsxs)("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-full",children:f.jsx(a9,{className:"h-4 w-4 text-green-600"})}),(0,f.jsxs)("div",{className:"text-left",children:[f.jsx("p",{className:"font-medium",children:"Add Emergency Contact"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"+50 points each"})]})]}),f.jsx(y.C,{variant:"outline",children:"+50"})]}),(0,f.jsxs)(g.z,{variant:"outline",className:"justify-between h-auto p-4 bg-transparent hover:bg-muted/50",onClick:()=>{},children:[(0,f.jsxs)("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-full",children:f.jsx(j.Z,{className:"h-4 w-4 text-purple-600"})}),(0,f.jsxs)("div",{className:"text-left",children:[f.jsx("p",{className:"font-medium",children:"Submit Safety Report"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"+25 points each"})]})]}),f.jsx(y.C,{variant:"outline",children:"+25"})]})]})})]})]})]})}function oE({currentLocation:e,onBack:t}){let[s,r]=(0,x.useState)(""),[a,n]=(0,x.useState)(""),[i,o]=(0,x.useState)(!0),[l,c]=(0,x.useState)(!1),[d,u]=(0,x.useState)([{id:"RPT-001",type:"Suspicious Activity",description:"Person following tourists near India Gate",location:{lat:28.6129,lng:77.2295},timestamp:new Date(Date.now()-72e5),status:"under_review",priority:"high"},{id:"RPT-002",type:"Unsafe Area",description:"Poor lighting and broken pavement",location:{lat:28.6145,lng:77.2085},timestamp:new Date(Date.now()-864e5),status:"resolved",priority:"medium"}]),h=[{value:"suspicious_activity",label:"Suspicious Activity",priority:"high",icon:"\uD83D\uDC41️"},{value:"unsafe_area",label:"Unsafe Area/Condition",priority:"medium",icon:"⚠️"},{value:"harassment",label:"Harassment/Inappropriate Behavior",priority:"high",icon:"\uD83D\uDEAB"},{value:"theft_scam",label:"Theft/Scam Attempt",priority:"high",icon:"\uD83D\uDCB0"},{value:"poor_lighting",label:"Poor Lighting/Visibility",priority:"medium",icon:"\uD83D\uDCA1"},{value:"crowd_safety",label:"Crowd Safety Concern",priority:"medium",icon:"\uD83D\uDC65"},{value:"infrastructure",label:"Infrastructure Issue",priority:"low",icon:"\uD83C\uDFD7️"},{value:"other",label:"Other Safety Concern",priority:"medium",icon:"\uD83D\uDCDD"}],m=async()=>{if(!s||!a.trim())return;c(!0),await new Promise(e=>setTimeout(e,2e3));let t=h.find(e=>e.value===s),i={id:`RPT-${String(d.length+3).padStart(3,"0")}`,type:t?.label||s,description:a.trim(),location:e,timestamp:new Date,status:"submitted",priority:t?.priority||"medium"};u(e=>[i,...e]),r(""),n(""),c(!1),alert(`Report submitted successfully!
Report ID: ${i.id}

Thank you for helping keep our community safe.`)},p=e=>{switch(e){case"submitted":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"under_review":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},b=e=>{switch(e){case"critical":return"bg-red-500 text-white";case"high":return"bg-orange-500 text-white";case"medium":return"bg-yellow-500 text-white";case"low":return"bg-green-500 text-white";default:return"bg-gray-500 text-white"}},w=e=>{let t=Math.floor((new Date().getTime()-e.getTime())/6e4);if(t<60)return`${t} minutes ago`;if(t<1440){let e=Math.floor(t/60);return`${e} hour${e>1?"s":""} ago`}{let e=Math.floor(t/1440);return`${e} day${e>1?"s":""} ago`}};return(0,f.jsxs)("div",{className:"min-h-screen bg-background",children:[f.jsx("div",{className:"bg-foreground text-background p-4 sticky top-0 z-[1000] shadow-md",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[f.jsx(g.z,{variant:"ghost",onClick:t,className:"text-background hover:bg-background/10",children:"← Back to Dashboard"}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(j.Z,{className:"h-5 w-5"}),f.jsx("span",{className:"font-semibold",children:"Anonymous Reporting"})]})]})}),(0,f.jsxs)("div",{className:"p-4 space-y-4",children:[f.jsx(v.Zb,{className:"border-2 border-green-200 bg-green-50 dark:bg-green-950 dark:border-green-800",children:f.jsx(v.aY,{className:"p-4",children:(0,f.jsxs)("div",{className:"flex items-start space-x-3",children:[f.jsx(j.Z,{className:"h-5 w-5 text-green-600 mt-0.5 flex-shrink-0"}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-200",children:"Anonymous & Secure Reporting"}),f.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Your reports are completely anonymous and help keep the community safe. No personal information is stored or shared. All reports are reviewed by authorities within 24 hours."})]})]})})}),(0,f.jsxs)(v.Zb,{children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2",children:[f.jsx(nd,{className:"h-5 w-5"}),f.jsx("span",{children:"Submit Safety Report"})]})}),(0,f.jsxs)(v.aY,{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[i?f.jsx(oi,{className:"h-4 w-4"}):f.jsx(on.Z,{className:"h-4 w-4"}),f.jsx("span",{className:"font-medium",children:"Anonymous Report"})]}),f.jsx(g.z,{variant:"outline",size:"sm",onClick:()=>o(!i),className:i?"bg-green-100 text-green-800 border-green-300":"",children:i?"Anonymous":"Identified"})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(e3._,{children:"Report Type"}),(0,f.jsxs)(aV,{value:s,onValueChange:r,children:[f.jsx(aH,{children:f.jsx(aq,{placeholder:"Select the type of safety concern"})}),f.jsx(aG,{children:h.map(e=>f.jsx(aY,{value:e.value,children:(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx("span",{children:e.icon}),f.jsx("span",{children:e.label}),f.jsx(y.C,{className:b(e.priority),variant:"secondary",children:e.priority.toUpperCase()})]})},e.value))})]})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(e3._,{children:"Description"}),f.jsx(a3,{placeholder:"Please provide detailed information about the safety concern. Include time, location details, and any other relevant information...",value:a,onChange:e=>n(e.target.value),className:"min-h-24",maxLength:500}),(0,f.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[f.jsx("span",{children:"Be specific but avoid personal information"}),(0,f.jsxs)("span",{children:[a.length,"/500"]})]})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(e3._,{children:"Location"}),(0,f.jsxs)("div",{className:"p-3 bg-muted/30 rounded-lg",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[f.jsx(a5,{className:"h-4 w-4 text-primary"}),f.jsx("span",{className:"font-medium",children:"Current Location"}),f.jsx(y.C,{variant:"outline",className:"text-xs",children:"Auto-detected"})]}),(0,f.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Lat: ",e.lat.toFixed(6),", Lng: ",e.lng.toFixed(6)]}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Connaught Place, New Delhi, Delhi 110001"})]})]}),f.jsx(g.z,{onClick:m,disabled:!s||!a.trim()||l,className:"w-full h-12 font-semibold",children:l?(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),f.jsx("span",{children:"Submitting Report..."})]}):(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(j.Z,{className:"h-4 w-4"}),f.jsx("span",{children:"Submit Anonymous Report"})]})})]})]}),(0,f.jsxs)(v.Zb,{children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(a6,{className:"h-5 w-5"}),f.jsx("span",{children:"Your Recent Reports"})]}),(0,f.jsxs)(y.C,{variant:"outline",children:[d.length," Reports"]})]})}),f.jsx(v.aY,{className:"space-y-3",children:d.length>0?d.map(e=>f.jsx("div",{className:"p-4 border border-border rounded-lg space-y-3",children:(0,f.jsxs)("div",{className:"flex items-start justify-between",children:[(0,f.jsxs)("div",{className:"flex-1",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[f.jsx("h3",{className:"font-semibold",children:e.type}),f.jsx(y.C,{className:b(e.priority),variant:"secondary",children:e.priority.toUpperCase()})]}),f.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:e.description}),(0,f.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-1",children:[f.jsx(a6,{className:"h-3 w-3"}),f.jsx("span",{children:w(e.timestamp)})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-1",children:[f.jsx(a5,{className:"h-3 w-3"}),(0,f.jsxs)("span",{children:[e.location.lat.toFixed(4),", ",e.location.lng.toFixed(4)]})]})]})]}),(0,f.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[f.jsx(y.C,{className:p(e.status),variant:"secondary",children:"submitted"===e.status?"Submitted":"under_review"===e.status?"Under Review":"Resolved"}),(0,f.jsxs)("span",{className:"text-xs text-muted-foreground",children:["ID: ",e.id]})]})]})},e.id)):(0,f.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[f.jsx(j.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),f.jsx("p",{className:"text-lg font-medium",children:"No reports submitted yet"}),f.jsx("p",{className:"text-sm",children:"Help keep the community safe by reporting safety concerns"})]})})]}),(0,f.jsxs)(v.Zb,{children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2",children:[f.jsx(a9,{className:"h-5 w-5"}),f.jsx("span",{children:"Community Impact"})]})}),f.jsx(v.aY,{children:(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,f.jsxs)("div",{className:"p-4 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[f.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"247"}),f.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Reports This Month"})]}),(0,f.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-950 rounded-lg",children:[f.jsx("p",{className:"text-2xl font-bold text-green-600",children:"89%"}),f.jsx("p",{className:"text-sm text-green-800 dark:text-green-200",children:"Issues Resolved"})]}),(0,f.jsxs)("div",{className:"p-4 bg-purple-50 dark:bg-purple-950 rounded-lg",children:[f.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"156"}),f.jsx("p",{className:"text-sm text-purple-800 dark:text-purple-200",children:"Active Reporters"})]}),(0,f.jsxs)("div",{className:"p-4 bg-orange-50 dark:bg-orange-950 rounded-lg",children:[f.jsx("p",{className:"text-2xl font-bold text-orange-600",children:"4.2h"}),f.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:"Avg Response Time"})]})]})})]})]})]})}var oT=s(7264),oO="ScrollArea",[oI,oA]=(0,e7.b)(oO),[oR,oD]=oI(oO),oL=x.forwardRef((e,t)=>{let{__scopeScrollArea:s,type:r="hover",dir:a,scrollHideDelay:n=600,...i}=e,[o,l]=x.useState(null),[c,d]=x.useState(null),[u,h]=x.useState(null),[m,p]=x.useState(null),[g,v]=x.useState(null),[y,b]=x.useState(0),[j,w]=x.useState(0),[N,_]=x.useState(!1),[k,C]=x.useState(!1),S=(0,e8.e)(t,e=>l(e)),E=(0,te.gm)(a);return(0,f.jsx)(oR,{scope:s,type:r,dir:E,scrollHideDelay:n,scrollArea:o,viewport:c,onViewportChange:d,content:u,onContentChange:h,scrollbarX:m,onScrollbarXChange:p,scrollbarXEnabled:N,onScrollbarXEnabledChange:_,scrollbarY:g,onScrollbarYChange:v,scrollbarYEnabled:k,onScrollbarYEnabledChange:C,onCornerWidthChange:b,onCornerHeightChange:w,children:(0,f.jsx)(tt.WV.div,{dir:E,...i,ref:S,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":j+"px",...e.style}})})});oL.displayName=oO;var oP="ScrollAreaViewport",oF=x.forwardRef((e,t)=>{let{__scopeScrollArea:s,children:r,nonce:a,...n}=e,i=oD(oP,s),o=x.useRef(null),l=(0,e8.e)(t,o,i.onViewportChange);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),(0,f.jsx)(tt.WV.div,{"data-radix-scroll-area-viewport":"",...n,ref:l,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:(0,f.jsx)("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});oF.displayName=oP;var oM="ScrollAreaScrollbar",oZ=x.forwardRef((e,t)=>{let{forceMount:s,...r}=e,a=oD(oM,e.__scopeScrollArea),{onScrollbarXEnabledChange:n,onScrollbarYEnabledChange:i}=a,o="horizontal"===e.orientation;return x.useEffect(()=>(o?n(!0):i(!0),()=>{o?n(!1):i(!1)}),[o,n,i]),"hover"===a.type?(0,f.jsx)(oz,{...r,ref:t,forceMount:s}):"scroll"===a.type?(0,f.jsx)(o$,{...r,ref:t,forceMount:s}):"auto"===a.type?(0,f.jsx)(oB,{...r,ref:t,forceMount:s}):"always"===a.type?(0,f.jsx)(oU,{...r,ref:t}):null});oZ.displayName=oM;var oz=x.forwardRef((e,t)=>{let{forceMount:s,...r}=e,a=oD(oM,e.__scopeScrollArea),[n,i]=x.useState(!1);return x.useEffect(()=>{let e=a.scrollArea,t=0;if(e){let s=()=>{window.clearTimeout(t),i(!0)},r=()=>{t=window.setTimeout(()=>i(!1),a.scrollHideDelay)};return e.addEventListener("pointerenter",s),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",s),e.removeEventListener("pointerleave",r)}}},[a.scrollArea,a.scrollHideDelay]),(0,f.jsx)(oT.z,{present:s||n,children:(0,f.jsx)(oB,{"data-state":n?"visible":"hidden",...r,ref:t})})}),o$=x.forwardRef((e,t)=>{var s,r;let{forceMount:a,...n}=e,i=oD(oM,e.__scopeScrollArea),o="horizontal"===e.orientation,l=o9(()=>d("SCROLL_END"),100),[c,d]=(s="hidden",r={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},x.useReducer((e,t)=>r[e][t]??e,s));return x.useEffect(()=>{if("idle"===c){let e=window.setTimeout(()=>d("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(e)}},[c,i.scrollHideDelay,d]),x.useEffect(()=>{let e=i.viewport,t=o?"scrollLeft":"scrollTop";if(e){let s=e[t],r=()=>{let r=e[t];s!==r&&(d("SCROLL"),l()),s=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[i.viewport,o,d,l]),(0,f.jsx)(oT.z,{present:a||"hidden"!==c,children:(0,f.jsx)(oU,{"data-state":"hidden"===c?"hidden":"visible",...n,ref:t,onPointerEnter:(0,e6.Mj)(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:(0,e6.Mj)(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),oB=x.forwardRef((e,t)=>{let s=oD(oM,e.__scopeScrollArea),{forceMount:r,...a}=e,[n,i]=x.useState(!1),o="horizontal"===e.orientation,l=o9(()=>{if(s.viewport){let e=s.viewport.offsetWidth<s.viewport.scrollWidth,t=s.viewport.offsetHeight<s.viewport.scrollHeight;i(o?e:t)}},10);return o8(s.viewport,l),o8(s.content,l),(0,f.jsx)(oT.z,{present:r||n,children:(0,f.jsx)(oU,{"data-state":n?"visible":"hidden",...a,ref:t})})}),oU=x.forwardRef((e,t)=>{let{orientation:s="vertical",...r}=e,a=oD(oM,e.__scopeScrollArea),n=x.useRef(null),i=x.useRef(0),[o,l]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=o2(o.viewport,o.content),d={...r,sizes:o,onSizesChange:l,hasThumb:!!(c>0&&c<1),onThumbChange:e=>n.current=e,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:e=>i.current=e};function u(e,t){return function(e,t,s,r="ltr"){let a=o3(s),n=t||a/2,i=s.scrollbar.paddingStart+n,o=s.scrollbar.size-s.scrollbar.paddingEnd-(a-n),l=s.content-s.viewport;return o4([i,o],"ltr"===r?[0,l]:[-1*l,0])(e)}(e,i.current,o,t)}return"horizontal"===s?(0,f.jsx)(oW,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&n.current){let e=o5(a.viewport.scrollLeft,o,a.dir);n.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollLeft=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollLeft=u(e,a.dir))}}):"vertical"===s?(0,f.jsx)(oV,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&n.current){let e=o5(a.viewport.scrollTop,o);n.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{a.viewport&&(a.viewport.scrollTop=e)},onDragScroll:e=>{a.viewport&&(a.viewport.scrollTop=u(e))}}):null}),oW=x.forwardRef((e,t)=>{let{sizes:s,onSizesChange:r,...a}=e,n=oD(oM,e.__scopeScrollArea),[i,o]=x.useState(),l=x.useRef(null),c=(0,e8.e)(t,l,n.onScrollbarXChange);return x.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),(0,f.jsx)(oG,{"data-orientation":"horizontal",...a,ref:c,sizes:s,style:{bottom:0,left:"rtl"===n.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===n.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":o3(s)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,s)=>{if(n.viewport){let r=n.viewport.scrollLeft+t.deltaX;e.onWheelScroll(r),function(e,t){return e>0&&e<t}(r,s)&&t.preventDefault()}},onResize:()=>{l.current&&n.viewport&&i&&r({content:n.viewport.scrollWidth,viewport:n.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:o1(i.paddingLeft),paddingEnd:o1(i.paddingRight)}})}})}),oV=x.forwardRef((e,t)=>{let{sizes:s,onSizesChange:r,...a}=e,n=oD(oM,e.__scopeScrollArea),[i,o]=x.useState(),l=x.useRef(null),c=(0,e8.e)(t,l,n.onScrollbarYChange);return x.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),(0,f.jsx)(oG,{"data-orientation":"vertical",...a,ref:c,sizes:s,style:{top:0,right:"ltr"===n.dir?0:void 0,left:"rtl"===n.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":o3(s)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,s)=>{if(n.viewport){let r=n.viewport.scrollTop+t.deltaY;e.onWheelScroll(r),function(e,t){return e>0&&e<t}(r,s)&&t.preventDefault()}},onResize:()=>{l.current&&n.viewport&&i&&r({content:n.viewport.scrollHeight,viewport:n.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:o1(i.paddingTop),paddingEnd:o1(i.paddingBottom)}})}})}),[oq,oH]=oI(oM),oG=x.forwardRef((e,t)=>{let{__scopeScrollArea:s,sizes:r,hasThumb:a,onThumbChange:n,onThumbPointerUp:i,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:d,onResize:u,...h}=e,m=oD(oM,s),[p,g]=x.useState(null),v=(0,e8.e)(t,e=>g(e)),y=x.useRef(null),b=x.useRef(""),j=m.viewport,w=r.content-r.viewport,N=(0,ts.W)(d),_=(0,ts.W)(l),k=o9(u,10);function C(e){y.current&&c({x:e.clientX-y.current.left,y:e.clientY-y.current.top})}return x.useEffect(()=>{let e=e=>{let t=e.target;p?.contains(t)&&N(e,w)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[j,p,w,N]),x.useEffect(_,[r,_]),o8(p,k),o8(m.content,k),(0,f.jsx)(oq,{scope:s,scrollbar:p,hasThumb:a,onThumbChange:(0,ts.W)(n),onThumbPointerUp:(0,ts.W)(i),onThumbPositionChange:_,onThumbPointerDown:(0,ts.W)(o),children:(0,f.jsx)(tt.WV.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:(0,e6.Mj)(e.onPointerDown,e=>{0===e.button&&(e.target.setPointerCapture(e.pointerId),y.current=p.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),C(e))}),onPointerMove:(0,e6.Mj)(e.onPointerMove,C),onPointerUp:(0,e6.Mj)(e.onPointerUp,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=b.current,m.viewport&&(m.viewport.style.scrollBehavior=""),y.current=null})})})}),oY="ScrollAreaThumb",oX=x.forwardRef((e,t)=>{let{forceMount:s,...r}=e,a=oH(oY,e.__scopeScrollArea);return(0,f.jsx)(oT.z,{present:s||a.hasThumb,children:(0,f.jsx)(oK,{ref:t,...r})})}),oK=x.forwardRef((e,t)=>{let{__scopeScrollArea:s,style:r,...a}=e,n=oD(oY,s),i=oH(oY,s),{onThumbPositionChange:o}=i,l=(0,e8.e)(t,e=>i.onThumbChange(e)),c=x.useRef(void 0),d=o9(()=>{c.current&&(c.current(),c.current=void 0)},100);return x.useEffect(()=>{let e=n.viewport;if(e){let t=()=>{if(d(),!c.current){let t=o6(e,o);c.current=t,o()}};return o(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[n.viewport,d,o]),(0,f.jsx)(tt.WV.div,{"data-state":i.hasThumb?"visible":"hidden",...a,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:(0,e6.Mj)(e.onPointerDownCapture,e=>{let t=e.target.getBoundingClientRect(),s=e.clientX-t.left,r=e.clientY-t.top;i.onThumbPointerDown({x:s,y:r})}),onPointerUp:(0,e6.Mj)(e.onPointerUp,i.onThumbPointerUp)})});oX.displayName=oY;var oJ="ScrollAreaCorner",oQ=x.forwardRef((e,t)=>{let s=oD(oJ,e.__scopeScrollArea),r=!!(s.scrollbarX&&s.scrollbarY);return"scroll"!==s.type&&r?(0,f.jsx)(o0,{...e,ref:t}):null});oQ.displayName=oJ;var o0=x.forwardRef((e,t)=>{let{__scopeScrollArea:s,...r}=e,a=oD(oJ,s),[n,i]=x.useState(0),[o,l]=x.useState(0),c=!!(n&&o);return o8(a.scrollbarX,()=>{let e=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(e),l(e)}),o8(a.scrollbarY,()=>{let e=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(e),i(e)}),c?(0,f.jsx)(tt.WV.div,{...r,ref:t,style:{width:n,height:o,position:"absolute",right:"ltr"===a.dir?0:void 0,left:"rtl"===a.dir?0:void 0,bottom:0,...e.style}}):null});function o1(e){return e?parseInt(e,10):0}function o2(e,t){let s=e/t;return isNaN(s)?0:s}function o3(e){let t=o2(e.viewport,e.content),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd;return Math.max((e.scrollbar.size-s)*t,18)}function o5(e,t,s="ltr"){let r=o3(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=t.scrollbar.size-a,i=t.content-t.viewport,o=e4(e,"ltr"===s?[0,i]:[-1*i,0]);return o4([0,i],[0,n-r])(o)}function o4(e,t){return s=>{if(e[0]===e[1]||t[0]===t[1])return t[0];let r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(s-e[0])}}var o6=(e,t=()=>{})=>{let s={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){let n={left:e.scrollLeft,top:e.scrollTop},i=s.left!==n.left,o=s.top!==n.top;(i||o)&&t(),s=n,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function o9(e,t){let s=(0,ts.W)(e),r=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(r.current),[]),x.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(s,t)},[s,t])}function o8(e,t){let s=(0,ts.W)(t);(0,sU.b)(()=>{let t=0;if(e){let r=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(s)});return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}},[e,s])}function o7({className:e,children:t,...s}){return(0,f.jsxs)(oL,{"data-slot":"scroll-area",className:(0,aW.cn)("relative",e),...s,children:[f.jsx(oF,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),f.jsx(le,{}),f.jsx(oQ,{})]})}function le({className:e,orientation:t="vertical",...s}){return f.jsx(oZ,{"data-slot":"scroll-area-scrollbar",orientation:t,className:(0,aW.cn)("flex touch-none p-px transition-colors select-none","vertical"===t&&"h-full w-2.5 border-l border-l-transparent","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent",e),...s,children:f.jsx(oX,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var lt=s(4455);function ls(){return()=>{}}var lr="Avatar",[la,ln]=(0,e7.b)(lr),[li,lo]=la(lr),ll=x.forwardRef((e,t)=>{let{__scopeAvatar:s,...r}=e,[a,n]=x.useState("idle");return(0,f.jsx)(li,{scope:s,imageLoadingStatus:a,onImageLoadingStatusChange:n,children:(0,f.jsx)(tt.WV.span,{...r,ref:t})})});ll.displayName=lr;var lc="AvatarImage";x.forwardRef((e,t)=>{let{__scopeAvatar:s,src:r,onLoadingStatusChange:a=()=>{},...n}=e,i=lo(lc,s),o=function(e,{referrerPolicy:t,crossOrigin:s}){let r=(0,lt.useSyncExternalStore)(ls,()=>!0,()=>!1),a=x.useRef(null),n=r?(a.current||(a.current=new window.Image),a.current):null,[i,o]=x.useState(()=>lh(n,e));return(0,sU.b)(()=>{o(lh(n,e))},[n,e]),(0,sU.b)(()=>{let e=e=>()=>{o(e)};if(!n)return;let r=e("loaded"),a=e("error");return n.addEventListener("load",r),n.addEventListener("error",a),t&&(n.referrerPolicy=t),"string"==typeof s&&(n.crossOrigin=s),()=>{n.removeEventListener("load",r),n.removeEventListener("error",a)}},[n,s,t]),i}(r,n),l=(0,ts.W)(e=>{a(e),i.onImageLoadingStatusChange(e)});return(0,sU.b)(()=>{"idle"!==o&&l(o)},[o,l]),"loaded"===o?(0,f.jsx)(tt.WV.img,{...n,ref:t,src:r}):null}).displayName=lc;var ld="AvatarFallback",lu=x.forwardRef((e,t)=>{let{__scopeAvatar:s,delayMs:r,...a}=e,n=lo(ld,s),[i,o]=x.useState(void 0===r);return x.useEffect(()=>{if(void 0!==r){let e=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(e)}},[r]),i&&"loaded"!==n.imageLoadingStatus?(0,f.jsx)(tt.WV.span,{...a,ref:t}):null});function lh(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function lm({className:e,...t}){return f.jsx(ll,{"data-slot":"avatar",className:(0,aW.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...t})}function lp({className:e,...t}){return f.jsx(lu,{"data-slot":"avatar-fallback",className:(0,aW.cn)("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}lu.displayName=ld;let lf=(0,_.Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);function lx({userLocation:e,safetyScore:t=85,currentZone:s="Green Zone",userInfo:r}){let[a,n]=(0,x.useState)([{id:"1",content:"Hello! I'm your Virtual Guardian AI powered by advanced safety analytics. I'm here to help keep you safe during your visit. How can I assist you today?",sender:"ai",timestamp:new Date,type:"info"}]),[i,o]=(0,x.useState)(""),[l,c]=(0,x.useState)(!1),d=(0,x.useRef)(null),u=[{icon:na,label:"Emergency Help",action:"emergency"},{icon:a5,label:"Safe Routes",action:"routes"},{icon:j.Z,label:"Safety Tips",action:"tips"},{icon:nn,label:"Emergency Contacts",action:"contacts"}],h=()=>e?e.lat>28.615&&e.lng>77.21?"Red Fort Area, Chandni Chowk, New Delhi 110006":e.lat<28.61?"Lodhi Gardens, New Delhi 110003":"Connaught Place, New Delhi, Delhi 110001, India":"Location not available",m=()=>s.includes("Red")||t<30?"Red":s.includes("Green")&&t>=70?"Green":"Orange",p=()=>{let e=[];return t<30?e.push("High crime area reported","Poor lighting conditions","Limited police presence"):t<70?e.push("Moderate crowd density","Traffic congestion","Construction work nearby"):e.push("Well-patrolled area","Good lighting","Tourist-friendly zone"),e},b=async s=>{try{let a={touristName:r?.name||"Anonymous User",age:r?.age||25,digitalId:r?.digitalId||"guest001",tripStartDate:r?.tripStartDate||new Date().toISOString().split("T")[0],tripEndDate:r?.tripEndDate||new Date(Date.now()+6048e5).toISOString().split("T")[0],currentLocation:{lat:e?.lat||28.6139,lng:e?.lng||77.209,address:h(),zoneStatus:m(),safetyScore:t},environment:{nearbyIncidents:p()},userQuery:s,language:"English"};console.log("[v0] Sending API request:",a);let n=await fetch("http://localhost:7070/api/chatbot/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!n.ok)throw Error(`API request failed: ${n.status} ${n.statusText}`);let i=await n.json();return console.log("[v0] API response received:",i),i}catch(e){throw console.error("[v0] API call failed:",e),e}},w=async e=>{try{let t=await b(e),s="",r="info";s=t.response||t.message||t.content?t.response||t.message||t.content||JSON.stringify(t,null,2):`🤖 **API Response:**
\`\`\`json
${JSON.stringify(t,null,2)}
\`\`\``;let a=e.toLowerCase();return a.includes("emergency")||a.includes("help")||a.includes("danger")?r="emergency":(a.includes("safe")||a.includes("zone")||a.includes("route"))&&(r="safety"),{content:s,type:r,apiResponse:t}}catch(t){return console.error("[v0] Using fallback response due to API error:",t),{content:`⚠️ **API Connection Error**

Unable to connect to the safety analysis service. Using offline mode.

${N(e)}`,type:"info"}}},N=e=>{let r=e.toLowerCase();return r.includes("emergency")||r.includes("help")||r.includes("danger")?"\uD83D\uDEA8 Emergency detected! Please call local emergency services: 112\nYour location has been noted for immediate assistance.":r.includes("zone")||r.includes("area")||r.includes("safe")?`You're currently in a ${s} with a safety score of ${t}%. ${t>=80?"This is a very safe area.":t>=70?"This area is generally safe, but stay alert.":"⚠️ Exercise caution in this area."}`:"I'm here to help with safety information, emergency assistance, and local guidance. Please try again or contact support if the issue persists."},_=async()=>{if(!i.trim())return;let e={id:Date.now().toString(),content:i,sender:"user",timestamp:new Date};n(t=>[...t,e]),o(""),c(!0);try{let e=await w(i),t={id:(Date.now()+1).toString(),content:e.content,sender:"ai",timestamp:new Date,type:e.type,apiResponse:e.apiResponse};n(e=>[...e,t])}catch(t){let e={id:(Date.now()+1).toString(),content:"❌ **Service Unavailable**\n\nI'm currently unable to process your request. Please try again later or contact emergency services directly if this is urgent.",sender:"ai",timestamp:new Date,type:"info"};n(t=>[...t,e])}finally{c(!1)}},k=e=>{o({emergency:"I need emergency help!",routes:"Show me the safest route to my destination",tips:"Give me safety tips for this area",contacts:"Show me emergency contact numbers"}[e]||"")},C=e=>{switch(e){case"emergency":return"bg-red-500 text-white";case"safety":return"bg-orange-500 text-white";default:return"bg-blue-500 text-white"}};return(0,f.jsxs)(v.Zb,{className:"w-full h-[600px] flex flex-col",children:[(0,f.jsxs)(v.Ol,{className:"pb-3",children:[(0,f.jsxs)(v.ll,{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:f.jsx(j.Z,{className:"w-4 h-4 text-white"})}),"Virtual Guardian AI",(0,f.jsxs)(y.C,{variant:"outline",className:"ml-auto",children:[f.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1 animate-pulse"}),"API Connected"]})]}),r&&(0,f.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Connected as: ",r.name||"Guest"," | Safety Score: ",t,"% | Zone: ",s]})]}),(0,f.jsxs)(v.aY,{className:"flex-1 flex flex-col gap-4 p-4",children:[f.jsx("div",{className:"grid grid-cols-2 gap-2",children:u.map((e,t)=>(0,f.jsxs)(g.z,{variant:"outline",size:"sm",onClick:()=>k(e.action),className:"flex items-center gap-2 h-8 text-xs",children:[f.jsx(e.icon,{className:"w-3 h-3"}),e.label]},t))}),f.jsx(o7,{className:"flex-1 pr-4",ref:d,children:(0,f.jsxs)("div",{className:"space-y-4",children:[a.map(e=>(0,f.jsxs)("div",{className:`flex gap-3 ${"user"===e.sender?"justify-end":"justify-start"}`,children:["ai"===e.sender&&f.jsx(lm,{className:"w-8 h-8",children:f.jsx(lp,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xs",children:"AI"})}),(0,f.jsxs)("div",{className:`max-w-[80%] ${"user"===e.sender?"order-first":""}`,children:[f.jsx("div",{className:`rounded-lg p-3 ${"user"===e.sender?"bg-blue-500 text-white ml-auto":"bg-gray-100 text-gray-900"}`,children:f.jsx("div",{className:"whitespace-pre-wrap text-sm",children:e.content})}),(0,f.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[f.jsx("span",{className:"text-xs text-gray-500",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.type&&"ai"===e.sender&&(0,f.jsxs)(y.C,{className:`text-xs ${C(e.type)}`,children:["emergency"===e.type&&f.jsx(na,{className:"w-3 h-3 mr-1"}),"safety"===e.type&&f.jsx(j.Z,{className:"w-3 h-3 mr-1"}),"info"===e.type&&f.jsx(a6,{className:"w-3 h-3 mr-1"}),e.type]}),e.apiResponse&&f.jsx(y.C,{variant:"outline",className:"text-xs",children:"API Response"})]})]}),"user"===e.sender&&f.jsx(lm,{className:"w-8 h-8",children:f.jsx(lp,{className:"bg-gray-300 text-gray-700 text-xs",children:"You"})})]},e.id)),l&&(0,f.jsxs)("div",{className:"flex gap-3 justify-start",children:[f.jsx(lm,{className:"w-8 h-8",children:f.jsx(lp,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xs",children:"AI"})}),f.jsx("div",{className:"bg-gray-100 rounded-lg p-3",children:(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[f.jsx(aQ.Z,{className:"w-4 h-4 animate-spin"}),f.jsx("span",{className:"text-sm text-gray-600",children:"Analyzing with Spring Boot API..."})]})})]})]})}),(0,f.jsxs)("div",{className:"flex gap-2",children:[f.jsx(e2.I,{value:i,onChange:e=>o(e.target.value),placeholder:"Ask me about safety, routes, or emergency help...",onKeyPress:e=>"Enter"===e.key&&_(),className:"flex-1",disabled:l}),f.jsx(g.z,{onClick:_,size:"sm",disabled:!i.trim()||l,children:l?f.jsx(aQ.Z,{className:"w-4 h-4 animate-spin"}):f.jsx(lf,{className:"w-4 h-4"})})]})]})]})}let lg=()=>{let[e,t]=(0,x.useState)({address:"",isLoading:!1,error:null}),s=(0,x.useCallback)(async e=>{t(e=>({...e,isLoading:!0,error:null}));try{let s=process.env.NEXT_PUBLIC_GOOGLE_MAPS_KEY;if(s){console.log("[v0] Using Google Maps Geocoding API");let r=await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${e.lat},${e.lng}&key=${s}`);if(r.ok){let e=await r.json();if("OK"===e.status&&e.results.length>0){let s=e.results[0].formatted_address;return console.log("[v0] Google Maps geocoding successful:",s),t({address:s,isLoading:!1,error:null}),s}}console.log("[v0] Google Maps geocoding failed, falling back to Nominatim")}console.log("[v0] Using OpenStreetMap Nominatim for reverse geocoding");let r=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e.lat}&lon=${e.lng}&zoom=18&addressdetails=1`,{headers:{"User-Agent":"NaviSafe Tourist Safety App"}});if(r.ok){let e=await r.json();if(e.display_name){let s=e.display_name;return console.log("[v0] Nominatim geocoding successful:",s),t({address:s,isLoading:!1,error:null}),s}}throw Error("Both geocoding services failed")}catch(s){console.error("[v0] Reverse geocoding error:",s);let e="Unable to fetch address";return t({address:"",isLoading:!1,error:e}),e}},[]),r=(0,x.useCallback)(()=>new Promise((e,t)=>{if(!navigator.geolocation){t(Error("Geolocation is not supported by this browser"));return}navigator.geolocation.getCurrentPosition(t=>{e({lat:t.coords.latitude,lng:t.coords.longitude})},e=>{let s="Unable to get location";switch(e.code){case e.PERMISSION_DENIED:s="User denied location permission";break;case e.POSITION_UNAVAILABLE:s="Location information unavailable";break;case e.TIMEOUT:s="Location request timeout"}t(Error(s))},{enableHighAccuracy:!0,timeout:15e3,maximumAge:3e5})}),[]),a=(0,x.useCallback)(async()=>{try{let e=await r();return await s(e)}catch(s){console.error("[v0] Failed to get current location:",s);let e=s instanceof Error?s.message:"Unable to fetch address";return t({address:"",isLoading:!1,error:e}),e}},[r,s]);return{...e,reverseGeocode:s,getCurrentLocation:r,fetchAddressForCurrentLocation:a}};function lv({isOpen:e,onClose:t,onConfirm:s,alertType:r,zoneName:a}){return e?f.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",children:f.jsx("div",{className:"bg-card rounded-lg shadow-xl max-w-md w-full border border-destructive animate-in fade-in-0 zoom-in-95 duration-300 animate-pulse",children:(0,f.jsxs)("div",{className:"p-6 space-y-4",children:[(0,f.jsxs)("div",{className:"text-center",children:[f.jsx("div",{className:"mx-auto w-16 h-16 bg-destructive/10 rounded-full flex items-center justify-center mb-4 animate-bounce",children:f.jsx(na,{className:"h-8 w-8 text-destructive animate-pulse"})}),f.jsx("h3",{className:"text-lg font-bold text-destructive animate-pulse",children:"restricted"===r?"\uD83D\uDEA8 RESTRICTED ZONE ALERT":"⚠️ UNSAFE ZONE ALERT"}),f.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"restricted"===r?`You have entered: ${a}. This area is restricted for tourists.`:`You are outside safe zones near: ${a}. Exercise extreme caution.`})]}),f.jsx("div",{className:"bg-destructive/5 border border-destructive/20 rounded-lg p-3 animate-in slide-in-from-bottom-2 duration-500",children:f.jsx("p",{className:"text-sm font-medium text-destructive text-center",children:"restricted"===r?"Immediate action required! Leave this area now or contact authorities.":"Would you like to send an automatic SOS alert to authorities?"})}),(0,f.jsxs)("div",{className:"flex gap-3",children:[f.jsx(g.z,{variant:"outline",onClick:t,className:"flex-1 bg-transparent hover:scale-105 transition-transform duration-200",children:"Dismiss"}),(0,f.jsxs)(g.z,{onClick:s,className:"flex-1 bg-destructive hover:bg-destructive/90 hover:scale-105 active:scale-95 transition-all duration-200 animate-pulse",children:[f.jsx(nn,{className:"h-4 w-4 mr-2"}),"Send SOS Alert"]})]})]})})}):null}function ly({emergencyAlert:e,dismissEmergencyAlert:t,setCurrentView:s}){return e.isActive?f.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-[9999] flex items-center justify-center p-4",children:f.jsx("div",{className:"bg-card rounded-lg shadow-xl max-w-md w-full border-4 border-destructive animate-in fade-in-0 zoom-in-95 duration-300",children:(0,f.jsxs)("div",{className:"p-6 space-y-4",children:[(0,f.jsxs)("div",{className:"text-center",children:[f.jsx("div",{className:"mx-auto w-20 h-20 bg-destructive/20 rounded-full flex items-center justify-center mb-4 animate-pulse",children:f.jsx(na,{className:"h-12 w-12 text-destructive animate-bounce"})}),f.jsx("h3",{className:"text-xl font-bold text-destructive animate-pulse",children:"\uD83D\uDEA8 EMERGENCY ALERT \uD83D\uDEA8"}),(0,f.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["You have entered: ",f.jsx("strong",{children:e.zoneName})]}),f.jsx("p",{className:"text-sm font-medium text-destructive mt-1",children:"This is a restricted/dangerous area!"})]}),f.jsx("div",{className:"bg-destructive/10 border-2 border-destructive/30 rounded-lg p-4 animate-in slide-in-from-bottom-2 duration-500",children:(0,f.jsxs)("div",{className:"text-center",children:[f.jsx("div",{className:"text-3xl font-bold text-destructive mb-2 animate-pulse",children:e.countdown}),(0,f.jsxs)("p",{className:"text-sm font-medium text-destructive",children:["Police call will be initiated automatically in ",e.countdown," seconds"]}),f.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Leave this area immediately or dismiss if safe"})]})}),(0,f.jsxs)("div",{className:"flex gap-3",children:[f.jsx(g.z,{variant:"outline",onClick:t,className:"flex-1 bg-transparent hover:scale-105 transition-transform duration-200",children:"I'm Safe - Dismiss"}),(0,f.jsxs)(g.z,{onClick:()=>{t(),s("emergency")},className:"flex-1 bg-destructive hover:bg-destructive/90 hover:scale-105 active:scale-95 transition-all duration-200",children:[f.jsx(nn,{className:"h-4 w-4 mr-2"}),"Call Now"]})]})]})})}):null}function lb({userInfo:e,tripDetails:t}){let{currentPosition:s,isTracking:r,error:a,permissionStatus:n,currentZones:i,safetyScore:o,isManualMode:l,emergencyAlert:c,dismissEmergencyAlert:d,startTracking:u,stopTracking:h,simulatePositionUpdate:m,enableGPSMode:p}=iL({touristId:e?.digitalId||"guest-user",enableHighAccuracy:!0,timeout:15e3,maximumAge:3e5,trackingInterval:5e3}),{address:b,isLoading:w,error:N,reverseGeocode:_}=lg(),[k,C]=(0,x.useState)({lat:28.6139,lng:77.209}),[S,E]=(0,x.useState)(!0),[T,I]=(0,x.useState)(!1),[A,R]=(0,x.useState)(new Date),[D,L]=(0,x.useState)("connected"),[P,F]=(0,x.useState)("dashboard"),[M,Z]=(0,x.useState)(o||100),[z,$]=(0,x.useState)({isOpen:!1,alertType:"restricted",zoneName:""}),[B,U]=(0,x.useState)([{name:"Local Police",number:"100"},{name:"Tourist Helpline",number:"1363"},{name:"Medical Emergency",number:"108"}]),[W,V]=(0,x.useState)(""),q=(0,x.useCallback)(e=>{console.log("[v0] Manual location change:",e),m(e.lat,e.lng),R(new Date),_(e).then(e=>{V(e)});let t=[{lat:28.6139,lng:77.209,radius:.01,name:"Connaught Place Safe Zone"},{lat:28.6129,lng:77.2295,name:"India Gate Safe Zone",radius:.008}].some(t=>Math.sqrt(Math.pow(e.lat-t.lat,2)+Math.pow(e.lng-t.lng,2))<=t.radius),s=[{lat:28.62,lng:77.21,radius:.005,name:"Government Restricted Area"},{lat:28.615,lng:77.215,radius:.003,name:"Military Zone"}].find(t=>Math.sqrt(Math.pow(e.lat-t.lat,2)+Math.pow(e.lng-t.lng,2))<=t.radius);E(t),I(!!s),s&&!T&&$({isOpen:!0,alertType:"restricted",zoneName:s.name})},[m,S,T,_]),H=(0,x.useCallback)(e=>{Z(t=>t===e?t:(console.log("[v0] Safe score changed:",{previousScore:t,newScore:e,isInSafeZone:S}),!S&&e<20&&(console.log("[v0] Triggering SOS alert - outside safe zone and score below 20%"),$({isOpen:!0,alertType:"unsafe",zoneName:"Critical Safety Zone"})),e))},[S]);return"digitalId"===P?f.jsx(iK,{userInfo:e,onBack:()=>F("dashboard")}):"emergency"===P?f.jsx(i1,{userInfo:e,currentLocation:k,onBack:()=>F("dashboard")}):"locationSharing"===P?f.jsx(oo,{userInfo:e,emergencyContacts:t?.emergencyContacts||[],currentLocation:k,onBack:()=>F("dashboard")}):"gamification"===P?f.jsx(oS,{userInfo:e,tripDetails:t,safeScore:M,onBack:()=>F("dashboard")}):"reporting"===P?f.jsx(oE,{currentLocation:k,onBack:()=>F("dashboard")}):"virtualGuardian"===P?(0,f.jsxs)("div",{className:"min-h-screen bg-background",children:[f.jsx("div",{className:"bg-foreground text-background p-4 sticky top-0 z-[1000] shadow-md",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-3",children:[f.jsx(g.z,{variant:"ghost",size:"sm",onClick:()=>F("dashboard"),className:"text-background hover:bg-background/20",children:"← Back"}),f.jsx(j.Z,{className:"h-6 w-6 animate-pulse"}),f.jsx("h1",{className:"text-lg font-semibold",children:"Virtual Guardian AI"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-4",children:[f.jsx("span",{className:"text-sm",children:"AI Safety Assistant"}),f.jsx(O,{})]})]})}),f.jsx("div",{className:"p-4",children:f.jsx(lx,{userLocation:k,safetyScore:M,currentZone:T?"Red Zone":S?"Green Zone":"Orange Zone",userInfo:{name:e?.name||"Guest User",age:e?.age?Number.parseInt(e.age):25,digitalId:e?.digitalId||"guest001",tripStartDate:t?.startDate||new Date().toISOString().split("T")[0],tripEndDate:t?.endDate||new Date(Date.now()+6048e5).toISOString().split("T")[0]}})})]}):(0,f.jsxs)("div",{className:"min-h-screen bg-background",children:[f.jsx(ly,{emergencyAlert:c,dismissEmergencyAlert:d,setCurrentView:F}),f.jsx(lv,{isOpen:z.isOpen,onClose:()=>{$({isOpen:!1,alertType:"restricted",zoneName:""})},onConfirm:()=>{$({isOpen:!1,alertType:"restricted",zoneName:""}),F("emergency"),console.log("[v0] SOS Alert sent automatically due to zone violation")},alertType:z.alertType,zoneName:z.zoneName}),f.jsx("div",{className:"bg-foreground text-background p-4 sticky top-0 z-[1000] shadow-md animate-in slide-in-from-top-4 duration-500",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-3",children:[f.jsx(j.Z,{className:`h-6 w-6 ${c.isActive?"animate-bounce text-red-400":"animate-pulse"}`}),f.jsx("h1",{className:"text-lg font-semibold",children:c.isActive?"\uD83D\uDEA8 EMERGENCY MODE":"Safety Dashboard"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,f.jsxs)("span",{className:"text-sm animate-in fade-in-0 duration-700 delay-300",children:["Welcome, ",e?.name||"User"]}),f.jsx(O,{}),f.jsx(ni,{className:"h-5 w-5 cursor-pointer hover:scale-110 hover:rotate-12 transition-all duration-300",title:"Language Settings"})]})]})}),(0,f.jsxs)("div",{className:"relative",children:[f.jsx("div",{className:`p-3 ${c.isActive?"bg-destructive animate-pulse":T?"bg-destructive animate-pulse":S?"bg-accent":"bg-orange-500"} text-white transition-all duration-500`,children:(0,f.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[f.jsx(na,{className:`h-4 w-4 ${T||c.isActive?"animate-bounce":""}`}),f.jsx("span",{className:"text-sm font-medium",children:c.isActive?`🚨 EMERGENCY: In ${c.zoneName} - Police call in ${c.countdown}s`:a?`⚠️ GPS Error: ${a} - Using manual mode`:r?"denied"===n?"⚠️ GPS permission denied - Using manual mode":l?"\uD83D\uDCCD Manual positioning mode - Drag marker to test zones":T?"⚠️ WARNING: You are in a restricted zone! Leave immediately or contact authorities.":S?"✅ You're in a safe zone - Continue exploring safely":"⚠️ You are outside designated safe zones - Exercise caution":"\uD83D\uDD0D Starting GPS tracking..."})]})}),(0,f.jsxs)("div",{className:"p-4 space-y-4 pb-20",children:[(0,f.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[f.jsx(v.Zb,{className:"hover:shadow-lg hover:scale-105 transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-100 hover:shadow-accent/20",children:f.jsx(v.aY,{className:"p-4 text-center",children:(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:"p-2 bg-accent/10 rounded-full hover:bg-accent/20 transition-colors duration-300 hover:scale-110",children:f.jsx(aJ,{className:"h-5 w-5 text-accent"})})}),(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),f.jsx(y.C,{variant:"secondary",className:"bg-accent/10 text-accent hover:bg-accent/20 transition-colors duration-300",children:"Active"})]})]})})}),f.jsx(v.Zb,{className:"hover:shadow-lg hover:scale-105 transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-200 hover:shadow-primary/20",children:f.jsx(v.aY,{className:"p-4 text-center",children:(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:"p-2 bg-primary/10 rounded-full hover:bg-primary/20 transition-colors duration-300 hover:scale-110",children:f.jsx(a5,{className:`h-5 w-5 text-primary ${r&&!l?"animate-pulse":""}`})})}),(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"Location tracking"}),f.jsx(y.C,{variant:"secondary",className:"bg-primary/10 text-primary hover:bg-primary/20 transition-colors duration-300",children:a?"GPS Error":r?l?"Manual Mode":"GPS Active":"Starting..."})]})]})})}),f.jsx(v.Zb,{className:"hover:shadow-lg hover:scale-105 transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-300 hover:shadow-emerald-500/20",children:f.jsx(v.aY,{className:"p-4 text-center",children:(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:`p-2 rounded-full transition-all duration-300 hover:scale-110 ${M>=80?"bg-emerald-500/10 hover:bg-emerald-500/20":M>=50?"bg-yellow-500/10 hover:bg-yellow-500/20":"bg-red-500/10 text-red-500 hover:bg-red-500/20 animate-pulse"}`,children:f.jsx(j.Z,{className:`h-5 w-5 transition-all duration-300 ${M>=80?"text-emerald-500":M>=50?"text-yellow-500 animate-pulse":"text-red-500 animate-bounce"}`})})}),(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"Safe Score"}),(0,f.jsxs)(y.C,{variant:"secondary",className:`transition-all duration-300 hover:scale-105 ${M>=80?"bg-emerald-500/10 text-emerald-500 hover:bg-emerald-500/20":M>=50?"bg-yellow-500/10 text-yellow-500 hover:bg-yellow-500/20":"bg-red-500/10 text-red-500 hover:bg-red-500/20 animate-pulse"}`,children:[M,"%"]})]})]})})})]}),(a||l)&&f.jsx(v.Zb,{className:"border-blue-200 bg-blue-50 dark:bg-blue-950 dark:border-blue-800",children:f.jsx(v.aY,{className:"p-4",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[f.jsx("p",{className:"font-medium",children:"GPS Controls"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:l?"Switch back to real GPS tracking":"Retry GPS location"})]}),(0,f.jsxs)(g.z,{onClick:p,variant:"outline",size:"sm",className:"hover:scale-105 transition-all duration-200 bg-transparent",children:[f.jsx(no,{className:"h-4 w-4 mr-2"}),"Enable GPS"]})]})})}),f.jsx(v.Zb,{className:"hover:shadow-md hover:scale-[1.02] transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500",children:f.jsx(v.aY,{className:"p-4",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(nl,{className:`h-4 w-4 transition-all duration-300 ${"connected"===D?"text-accent animate-pulse":"text-destructive animate-bounce"}`}),f.jsx("span",{className:"text-sm font-medium",children:"connected"===D?"Connected":"Disconnected"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[f.jsx(a6,{className:"h-4 w-4 animate-spin",style:{animationDuration:"8s"}}),(0,f.jsxs)("span",{children:["Last update: ",A.toLocaleTimeString()]})]})]})})}),(0,f.jsxs)(v.Zb,{className:"hover:shadow-lg transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-400 border-2 border-blue-200 bg-blue-50 dark:bg-blue-950 dark:border-blue-800",children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(a5,{className:"h-5 w-5 animate-pulse"}),f.jsx("span",{children:"Real-Time GPS Tracking"})]}),(0,f.jsxs)(y.C,{variant:"outline",className:"text-xs hover:bg-muted transition-colors duration-300",children:[f.jsx(no,{className:`h-3 w-3 mr-1 ${r&&!l?"animate-spin":""}`,style:{animationDuration:"3s"}}),r&&!l?"Live GPS":l?"Manual Mode":"GPS Starting"]})]})}),(0,f.jsxs)(v.aY,{className:"space-y-4",children:[f.jsx(iz,{touristId:e?.digitalId||"guest-user",userAge:e?.age?Number.parseInt(e.age):void 0,onLocationChange:q,onSafeScoreChange:H,initialZones:i}),(0,f.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,f.jsxs)("div",{className:"hover:bg-muted/50 p-2 rounded transition-colors duration-300",children:[f.jsx("span",{className:"text-muted-foreground",children:"Latitude:"}),f.jsx("p",{className:"font-mono font-medium text-foreground",children:k.lat.toFixed(6)})]}),(0,f.jsxs)("div",{className:"hover:bg-muted/50 p-2 rounded transition-colors duration-300",children:[f.jsx("span",{className:"text-muted-foreground",children:"Longitude:"}),f.jsx("p",{className:"font-mono font-medium text-foreground",children:k.lng.toFixed(6)})]})]}),(0,f.jsxs)("div",{className:"hover:bg-muted/50 p-2 rounded transition-colors duration-300",children:[f.jsx("span",{className:"text-muted-foreground",children:"Address:"}),f.jsx("p",{className:`font-medium text-foreground ${w?"animate-pulse":""} ${N?"text-destructive":""}`,children:w?"Fetching address…":N?"Unable to fetch address":W||(k.lat>28.615&&k.lng>77.21?"Red Fort Area, Chandni Chowk, New Delhi 110006":k.lat<28.61?"Lodhi Gardens, New Delhi 110003":"Connaught Place, New Delhi, Delhi 110001, India")}),w&&(0,f.jsxs)("div",{className:"flex items-center mt-1",children:[f.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-primary mr-2"}),f.jsx("span",{className:"text-xs text-muted-foreground",children:"Fetching location details..."})]})]}),(0,f.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[f.jsx("span",{className:"text-muted-foreground",children:"Zone Status:"}),f.jsx(y.C,{variant:T?"destructive":S?"default":"secondary",className:`transition-all duration-300 hover:scale-105 ${T?"animate-pulse":S?"bg-accent hover:bg-accent/80":"bg-orange-500 hover:bg-orange-600"}`,children:T?"Restricted":S?"Safe Zone":"Caution Zone"})]})]})]})]}),(0,f.jsxs)(v.Zb,{className:"hover:shadow-lg transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-500",children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2",children:[f.jsx(nn,{className:"h-5 w-5"}),f.jsx("span",{children:"Emergency Contacts"})]})}),f.jsx(v.aY,{className:"space-y-3",children:B.map((e,t)=>(0,f.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded-lg hover:bg-muted transition-all duration-300 hover:scale-[1.02] hover:shadow-sm",children:[f.jsx("span",{className:"text-sm font-medium",children:e.name}),f.jsx(g.z,{variant:"outline",size:"sm",className:"h-8 bg-transparent hover:scale-105 active:scale-95 transition-all duration-200",children:e.number})]},t))})]}),(0,f.jsxs)(v.Zb,{className:"hover:shadow-lg transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-600 border-2 border-yellow-200 bg-yellow-50 dark:bg-yellow-950 dark:border-yellow-800",children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(nc,{className:"h-5 w-5 text-yellow-600"}),f.jsx("span",{className:"text-yellow-800 dark:text-yellow-200",children:"Safety Achievements"})]}),(0,f.jsxs)(y.C,{variant:"outline",className:"text-yellow-600 border-yellow-300",children:["Level ",Math.floor(M/25)+1]})]})}),(0,f.jsxs)(v.aY,{className:"space-y-3",children:[f.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"Earn points for safe practices and unlock achievements. Your current safety score contributes to your level and unlocks new badges."}),(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"text-sm",children:[f.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:"Safety Points: 850"}),f.jsx("p",{className:"text-yellow-600 dark:text-yellow-400",children:"Rank: Safety Explorer"})]}),(0,f.jsxs)(g.z,{onClick:()=>F("gamification"),variant:"outline",size:"sm",className:"bg-yellow-100 hover:bg-yellow-200 text-yellow-800 border-yellow-300 hover:scale-105 transition-all duration-200",children:[f.jsx(nc,{className:"h-4 w-4 mr-2"}),"View Achievements"]})]})]})]}),(0,f.jsxs)(v.Zb,{className:"hover:shadow-lg transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-700 border-2 border-purple-200 bg-purple-50 dark:bg-purple-950 dark:border-purple-800",children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(nd,{className:"h-5 w-5 text-purple-600"}),f.jsx("span",{className:"text-purple-800 dark:text-purple-200",children:"Anonymous Reporting"})]}),f.jsx(y.C,{variant:"outline",className:"text-purple-600 border-purple-300",children:"Community Safety"})]})}),(0,f.jsxs)(v.aY,{className:"space-y-3",children:[f.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Help keep the community safe by reporting suspicious activities or safety concerns anonymously. Your reports help authorities respond quickly."}),(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"text-sm",children:[f.jsx("p",{className:"font-medium text-purple-800 dark:text-purple-200",children:"Secure & Anonymous"}),f.jsx("p",{className:"text-purple-600 dark:text-purple-400",children:"24/7 authority monitoring"})]}),(0,f.jsxs)(g.z,{onClick:()=>F("reporting"),variant:"outline",size:"sm",className:"bg-purple-100 hover:bg-purple-200 text-purple-800 border-purple-300 hover:scale-105 transition-all duration-200",children:[f.jsx(nd,{className:"h-4 w-4 mr-2"}),"Submit Report"]})]})]})]}),(0,f.jsxs)(v.Zb,{className:"hover:shadow-lg transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-800 border-2 border-cyan-200 bg-cyan-50 dark:bg-cyan-950 dark:border-cyan-800",children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(nu,{className:"h-5 w-5 text-cyan-600"}),f.jsx("span",{className:"text-cyan-800 dark:text-cyan-200",children:"Virtual Guardian AI"})]}),(0,f.jsxs)(y.C,{variant:"outline",className:"text-cyan-600 border-cyan-300",children:[f.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1 animate-pulse"}),"AI Assistant"]})]})}),(0,f.jsxs)(v.aY,{className:"space-y-3",children:[f.jsx("p",{className:"text-sm text-cyan-700 dark:text-cyan-300",children:"Get instant safety assistance from your AI-powered Virtual Guardian. Ask questions about local safety, emergency procedures, or get real-time guidance."}),(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"text-sm",children:[f.jsx("p",{className:"font-medium text-cyan-800 dark:text-cyan-200",children:"24/7 AI Safety Support"}),f.jsx("p",{className:"text-cyan-600 dark:text-cyan-400",children:"Instant emergency escalation"})]}),(0,f.jsxs)(g.z,{onClick:()=>F("virtualGuardian"),variant:"outline",size:"sm",className:"bg-cyan-100 hover:bg-cyan-200 text-cyan-800 border-cyan-300 hover:scale-105 transition-all duration-200",children:[f.jsx(nu,{className:"h-4 w-4 mr-2"}),"Chat with AI"]})]})]})]}),(0,f.jsxs)(g.z,{onClick:()=>{F("emergency")},className:"w-full h-16 text-lg font-bold bg-destructive hover:bg-destructive/90 shadow-lg hover:shadow-xl hover:scale-105 active:scale-95 transition-all duration-200 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-900 hover:shadow-destructive/25 group",size:"lg",children:[f.jsx(nn,{className:"h-6 w-6 mr-2 group-hover:animate-bounce"}),f.jsx("span",{className:"group-hover:animate-pulse",children:"\uD83D\uDEA8 EMERGENCY SOS \uD83D\uDEA8"})]})]})]}),f.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border shadow-lg animate-in slide-in-from-bottom-4 duration-500",children:(0,f.jsxs)("div",{className:"grid grid-cols-6",children:[(0,f.jsxs)(g.z,{variant:"ghost",className:`h-16 flex-col space-y-1 hover:scale-105 active:scale-95 transition-all duration-200 hover:bg-muted/50 ${"dashboard"===P?"text-primary bg-primary/5":""}`,onClick:()=>F("dashboard"),children:[f.jsx(nh,{className:`h-4 w-4 ${"dashboard"===P?"animate-pulse":""}`}),f.jsx("span",{className:"text-xs",children:"Home"})]}),(0,f.jsxs)(g.z,{variant:"ghost",className:`h-16 flex-col space-y-1 hover:scale-105 active:scale-95 transition-all duration-200 hover:bg-muted/50 ${"digitalId"===P?"text-primary bg-primary/5":""}`,onClick:()=>F("digitalId"),children:[f.jsx(aJ,{className:`h-4 w-4 ${"digitalId"===P?"animate-pulse":""}`}),f.jsx("span",{className:"text-xs",children:"Digital ID"})]}),(0,f.jsxs)(g.z,{variant:"ghost",className:`h-16 flex-col space-y-1 hover:scale-105 active:scale-95 transition-all duration-200 hover:bg-muted/50 ${"locationSharing"===P?"text-primary bg-primary/5":""}`,onClick:()=>F("locationSharing"),children:[f.jsx(nm,{className:`h-4 w-4 ${"locationSharing"===P?"animate-pulse":""}`}),f.jsx("span",{className:"text-xs",children:"Location"})]}),(0,f.jsxs)(g.z,{variant:"ghost",className:`h-16 flex-col space-y-1 hover:scale-105 active:scale-95 transition-all duration-200 hover:bg-muted/50 ${"gamification"===P?"text-primary bg-primary/5":""}`,onClick:()=>F("gamification"),children:[f.jsx(nc,{className:`h-4 w-4 ${"gamification"===P?"animate-pulse":""}`}),f.jsx("span",{className:"text-xs",children:"Rewards"})]}),(0,f.jsxs)(g.z,{variant:"ghost",className:`h-16 flex-col space-y-1 hover:scale-105 active:scale-95 transition-all duration-200 hover:bg-muted/50 ${"reporting"===P?"text-primary bg-primary/5":""}`,onClick:()=>F("reporting"),children:[f.jsx(nd,{className:`h-4 w-4 ${"reporting"===P?"animate-pulse":""}`}),f.jsx("span",{className:"text-xs",children:"Report"})]}),(0,f.jsxs)(g.z,{variant:"ghost",className:`h-16 flex-col space-y-1 hover:scale-105 active:scale-95 transition-all duration-200 hover:bg-muted/50 ${"virtualGuardian"===P?"text-primary bg-primary/5":""}`,onClick:()=>F("virtualGuardian"),children:[f.jsx(nu,{className:`h-4 w-4 ${"virtualGuardian"===P?"animate-pulse":""}`}),f.jsx("span",{className:"text-xs",children:"AI Guardian"})]})]})})]})}var lj=s(4662);let lw=(0,_.Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),lN=(0,_.Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),l_=(0,_.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),lk=(0,_.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),lC=(0,_.Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),lS=(0,_.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function lE({incidents:e}){let t=(0,x.useRef)(null),[s,r]=(0,x.useState)(null),[a,n]=(0,x.useState)(!0),[i,o]=(0,x.useState)(new Date),[l,c]=(0,x.useState)({activeTourists:247,riskZones:5,crowdAlerts:3,responseUnits:8});return(0,f.jsxs)("div",{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[f.jsx("h3",{className:"font-semibold text-lg",children:"Real-time Tourist & Incident Tracking"}),(0,f.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Last updated: ",i.toLocaleTimeString()," • Auto-refresh every 30s"]})]}),(0,f.jsxs)(g.z,{variant:"outline",size:"sm",onClick:()=>{o(new Date),c(e=>({...e,activeTourists:e.activeTourists+Math.floor(20*Math.random()-10)}))},className:"hover:scale-105 transition-all duration-200 group bg-transparent",children:[f.jsx(lS,{className:"h-4 w-4 mr-2 group-hover:animate-spin"}),"Refresh"]})]}),f.jsx(v.Zb,{className:"p-4",children:(0,f.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full animate-pulse"}),f.jsx("span",{children:"Safe Zones"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full animate-pulse"}),f.jsx("span",{children:"Restricted Areas"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx("div",{className:"w-4 h-4 bg-purple-500 rounded-full"}),f.jsx("span",{children:"Crowd Alerts"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full"}),f.jsx("span",{children:"Safe Tourists"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx("div",{className:"w-4 h-4 bg-emerald-600 rounded-full"}),f.jsx("span",{children:"Police Stations"})]})]})}),(0,f.jsxs)("div",{className:"relative",children:[f.jsx("div",{ref:t,className:"h-[500px] w-full rounded-lg border border-border shadow-lg",style:{minHeight:"500px"}}),a&&f.jsx("div",{className:"absolute inset-0 bg-muted/50 rounded-lg flex items-center justify-center",children:(0,f.jsxs)("div",{className:"text-center space-y-2",children:[f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),f.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading enhanced authority map..."})]})})]}),(0,f.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[f.jsx(v.Zb,{className:"p-4 text-center hover:shadow-lg transition-all duration-300 hover:scale-105",children:(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(a9,{className:"h-6 w-6 mx-auto text-primary animate-pulse"}),(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-2xl font-bold text-primary",children:l.activeTourists}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Active Tourists"})]})]})}),f.jsx(v.Zb,{className:"p-4 text-center hover:shadow-lg transition-all duration-300 hover:scale-105",children:(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(na,{className:"h-6 w-6 mx-auto text-destructive animate-bounce"}),(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-2xl font-bold text-destructive",children:e.length}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Active Incidents"})]})]})}),f.jsx(v.Zb,{className:"p-4 text-center hover:shadow-lg transition-all duration-300 hover:scale-105",children:(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(ow,{className:"h-6 w-6 mx-auto text-orange-500 animate-pulse"}),(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-2xl font-bold text-orange-500",children:l.riskZones}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Risk Zones"})]})]})}),f.jsx(v.Zb,{className:"p-4 text-center hover:shadow-lg transition-all duration-300 hover:scale-105",children:(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx("div",{className:"h-6 w-6 mx-auto bg-emerald-600 rounded flex items-center justify-center text-white text-xs font-bold animate-pulse",children:"\uD83D\uDE94"}),(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:l.responseUnits}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Response Units"})]})]})})]})]})}let lT=(0,_.Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),lO=(0,_.Z)("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);function lI({onAnomalyDetected:e}){let[t,s]=(0,x.useState)(!0),[r,a]=(0,x.useState)([]),[n,i]=(0,x.useState)(0),[o,l]=(0,x.useState)({totalScanned:247,anomaliesDetected:8,falsePositives:2,accuracy:94.2}),c=e=>{switch(e){case"no_movement":return a6;case"sudden_drop":return lT;case"route_deviation":return no;case"speed_anomaly":return ow;default:return na}},d=e=>{switch(e){case"CRITICAL":return"text-red-600 bg-red-50 border-red-200";case"HIGH":return"text-orange-600 bg-orange-50 border-orange-200";case"MEDIUM":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"LOW":return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},u=(e,t)=>{a(s=>s.map(s=>s.id===e?{...s,status:t}:s)),"false_positive"===t&&l(e=>({...e,falsePositives:e.falsePositives+1,accuracy:(e.anomaliesDetected-e.falsePositives-1)/e.anomaliesDetected*100}))};return(0,f.jsxs)("div",{className:"space-y-4",children:[(0,f.jsxs)(v.Zb,{children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(lO,{className:"h-5 w-5 text-primary"}),f.jsx("span",{children:"AI Anomaly Detection System"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(y.C,{variant:t?"default":"secondary",className:"bg-accent",children:t?"Active":"Inactive"}),f.jsx(g.z,{variant:"outline",size:"sm",onClick:()=>s(!t),children:t?"Pause":"Start"})]})]})}),(0,f.jsxs)(v.aY,{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"space-y-2",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[f.jsx("span",{children:"Processing Load"}),(0,f.jsxs)("span",{children:[n.toFixed(1),"%"]})]}),f.jsx(oj,{value:n,className:"h-2"})]}),(0,f.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-2xl font-bold text-primary",children:o.totalScanned}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Tourists Scanned"})]}),(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-2xl font-bold text-destructive",children:o.anomaliesDetected}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Anomalies Detected"})]}),(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-2xl font-bold text-orange-500",children:o.falsePositives}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"False Positives"})]}),(0,f.jsxs)("div",{children:[(0,f.jsxs)("p",{className:"text-2xl font-bold text-accent",children:[o.accuracy.toFixed(1),"%"]}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Accuracy"})]})]})]})]}),(0,f.jsxs)(v.Zb,{children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2",children:[f.jsx(na,{className:"h-5 w-5"}),f.jsx("span",{children:"Recent AI Detections"})]})}),f.jsx(v.aY,{className:"space-y-3",children:0===r.length?(0,f.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[f.jsx(lO,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),f.jsx("p",{children:"AI system is monitoring... No anomalies detected yet."})]}):r.map(e=>{let t=c(e.type);return f.jsx("div",{className:`p-4 border rounded-lg ${d(e.severity)}`,children:(0,f.jsxs)("div",{className:"flex items-start justify-between",children:[(0,f.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-3",children:[f.jsx(t,{className:"h-5 w-5"}),f.jsx(y.C,{variant:"outline",className:"text-xs",children:e.severity}),(0,f.jsxs)(y.C,{variant:"secondary",className:"text-xs",children:["AI: ",e.aiConfidence.toFixed(1),"%"]}),f.jsx("span",{className:"text-xs font-mono",children:e.id})]}),(0,f.jsxs)("div",{children:[f.jsx("h4",{className:"font-semibold",children:e.description}),(0,f.jsxs)("p",{className:"text-sm",children:["Tourist: ",e.touristName," (",e.touristId,")"]})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-4 text-xs",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-1",children:[f.jsx(a5,{className:"h-3 w-3"}),(0,f.jsxs)("span",{children:[e.location.lat.toFixed(4),", ",e.location.lng.toFixed(4)]})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-1",children:[f.jsx(a6,{className:"h-3 w-3"}),f.jsx("span",{children:e.timestamp.toLocaleTimeString()})]})]})]}),"detected"===e.status&&(0,f.jsxs)("div",{className:"flex flex-col space-y-1 ml-4",children:[f.jsx(g.z,{size:"sm",variant:"outline",onClick:()=>u(e.id,"resolved"),className:"text-xs h-7",children:"Resolve"}),f.jsx(g.z,{size:"sm",variant:"ghost",onClick:()=>u(e.id,"false_positive"),className:"text-xs h-7",children:"False +"})]}),"detected"!==e.status&&f.jsx(y.C,{variant:"secondary",className:"text-xs",children:"resolved"===e.status?"Resolved":"False Positive"})]})},e.id)})})]})]})}let lA=(0,_.Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);function lR({data:e,type:t}){let s=(0,x.useRef)(null),[r,a]=(0,x.useState)("1h"),[n,i]=(0,x.useState)(!1),[o,l]=(0,x.useState)([{lat:28.6139,lng:77.209,intensity:.9,type:"tourist",count:45,area:"Connaught Place"},{lat:28.6129,lng:77.2295,intensity:.7,type:"tourist",count:32,area:"India Gate"},{lat:28.6562,lng:77.241,intensity:.8,type:"tourist",count:38,area:"Red Fort"},{lat:28.6505,lng:77.2334,intensity:.95,type:"crowd",count:120,area:"Chandni Chowk"},{lat:28.62,lng:77.21,intensity:.85,type:"risk",count:8,area:"Restricted Zone"},{lat:28.6304,lng:77.2177,intensity:.6,type:"tourist",count:28,area:"Rajpath"},{lat:28.6127,lng:77.2773,intensity:.75,type:"crowd",count:85,area:"Humayun Tomb"}]),c=(e,t)=>{switch(e){case"tourist":return`rgba(59, 130, 246, ${t})`;case"risk":return`rgba(239, 68, 68, ${t})`;case"crowd":return`rgba(147, 51, 234, ${t})`;default:return`rgba(107, 114, 128, ${t})`}};return(0,f.jsxs)(v.Zb,{className:"hover:shadow-lg transition-shadow duration-300",children:[f.jsx(v.Ol,{children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2 hover:text-primary transition-colors duration-300",children:[(()=>{switch(t){case"tourist":return f.jsx(a9,{className:"h-5 w-5"});case"risk":return f.jsx(ow,{className:"h-5 w-5"});case"crowd":return f.jsx(a5,{className:"h-5 w-5"});default:return f.jsx(lA,{className:"h-5 w-5"})}})(),f.jsx("span",{children:(()=>{switch(t){case"tourist":return"Tourist Distribution Heatmap";case"risk":return"Risk Zone Intensity Map";case"crowd":return"Crowd Density Visualization";default:return"Multi-Layer Heatmap"}})()})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,f.jsxs)(aV,{value:r,onValueChange:a,children:[f.jsx(aH,{className:"w-20 h-8",children:f.jsx(aq,{})}),(0,f.jsxs)(aG,{children:[f.jsx(aY,{value:"15m",children:"15m"}),f.jsx(aY,{value:"1h",children:"1h"}),f.jsx(aY,{value:"6h",children:"6h"}),f.jsx(aY,{value:"24h",children:"24h"})]})]}),f.jsx(g.z,{variant:"outline",size:"sm",onClick:()=>{i(!0),setTimeout(()=>{l(e=>e.map(e=>({...e,intensity:Math.max(.1,Math.min(1,e.intensity+(Math.random()-.5)*.3)),count:Math.max(1,e.count+Math.floor((Math.random()-.5)*20))}))),i(!1)},1e3)},disabled:n,className:"hover:scale-105 transition-all duration-200 bg-transparent",children:f.jsx(lS,{className:`h-4 w-4 ${n?"animate-spin":""}`})})]})]})}),f.jsx(v.aY,{children:(0,f.jsxs)("div",{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"relative",children:[f.jsx("canvas",{ref:s,className:"w-full h-64 border border-border rounded-lg bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",style:{minHeight:"256px"}}),n&&f.jsx("div",{className:"absolute inset-0 bg-background/50 rounded-lg flex items-center justify-center",children:f.jsx("div",{className:"text-sm text-muted-foreground",children:"Updating heatmap..."})})]}),(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx("h4",{className:"font-medium text-sm",children:"Intensity Legend"}),(0,f.jsxs)("div",{className:"space-y-1",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2 text-xs",children:[f.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:c(t,.3)}}),f.jsx("span",{children:"Low (0-30%)"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2 text-xs",children:[f.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:c(t,.6)}}),f.jsx("span",{children:"Medium (30-70%)"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2 text-xs",children:[f.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:c(t,.9)}}),f.jsx("span",{children:"High (70-100%)"})]})]})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx("h4",{className:"font-medium text-sm",children:"Statistics"}),(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,f.jsxs)("div",{className:"bg-muted/50 p-2 rounded",children:[f.jsx("p",{className:"font-medium",children:"Total Points"}),f.jsx("p",{className:"text-lg font-bold",children:o.filter(e=>"tourist"!==t||e.type===t).length})]}),(0,f.jsxs)("div",{className:"bg-muted/50 p-2 rounded",children:[f.jsx("p",{className:"font-medium",children:"Avg Intensity"}),(0,f.jsxs)("p",{className:"text-lg font-bold",children:[Math.round(o.filter(e=>"tourist"!==t||e.type===t).reduce((e,t)=>e+t.intensity,0)/o.length*100),"%"]})]})]})]})]})]})})]})}let lD=(0,_.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function lL(){let[e,t]=(0,x.useState)([]),[s,r]=(0,x.useState)({totalTourists:247,activeIncidents:3,avgRiskLevel:25,avgResponseTime:6.2,safeZones:8,riskZones:5,crowdAlerts:3,responseUnits:12}),[a,n]=(0,x.useState)({touristGrowth:12,incidentReduction:-8,responseImprovement:-15,riskIncrease:5}),i=e=>e<30?"text-green-600":e<60?"text-yellow-600":"text-red-600",o=e=>e<30?"bg-green-100 dark:bg-green-900":e<60?"bg-yellow-100 dark:bg-yellow-900":"bg-red-100 dark:bg-red-900",l=e=>e>0?"↗️":e<0?"↘️":"➡️",c=(e,t)=>0===e?"text-muted-foreground":e>0===t?"text-green-600":"text-red-600";return(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[f.jsx(v.Zb,{className:"hover:shadow-lg transition-all duration-300 hover:scale-105",children:f.jsx(v.aY,{className:"p-4",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Tourists"}),f.jsx("p",{className:"text-2xl font-bold text-primary",children:s.totalTourists}),f.jsx("div",{className:"flex items-center space-x-1 text-xs",children:(0,f.jsxs)("span",{className:c(a.touristGrowth,!0),children:[l(a.touristGrowth)," ",Math.abs(a.touristGrowth),"%"]})})]}),f.jsx(a9,{className:"h-8 w-8 text-primary animate-pulse"})]})})}),f.jsx(v.Zb,{className:"hover:shadow-lg transition-all duration-300 hover:scale-105",children:f.jsx(v.aY,{className:"p-4",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Incidents"}),f.jsx("p",{className:"text-2xl font-bold text-destructive",children:s.activeIncidents}),f.jsx("div",{className:"flex items-center space-x-1 text-xs",children:(0,f.jsxs)("span",{className:c(a.incidentReduction,!1),children:[l(a.incidentReduction)," ",Math.abs(a.incidentReduction),"%"]})})]}),f.jsx(na,{className:"h-8 w-8 text-destructive animate-bounce"})]})})}),f.jsx(v.Zb,{className:"hover:shadow-lg transition-all duration-300 hover:scale-105",children:f.jsx(v.aY,{className:"p-4",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Risk Level"}),(0,f.jsxs)("p",{className:`text-2xl font-bold ${i(s.avgRiskLevel)}`,children:[s.avgRiskLevel,"%"]}),f.jsx("div",{className:"flex items-center space-x-1 text-xs",children:(0,f.jsxs)("span",{className:c(a.riskIncrease,!1),children:[l(a.riskIncrease)," ",Math.abs(a.riskIncrease),"%"]})})]}),f.jsx(ow,{className:"h-8 w-8 text-orange-500 animate-pulse"})]})})}),f.jsx(v.Zb,{className:"hover:shadow-lg transition-all duration-300 hover:scale-105",children:f.jsx(v.aY,{className:"p-4",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"Response Time"}),(0,f.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[s.avgResponseTime.toFixed(1),"m"]}),f.jsx("div",{className:"flex items-center space-x-1 text-xs",children:(0,f.jsxs)("span",{className:c(a.responseImprovement,!1),children:[l(a.responseImprovement)," ",Math.abs(a.responseImprovement),"%"]})})]}),f.jsx(a6,{className:"h-8 w-8 text-blue-600 animate-spin",style:{animationDuration:"8s"}})]})})})]}),(0,f.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,f.jsxs)(v.Zb,{className:"hover:shadow-lg transition-shadow duration-300",children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2",children:[f.jsx(lA,{className:"h-5 w-5"}),f.jsx("span",{children:"Zone Distribution"})]})}),f.jsx(v.aY,{children:f.jsx("div",{className:"space-y-4",children:(0,f.jsxs)("div",{className:"space-y-3",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),f.jsx("span",{className:"text-sm",children:"Safe Zones"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(y.C,{variant:"outline",children:s.safeZones}),f.jsx(oj,{value:80,className:"w-20"})]})]}),(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),f.jsx("span",{className:"text-sm",children:"Risk Zones"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(y.C,{variant:"destructive",children:s.riskZones}),f.jsx(oj,{value:25,className:"w-20"})]})]}),(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),f.jsx("span",{className:"text-sm",children:"Crowd Alerts"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(y.C,{variant:"secondary",children:s.crowdAlerts}),f.jsx(oj,{value:15,className:"w-20"})]})]}),(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),f.jsx("span",{className:"text-sm",children:"Response Units"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(y.C,{variant:"outline",children:s.responseUnits}),f.jsx(oj,{value:75,className:"w-20"})]})]})]})})})]}),(0,f.jsxs)(v.Zb,{className:"hover:shadow-lg transition-shadow duration-300",children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2",children:[f.jsx(lN,{className:"h-5 w-5"}),f.jsx("span",{children:"Risk Assessment Matrix"})]})}),f.jsx(v.aY,{children:(0,f.jsxs)("div",{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[f.jsx("div",{className:"text-center font-medium",children:"Low"}),f.jsx("div",{className:"text-center font-medium",children:"Medium"}),f.jsx("div",{className:"text-center font-medium",children:"High"})]}),f.jsx("div",{className:"space-y-2",children:(0,f.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,f.jsxs)("div",{className:`p-3 rounded text-center ${o(20)}`,children:[f.jsx("p",{className:"font-bold text-green-600",children:"65%"}),f.jsx("p",{className:"text-xs",children:"Safe Areas"})]}),(0,f.jsxs)("div",{className:`p-3 rounded text-center ${o(50)}`,children:[f.jsx("p",{className:"font-bold text-yellow-600",children:"25%"}),f.jsx("p",{className:"text-xs",children:"Moderate Risk"})]}),(0,f.jsxs)("div",{className:`p-3 rounded text-center ${o(80)}`,children:[f.jsx("p",{className:"font-bold text-red-600",children:"10%"}),f.jsx("p",{className:"text-xs",children:"High Risk"})]})]})}),(0,f.jsxs)("div",{className:"pt-2 border-t border-border",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[f.jsx("span",{children:"Overall Risk Level"}),f.jsx(y.C,{className:i(s.avgRiskLevel),children:s.avgRiskLevel<30?"LOW":s.avgRiskLevel<60?"MEDIUM":"HIGH"})]}),f.jsx(oj,{value:s.avgRiskLevel,className:"mt-2"})]})]})})]})]}),(0,f.jsxs)(v.Zb,{className:"hover:shadow-lg transition-shadow duration-300",children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2",children:[f.jsx(lD,{className:"h-5 w-5"}),f.jsx("span",{children:"Real-time Trends (Last 24 Hours)"})]})}),f.jsx(v.aY,{children:(0,f.jsxs)("div",{className:"h-48 bg-gradient-to-r from-blue-50 via-purple-50 to-green-50 dark:from-blue-950 dark:via-purple-950 dark:to-green-950 rounded-lg border border-border flex items-center justify-center relative overflow-hidden",children:[(0,f.jsxs)("div",{className:"text-center space-y-2",children:[f.jsx(lD,{className:"h-12 w-12 mx-auto text-primary animate-pulse"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Interactive time-series visualization"}),(0,f.jsxs)("div",{className:"flex items-center space-x-4 text-xs",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-1",children:[f.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),f.jsx("span",{children:"Tourists"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-1",children:[f.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse delay-100"}),f.jsx("span",{children:"Incidents"})]}),f.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse delay-200"}),f.jsx("span",{children:"Response Time"})]})]}),f.jsx("div",{className:"absolute inset-0 opacity-20",children:[...Array(6)].map((e,t)=>f.jsx("div",{className:"absolute w-2 h-2 bg-primary rounded-full animate-ping",style:{left:`${20+15*t}%`,top:`${30+20*Math.sin(t)}%`,animationDelay:`${.5*t}s`,animationDuration:"3s"}},t))})]})})]})]})}function lP({onBack:e,onLogout:t}){let[s,r]=(0,x.useState)([{id:"INC-001",touristId:"NVS-12345678",touristName:"John Smith",type:"Medical Emergency",priority:"HIGH",location:{lat:28.6139,lng:77.209},address:"Connaught Place, New Delhi",timestamp:new Date(Date.now()-3e5),status:"Active",phone:"+91 98765 43210",description:"Tourist reported chest pain and difficulty breathing"},{id:"INC-002",touristId:"NVS-87654321",touristName:"Sarah Johnson",type:"Security Threat",priority:"HIGH",location:{lat:28.62,lng:77.21},address:"Red Fort Area, Chandni Chowk",timestamp:new Date(Date.now()-6e5),status:"Responding",phone:"+91 87654 32109",description:"Tourist reported harassment by local individuals"},{id:"INC-003",touristId:"NVS-11223344",touristName:"Mike Chen",type:"Lost/Stranded",priority:"MEDIUM",location:{lat:28.61,lng:77.23},address:"Lodhi Gardens, New Delhi",timestamp:new Date(Date.now()-9e5),status:"Resolved",phone:"+91 76543 21098",description:"Tourist lost in unfamiliar area, requesting directions"}]),[a,n]=(0,x.useState)(null),[i,o]=(0,x.useState)([{id:"LOG-001",timestamp:new Date(Date.now()-18e4),action:"Incident Created",officer:"Officer Sharma",details:"New medical emergency reported for tourist John Smith",incidentId:"INC-001"},{id:"LOG-002",timestamp:new Date(Date.now()-36e4),action:"Response Dispatched",officer:"Officer Patel",details:"Ambulance and police unit dispatched to Connaught Place",incidentId:"INC-001"},{id:"LOG-003",timestamp:new Date(Date.now()-54e4),action:"Case Resolved",officer:"Officer Kumar",details:"Tourist Mike Chen safely guided to destination",incidentId:"INC-003"}]),[l,c]=(0,x.useState)([{id:"NOTIF-001",type:"SOS Alert",message:"New emergency SOS from John Smith at Connaught Place",timestamp:new Date(Date.now()-3e5),read:!1},{id:"NOTIF-002",type:"Anomaly Detection",message:"No movement detected for Sarah Johnson for 3+ hours",timestamp:new Date(Date.now()-6e5),read:!1}]),[d,u]=(0,x.useState)({activeTourists:247,activeIncidents:3,resolvedToday:12,responseTime:"6.2 min"}),[h,m]=(0,x.useState)([{id:"EFIR-001",incidentId:"INC-001",firNumber:"FIR/2024/001",touristName:"John Smith",touristId:"NVS-12345678",incidentType:"Medical Emergency",priority:"HIGH",location:{lat:28.6139,lng:77.209},address:"Connaught Place, New Delhi",description:"Tourist reported chest pain and difficulty breathing",reportedBy:"Tourist Self-Report",officerInCharge:"Officer Sharma",status:"Filed",createdAt:new Date(Date.now()-3e5),updatedAt:new Date(Date.now()-3e5)},{id:"EFIR-002",incidentId:"INC-002",firNumber:"FIR/2024/002",touristName:"Sarah Johnson",touristId:"NVS-87654321",incidentType:"Security Threat",priority:"HIGH",location:{lat:28.62,lng:77.21},address:"Red Fort Area, Chandni Chowk",description:"Tourist reported harassment by local individuals",reportedBy:"SOS Alert",officerInCharge:"Officer Patel",status:"Under Investigation",createdAt:new Date(Date.now()-6e5),updatedAt:new Date(Date.now()-3e5)}]),[p,b]=(0,x.useState)({status:"Draft",officerInCharge:"Officer Sharma",reportedBy:"Manual Entry"}),[w,N]=(0,x.useState)(""),[_,k]=(0,x.useState)("all"),C=(e,t)=>{m(s=>s.map(s=>s.id===e?{...s,status:t,updatedAt:new Date}:s));let s=h.find(t=>t.id===e);if(s){let e={id:`LOG-${Date.now()}`,timestamp:new Date,action:"e-FIR Status Updated",officer:s.officerInCharge,details:`e-FIR ${s.firNumber} status changed to ${t}`,incidentId:s.incidentId};o(t=>[e,...t])}},S=e=>{let t={id:`EFIR-${Date.now().toString().slice(-6)}`,incidentId:e.id,firNumber:`FIR/2024/${(h.length+1).toString().padStart(3,"0")}`,touristName:e.touristName,touristId:e.touristId,incidentType:e.type,priority:e.priority,location:e.location,address:e.address,description:e.description,reportedBy:"SOS Alert",officerInCharge:"Officer Sharma",status:"Filed",createdAt:new Date,updatedAt:new Date};m(e=>[t,...e]);let s=new Blob([`
ELECTRONIC FIRST INFORMATION REPORT (e-FIR)
NaviSafe Tourist Safety System
═══════════════════════════════════════════════════════════════

FIR NUMBER: ${t.firNumber}
e-FIR ID: ${t.id}
DATE & TIME: ${new Date().toLocaleString()}
STATUS: ${t.status}

INCIDENT DETAILS:
═══════════════════════════════════════════════════════════════
Incident ID: ${t.incidentId}
Type: ${t.incidentType}
Priority Level: ${t.priority}
Current Status: ${t.status}

TOURIST INFORMATION:
═══════════════════════════════════════════════════════════════
Full Name: ${t.touristName}
Digital Tourist ID: ${t.touristId}
Contact Number: ${e.phone||"Not Available"}
Nationality: Foreign National
Emergency Contact: To be updated

LOCATION DETAILS:
═══════════════════════════════════════════════════════════════
GPS Coordinates: ${t.location.lat.toFixed(6)}, ${t.location.lng.toFixed(6)}
Address: ${t.address}
Incident Reported Time: ${e.timestamp.toLocaleString()}
e-FIR Filed Time: ${t.createdAt.toLocaleString()}

INCIDENT DESCRIPTION:
═══════════════════════════════════════════════════════════════
${t.description}

RESPONSE ACTIONS TAKEN:
═══════════════════════════════════════════════════════════════
- Immediate alert sent to local police station
- Tourist helpline notified automatically
- GPS location tracked and monitored in real-time
- Response team dispatched to incident location
- Digital evidence preserved in NaviSafe system
- Blockchain transaction recorded for audit trail

INVESTIGATION DETAILS:
═══════════════════════════════════════════════════════════════
Reported By: ${t.reportedBy}
Officer In Charge: ${t.officerInCharge}
Police Station: Connaught Place Police Station
Badge Number: DL-001234
Investigation Status: ${t.status}

DIGITAL VERIFICATION:
═══════════════════════════════════════════════════════════════
System Generated: Yes
Blockchain Hash: ${Math.random().toString(36).substring(2,15)}
Digital Signature: Verified
Timestamp Verification: Confirmed

CONTACT INFORMATION:
═══════════════════════════════════════════════════════════════
NaviSafe Support: navisafe-support@gov.in
Emergency Helpline: 112
Tourist Helpline: 1363
Police Control Room: 100

═══════════════════════════════════════════════════════════════
This e-FIR has been automatically generated by the NaviSafe 
Smart Tourist Safety Monitoring & Incident Response System.

Generated on: ${new Date().toLocaleString()}
System Version: NaviSafe v2.0
Authentication: Digital Signature Verified
═══════════════════════════════════════════════════════════════
    `],{type:"text/plain"}),r=URL.createObjectURL(s),a=document.createElement("a");a.href=r,a.download=`eFIR-${t.firNumber.replace(/\//g,"-")}.txt`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r);let n={id:`LOG-${Date.now()}`,timestamp:new Date,action:"e-FIR Generated & Downloaded",officer:t.officerInCharge,details:`e-FIR ${t.firNumber} generated and downloaded for incident ${t.incidentId}`,incidentId:t.incidentId};return o(e=>[n,...e]),t},E=h.filter(e=>{let t=e.touristName.toLowerCase().includes(w.toLowerCase())||e.firNumber.toLowerCase().includes(w.toLowerCase())||e.incidentType.toLowerCase().includes(w.toLowerCase())||e.touristId.toLowerCase().includes(w.toLowerCase()),s="all"===_||e.status.toLowerCase()===_.toLowerCase();return t&&s}),T=e=>{let t=new Blob([`
ELECTRONIC FIRST INFORMATION REPORT (e-FIR)
NaviSafe Tourist Safety System

FIR No: ${e.id}/2024
Date & Time: ${new Date().toLocaleString()}

INCIDENT DETAILS:
Incident ID: ${e.id}
Type: ${e.type}
Priority: ${e.priority}
Status: ${e.status}

TOURIST INFORMATION:
Name: ${e.touristName}
Tourist ID: ${e.touristId}
Phone: ${e.phone}
Nationality: Foreign National

LOCATION DETAILS:
Coordinates: ${e.location.lat.toFixed(6)}, ${e.location.lng.toFixed(6)}
Address: ${e.address}
Reported Time: ${e.timestamp.toLocaleString()}

INCIDENT DESCRIPTION:
${e.description}

RESPONSE ACTIONS:
- Immediate alert sent to local police station
- Tourist helpline notified
- GPS location tracked and monitored
- Response team dispatched

OFFICER IN CHARGE:
Name: Officer Sharma
Badge No: DL-001234
Station: Connaught Place Police Station

This e-FIR has been automatically generated by the NaviSafe system.
For queries, contact: navisafe-support@gov.in
    `],{type:"text/plain"}),s=URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=`eFIR-${e.id}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s);let a={id:`LOG-${Date.now()}`,timestamp:new Date,action:"e-FIR Generated",officer:"Officer Sharma",details:`e-FIR generated for incident ${e.id}`,incidentId:e.id};o(e=>[a,...e])},I=e=>{c(t=>t.map(t=>t.id===e?{...t,read:!0}:t))},A=l.filter(e=>!e.read).length;return(0,f.jsxs)("div",{className:"min-h-screen bg-background",children:[f.jsx("div",{className:"bg-foreground text-background p-4 sticky top-0 z-50 animate-in slide-in-from-top-4 duration-500 shadow-lg",children:(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-3",children:[f.jsx(j.Z,{className:"h-6 w-6 animate-pulse"}),f.jsx("h1",{className:"text-lg font-semibold",children:"NaviSafe Authority Dashboard"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,f.jsxs)(g.z,{variant:"ghost",size:"sm",className:"relative hover:scale-110 transition-all duration-200 group",children:[f.jsx(lw,{className:"h-5 w-5 group-hover:animate-bounce"}),A>0&&f.jsx(y.C,{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 text-xs bg-destructive animate-pulse",children:A})]}),f.jsx(O,{}),f.jsx(g.z,{variant:"ghost",onClick:t,className:"text-sm hover:scale-105 transition-all duration-200 hover:bg-red-500/10 hover:text-red-300",children:"Logout"}),f.jsx(g.z,{variant:"ghost",onClick:e,className:"text-sm hover:scale-105 transition-all duration-200",children:"← Back to Tourist App"})]})]})}),(0,f.jsxs)("div",{className:"p-4 space-y-6",children:[(0,f.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[f.jsx(v.Zb,{className:"hover:shadow-lg hover:scale-105 transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-100 hover:shadow-primary/20",children:f.jsx(v.aY,{className:"p-4 text-center",children:(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(a9,{className:"h-8 w-8 mx-auto text-primary hover:scale-110 transition-transform duration-300"}),(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-2xl font-bold hover:text-primary transition-colors duration-300",children:d.activeTourists}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Tourists"})]})]})})}),f.jsx(v.Zb,{className:"hover:shadow-lg hover:scale-105 transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-200 hover:shadow-destructive/20",children:f.jsx(v.aY,{className:"p-4 text-center",children:(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(na,{className:"h-8 w-8 mx-auto text-destructive hover:scale-110 transition-transform duration-300 animate-pulse"}),(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-2xl font-bold hover:text-destructive transition-colors duration-300",children:d.activeIncidents}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Incidents"})]})]})})}),f.jsx(v.Zb,{className:"hover:shadow-lg hover:scale-105 transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-300 hover:shadow-accent/20",children:f.jsx(v.aY,{className:"p-4 text-center",children:(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(lN,{className:"h-8 w-8 mx-auto text-accent hover:scale-110 transition-transform duration-300"}),(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-2xl font-bold hover:text-accent transition-colors duration-300",children:d.resolvedToday}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Resolved Today"})]})]})})}),f.jsx(v.Zb,{className:"hover:shadow-lg hover:scale-105 transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-400 hover:shadow-orange-500/20",children:f.jsx(v.aY,{className:"p-4 text-center",children:(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(a6,{className:"h-8 w-8 mx-auto text-orange-500 hover:scale-110 transition-transform duration-300 animate-spin",style:{animationDuration:"8s"}}),(0,f.jsxs)("div",{children:[f.jsx("p",{className:"text-2xl font-bold hover:text-orange-500 transition-colors duration-300",children:d.responseTime}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Response"})]})]})})})]}),(0,f.jsxs)(lj.mQ,{defaultValue:"overview",className:"space-y-4 animate-in fade-in-0 slide-in-from-bottom-4 duration-500 delay-500",children:[(0,f.jsxs)(lj.dr,{className:"grid w-full grid-cols-8 hover:shadow-md transition-shadow duration-300",children:[f.jsx(lj.SP,{value:"overview",className:"hover:scale-105 transition-all duration-200",children:"Overview"}),f.jsx(lj.SP,{value:"incidents",className:"hover:scale-105 transition-all duration-200",children:"Incidents"}),f.jsx(lj.SP,{value:"map",className:"hover:scale-105 transition-all duration-200",children:"Live Map"}),f.jsx(lj.SP,{value:"analytics",className:"hover:scale-105 transition-all duration-200",children:"Analytics"}),f.jsx(lj.SP,{value:"ai",className:"hover:scale-105 transition-all duration-200",children:"AI System"}),f.jsx(lj.SP,{value:"blockchain",className:"hover:scale-105 transition-all duration-200",children:"Blockchain"}),f.jsx(lj.SP,{value:"efir",className:"hover:scale-105 transition-all duration-200",children:"e-FIR"}),f.jsx(lj.SP,{value:"audit",className:"hover:scale-105 transition-all duration-200",children:"Audit Log"})]}),f.jsx(lj.nU,{value:"overview",className:"space-y-4",children:(0,f.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,f.jsxs)(v.Zb,{className:"hover:shadow-lg transition-all duration-300 animate-in fade-in-0 slide-in-from-left-4 duration-500 delay-600",children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2 hover:text-primary transition-colors duration-300",children:[f.jsx(na,{className:"h-5 w-5 hover:rotate-12 transition-transform duration-300"}),f.jsx("span",{children:"Recent Incidents"})]})}),f.jsx(v.aY,{className:"space-y-3",children:s.slice(0,3).map((e,t)=>(0,f.jsxs)("div",{className:"p-3 border border-border rounded-lg space-y-2 hover:bg-muted/30 hover:scale-[1.02] transition-all duration-300 hover:shadow-sm animate-in fade-in-0 slide-in-from-bottom-2 duration-300",style:{animationDelay:`${700+100*t}ms`},children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[f.jsx(y.C,{variant:"HIGH"===e.priority?"destructive":"secondary",className:"HIGH"===e.priority?"animate-pulse":"",children:e.priority}),f.jsx("span",{className:"text-xs text-muted-foreground",children:e.timestamp.toLocaleTimeString()})]}),(0,f.jsxs)("div",{children:[f.jsx("p",{className:"font-medium hover:text-primary transition-colors duration-300",children:e.type}),f.jsx("p",{className:"text-sm text-muted-foreground",children:e.touristName}),f.jsx("p",{className:"text-xs text-muted-foreground",children:e.address})]})]},e.id))})]}),(0,f.jsxs)(v.Zb,{className:"hover:shadow-lg transition-all duration-300 animate-in fade-in-0 slide-in-from-right-4 duration-500 delay-600",children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2 hover:text-primary transition-colors duration-300",children:[f.jsx(lw,{className:"h-5 w-5 hover:animate-bounce"}),f.jsx("span",{children:"Live Notifications"})]})}),f.jsx(v.aY,{className:"space-y-3",children:l.map((e,t)=>(0,f.jsxs)("div",{className:`p-3 border border-border rounded-lg cursor-pointer hover:scale-[1.02] transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-2 duration-300 ${e.read?"":"bg-primary/5 border-primary/20 animate-pulse"}`,style:{animationDelay:`${700+100*t}ms`},onClick:()=>I(e.id),children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[f.jsx(y.C,{variant:"outline",className:"hover:bg-muted transition-colors duration-300",children:e.type}),f.jsx("span",{className:"text-xs text-muted-foreground",children:e.timestamp.toLocaleTimeString()})]}),f.jsx("p",{className:"text-sm mt-2",children:e.message})]},e.id))})]})]})}),(0,f.jsxs)(lj.nU,{value:"incidents",className:"space-y-4",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-4 animate-in fade-in-0 slide-in-from-top-4 duration-500",children:[f.jsx("div",{className:"flex-1",children:f.jsx(e2.I,{placeholder:"Search incidents...",className:"w-full hover:shadow-md transition-shadow duration-300"})}),(0,f.jsxs)(g.z,{variant:"outline",size:"sm",className:"hover:scale-105 active:scale-95 transition-all duration-200 bg-transparent",children:[f.jsx(l_,{className:"h-4 w-4 mr-2 hover:rotate-12 transition-transform duration-300"}),"Filter"]})]}),f.jsx("div",{className:"grid gap-4",children:s.map((e,t)=>f.jsx(v.Zb,{className:"cursor-pointer hover:shadow-lg hover:scale-[1.02] transition-all duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500",style:{animationDelay:`${100*t}ms`},children:f.jsx(v.aY,{className:"p-4",children:(0,f.jsxs)("div",{className:"flex items-start justify-between",children:[(0,f.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-3",children:[f.jsx(y.C,{variant:"HIGH"===e.priority?"destructive":"secondary",className:"HIGH"===e.priority?"animate-pulse":"hover:scale-105 transition-transform duration-200",children:e.priority}),f.jsx(y.C,{variant:"outline",className:"hover:bg-muted transition-colors duration-300",children:e.status}),f.jsx("span",{className:"text-sm font-mono hover:text-primary transition-colors duration-300",children:e.id})]}),(0,f.jsxs)("div",{children:[f.jsx("h3",{className:"font-semibold hover:text-primary transition-colors duration-300",children:e.type}),(0,f.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Tourist: ",e.touristName," (",e.touristId,")"]})]}),(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,f.jsxs)("div",{className:"hover:bg-muted/30 p-2 rounded transition-colors duration-300",children:[f.jsx("p",{className:"text-muted-foreground",children:"Location:"}),f.jsx("p",{children:e.address})]}),(0,f.jsxs)("div",{className:"hover:bg-muted/30 p-2 rounded transition-colors duration-300",children:[f.jsx("p",{className:"text-muted-foreground",children:"Contact:"}),f.jsx("p",{children:e.phone})]})]}),f.jsx("p",{className:"text-sm hover:bg-muted/30 p-2 rounded transition-colors duration-300",children:e.description}),(0,f.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Reported: ",e.timestamp.toLocaleString()]})]}),(0,f.jsxs)("div",{className:"flex flex-col space-y-2 ml-4",children:[(0,f.jsxs)(g.z,{size:"sm",onClick:()=>n(e),className:"hover:scale-105 active:scale-95 transition-all duration-200",children:[f.jsx(on.Z,{className:"h-4 w-4 mr-2 hover:rotate-12 transition-transform duration-300"}),"View"]}),(0,f.jsxs)(g.z,{size:"sm",variant:"outline",onClick:()=>T(e),className:"hover:scale-105 active:scale-95 transition-all duration-200",children:[f.jsx(nd,{className:"h-4 w-4 mr-2 hover:rotate-12 transition-transform duration-300"}),"e-FIR"]})]})]})})},e.id))})]}),f.jsx(lj.nU,{value:"map",children:(0,f.jsxs)(v.Zb,{className:"hover:shadow-lg transition-shadow duration-300 animate-in fade-in-0 zoom-in-95 duration-500",children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2 hover:text-primary transition-colors duration-300",children:[f.jsx(a5,{className:"h-5 w-5 animate-pulse"}),f.jsx("span",{children:"Live Tourist Tracking & Risk Zones"})]})}),f.jsx(v.aY,{children:f.jsx(lE,{incidents:s})})]})}),(0,f.jsxs)(lj.nU,{value:"analytics",className:"space-y-4",children:[f.jsx(lL,{}),(0,f.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[f.jsx(lR,{type:"tourist"}),f.jsx(lR,{type:"risk"})]}),f.jsx("div",{className:"grid grid-cols-1 gap-4",children:f.jsx(lR,{type:"crowd"})})]}),f.jsx(lj.nU,{value:"ai",children:f.jsx("div",{className:"animate-in fade-in-0 slide-in-from-bottom-4 duration-500",children:f.jsx(lI,{onAnomalyDetected:e=>{let t={id:`INC-${Date.now().toString().slice(-6)}`,touristId:e.touristId,touristName:e.touristName,type:"AI Anomaly Detection",priority:e.severity,location:e.location,address:`Lat: ${e.location.lat.toFixed(4)}, Lng: ${e.location.lng.toFixed(4)}`,timestamp:e.timestamp,status:"Active",phone:"+91 XXXXX XXXXX",description:`AI detected: ${e.description} (Confidence: ${e.aiConfidence.toFixed(1)}%)`};r(e=>[t,...e]);let s={id:`NOTIF-${Date.now()}`,type:"AI Anomaly",message:`AI detected ${e.type.replace("_"," ")} for ${e.touristName}`,timestamp:new Date,read:!1};c(e=>[s,...e]);let a={id:`LOG-${Date.now()}`,timestamp:new Date,action:"AI Anomaly Detected",officer:"AI System",details:`${e.description} for tourist ${e.touristName}`,incidentId:t.id};o(e=>[a,...e]),u(e=>({...e,activeIncidents:e.activeIncidents+1}))}})})}),f.jsx(lj.nU,{value:"blockchain",children:f.jsx("div",{className:"animate-in fade-in-0 slide-in-from-bottom-4 duration-500",children:f.jsx(iX,{})})}),f.jsx(lj.nU,{value:"efir",className:"space-y-4",children:(0,f.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,f.jsxs)(v.Zb,{className:"hover:shadow-lg transition-shadow duration-300 animate-in fade-in-0 slide-in-from-left-4 duration-500",children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2 hover:text-primary transition-colors duration-300",children:[f.jsx(nd,{className:"h-5 w-5 hover:rotate-12 transition-transform duration-300"}),f.jsx("span",{children:"e-FIR Management"})]}),(0,f.jsxs)(y.C,{variant:"outline",children:[h.length," Total"]})]})}),(0,f.jsxs)(v.aY,{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"flex space-x-2",children:[f.jsx("div",{className:"flex-1",children:f.jsx(e2.I,{placeholder:"Search e-FIRs...",value:w,onChange:e=>N(e.target.value),className:"hover:shadow-md transition-shadow duration-300"})}),(0,f.jsxs)(aV,{value:_,onValueChange:k,children:[f.jsx(aH,{className:"w-32",children:f.jsx(aq,{})}),(0,f.jsxs)(aG,{children:[f.jsx(aY,{value:"all",children:"All Status"}),f.jsx(aY,{value:"draft",children:"Draft"}),f.jsx(aY,{value:"filed",children:"Filed"}),f.jsx(aY,{value:"under investigation",children:"Under Investigation"}),f.jsx(aY,{value:"closed",children:"Closed"})]})]})]}),f.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:E.map((e,t)=>f.jsx("div",{className:"p-3 border border-border rounded-lg hover:bg-muted/30 hover:scale-[1.02] transition-all duration-300 hover:shadow-sm animate-in fade-in-0 slide-in-from-bottom-2 duration-300",style:{animationDelay:`${100*t}ms`},children:(0,f.jsxs)("div",{className:"flex items-start justify-between",children:[(0,f.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(y.C,{variant:"Filed"===e.status?"default":"Under Investigation"===e.status?"secondary":"Closed"===e.status?"outline":"destructive",className:"hover:scale-105 transition-transform duration-200",children:e.status}),f.jsx(y.C,{variant:"outline",className:"font-mono text-xs",children:e.firNumber})]}),(0,f.jsxs)("div",{children:[f.jsx("p",{className:"font-medium hover:text-primary transition-colors duration-300",children:e.touristName}),f.jsx("p",{className:"text-sm text-muted-foreground",children:e.incidentType}),(0,f.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Created: ",e.createdAt.toLocaleString()]})]})]}),(0,f.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,f.jsxs)(aV,{value:e.status,onValueChange:t=>C(e.id,t),children:[f.jsx(aH,{className:"w-32 h-8 text-xs",children:f.jsx(aq,{})}),(0,f.jsxs)(aG,{children:[f.jsx(aY,{value:"Draft",children:"Draft"}),f.jsx(aY,{value:"Filed",children:"Filed"}),f.jsx(aY,{value:"Under Investigation",children:"Under Investigation"}),f.jsx(aY,{value:"Closed",children:"Closed"})]})]}),(0,f.jsxs)(g.z,{size:"sm",variant:"outline",onClick:()=>S({id:e.incidentId,touristName:e.touristName,touristId:e.touristId,type:e.incidentType,priority:e.priority,location:e.location,address:e.address,description:e.description,timestamp:e.createdAt,phone:"Contact on file"}),className:"hover:scale-105 active:scale-95 transition-all duration-200 text-xs",children:[f.jsx(lk,{className:"h-3 w-3 mr-1"}),"Download"]})]})]})},e.id))})]})]}),(0,f.jsxs)(v.Zb,{className:"hover:shadow-lg transition-shadow duration-300 animate-in fade-in-0 slide-in-from-right-4 duration-500",children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2 hover:text-primary transition-colors duration-300",children:[f.jsx(a8,{className:"h-5 w-5 hover:rotate-90 transition-transform duration-300"}),f.jsx("span",{children:"Create New e-FIR"})]})}),(0,f.jsxs)(v.aY,{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(e3._,{htmlFor:"touristName",children:"Tourist Name *"}),f.jsx(e2.I,{id:"touristName",value:p.touristName||"",onChange:e=>b(t=>({...t,touristName:e.target.value})),placeholder:"Enter tourist name",className:"hover:shadow-md transition-shadow duration-300"})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(e3._,{htmlFor:"touristId",children:"Tourist ID"}),f.jsx(e2.I,{id:"touristId",value:p.touristId||"",onChange:e=>b(t=>({...t,touristId:e.target.value})),placeholder:"NVS-XXXXXXXX",className:"hover:shadow-md transition-shadow duration-300"})]})]}),(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(e3._,{htmlFor:"incidentType",children:"Incident Type *"}),(0,f.jsxs)(aV,{value:p.incidentType||"",onValueChange:e=>b(t=>({...t,incidentType:e})),children:[f.jsx(aH,{children:f.jsx(aq,{placeholder:"Select incident type"})}),(0,f.jsxs)(aG,{children:[f.jsx(aY,{value:"Medical Emergency",children:"Medical Emergency"}),f.jsx(aY,{value:"Security Threat",children:"Security Threat"}),f.jsx(aY,{value:"Lost/Stranded",children:"Lost/Stranded"}),f.jsx(aY,{value:"Theft/Robbery",children:"Theft/Robbery"}),f.jsx(aY,{value:"Harassment",children:"Harassment"}),f.jsx(aY,{value:"Accident",children:"Accident"}),f.jsx(aY,{value:"Other",children:"Other"})]})]})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(e3._,{htmlFor:"priority",children:"Priority"}),(0,f.jsxs)(aV,{value:p.priority||"MEDIUM",onValueChange:e=>b(t=>({...t,priority:e})),children:[f.jsx(aH,{children:f.jsx(aq,{})}),(0,f.jsxs)(aG,{children:[f.jsx(aY,{value:"LOW",children:"Low"}),f.jsx(aY,{value:"MEDIUM",children:"Medium"}),f.jsx(aY,{value:"HIGH",children:"High"}),f.jsx(aY,{value:"CRITICAL",children:"Critical"})]})]})]})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(e3._,{htmlFor:"address",children:"Location/Address"}),f.jsx(e2.I,{id:"address",value:p.address||"",onChange:e=>b(t=>({...t,address:e.target.value})),placeholder:"Enter incident location",className:"hover:shadow-md transition-shadow duration-300"})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(e3._,{htmlFor:"description",children:"Incident Description *"}),f.jsx(a3,{id:"description",value:p.description||"",onChange:e=>b(t=>({...t,description:e.target.value})),placeholder:"Describe the incident in detail...",className:"min-h-20 hover:shadow-md transition-shadow duration-300"})]}),(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(e3._,{htmlFor:"reportedBy",children:"Reported By"}),(0,f.jsxs)(aV,{value:p.reportedBy||"Manual Entry",onValueChange:e=>b(t=>({...t,reportedBy:e})),children:[f.jsx(aH,{children:f.jsx(aq,{})}),(0,f.jsxs)(aG,{children:[f.jsx(aY,{value:"Manual Entry",children:"Manual Entry"}),f.jsx(aY,{value:"SOS Alert",children:"SOS Alert"}),f.jsx(aY,{value:"Tourist Self-Report",children:"Tourist Self-Report"}),f.jsx(aY,{value:"Third Party",children:"Third Party"}),f.jsx(aY,{value:"AI Detection",children:"AI Detection"})]})]})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(e3._,{htmlFor:"officer",children:"Officer In Charge"}),(0,f.jsxs)(aV,{value:p.officerInCharge||"Officer Sharma",onValueChange:e=>b(t=>({...t,officerInCharge:e})),children:[f.jsx(aH,{children:f.jsx(aq,{})}),(0,f.jsxs)(aG,{children:[f.jsx(aY,{value:"Officer Sharma",children:"Officer Sharma"}),f.jsx(aY,{value:"Officer Patel",children:"Officer Patel"}),f.jsx(aY,{value:"Officer Kumar",children:"Officer Kumar"}),f.jsx(aY,{value:"Officer Singh",children:"Officer Singh"})]})]})]})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[f.jsx(e3._,{htmlFor:"additionalDetails",children:"Additional Details"}),f.jsx(a3,{id:"additionalDetails",value:p.additionalDetails||"",onChange:e=>b(t=>({...t,additionalDetails:e.target.value})),placeholder:"Any additional information...",className:"min-h-16 hover:shadow-md transition-shadow duration-300"})]}),(0,f.jsxs)(g.z,{onClick:()=>{if(!p.touristName||!p.incidentType||!p.description){alert("Please fill in all required fields");return}let e={id:`EFIR-${Date.now().toString().slice(-6)}`,incidentId:p.incidentId||`INC-${Date.now().toString().slice(-6)}`,firNumber:`FIR/2024/${(h.length+1).toString().padStart(3,"0")}`,touristName:p.touristName,touristId:p.touristId||`NVS-${Math.random().toString().slice(-8)}`,incidentType:p.incidentType,priority:p.priority||"MEDIUM",location:p.location||{lat:28.6139,lng:77.209},address:p.address||"Location to be determined",description:p.description,reportedBy:p.reportedBy||"Manual Entry",officerInCharge:p.officerInCharge||"Officer Sharma",status:"Draft",createdAt:new Date,updatedAt:new Date,additionalDetails:p.additionalDetails};m(t=>[e,...t]),b({status:"Draft",officerInCharge:"Officer Sharma",reportedBy:"Manual Entry"});let t={id:`LOG-${Date.now()}`,timestamp:new Date,action:"e-FIR Created",officer:e.officerInCharge,details:`New e-FIR ${e.firNumber} created for ${e.touristName}`,incidentId:e.incidentId};o(e=>[t,...e])},className:"w-full hover:scale-105 active:scale-95 transition-all duration-200 group",children:[f.jsx(lC,{className:"h-4 w-4 mr-2 group-hover:animate-pulse"}),"Create e-FIR"]})]})]})]})}),f.jsx(lj.nU,{value:"audit",className:"space-y-4",children:(0,f.jsxs)(v.Zb,{className:"hover:shadow-lg transition-shadow duration-300 animate-in fade-in-0 slide-in-from-bottom-4 duration-500",children:[f.jsx(v.Ol,{children:(0,f.jsxs)(v.ll,{className:"flex items-center space-x-2 hover:text-primary transition-colors duration-300",children:[f.jsx(lN,{className:"h-5 w-5 hover:scale-110 transition-transform duration-300"}),f.jsx("span",{children:"System Audit Log"})]})}),f.jsx(v.aY,{children:f.jsx("div",{className:"space-y-3",children:i.map((e,t)=>(0,f.jsxs)("div",{className:"p-3 border border-border rounded-lg hover:bg-muted/30 hover:scale-[1.02] transition-all duration-300 hover:shadow-sm animate-in fade-in-0 slide-in-from-bottom-2 duration-300",style:{animationDelay:`${100*t}ms`},children:[(0,f.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[f.jsx(y.C,{variant:"outline",className:"hover:bg-muted transition-colors duration-300",children:e.action}),f.jsx("span",{className:"text-xs text-muted-foreground",children:e.timestamp.toLocaleString()})]}),f.jsx("p",{className:"text-sm",children:e.details}),(0,f.jsxs)("div",{className:"flex items-center justify-between mt-2 text-xs text-muted-foreground",children:[(0,f.jsxs)("span",{className:"hover:text-primary transition-colors duration-300",children:["Officer: ",e.officer]}),e.incidentId&&(0,f.jsxs)("span",{className:"hover:text-primary transition-colors duration-300",children:["Incident: ",e.incidentId]})]})]},e.id))})})]})})]})]})]})}function lF({onLogin:e,onBack:t}){let[s,r]=(0,x.useState)(""),[a,n]=(0,x.useState)(""),[i,o]=(0,x.useState)(!1),[l,c]=(0,x.useState)(""),[d,u]=(0,x.useState)(!1),h=async t=>{t.preventDefault(),c(""),u(!0),await new Promise(e=>setTimeout(e,1e3)),"admin"===s&&"admin"===a?(localStorage.setItem("authorityAuth","true"),e()):c("Invalid username or password. Please try admin/admin."),u(!1)};return f.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:(0,f.jsxs)(v.Zb,{className:"w-full max-w-md animate-in fade-in-0 slide-in-from-bottom-4 duration-500 shadow-2xl border-slate-700 bg-slate-800/50 backdrop-blur-sm",children:[(0,f.jsxs)(v.Ol,{className:"text-center space-y-4",children:[f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:"p-4 bg-primary/20 rounded-full ring-2 ring-primary/30",children:f.jsx(j.Z,{className:"h-10 w-10 text-primary animate-pulse"})})}),f.jsx(v.ll,{className:"text-2xl text-white",children:"Authority Access"}),f.jsx("p",{className:"text-sm text-slate-300",children:"Please enter your credentials to access the Authority Dashboard"})]}),(0,f.jsxs)(v.aY,{children:[(0,f.jsxs)("form",{onSubmit:h,className:"space-y-6",children:[l&&f.jsx("div",{className:"p-3 bg-red-950/50 border border-red-500/50 rounded-lg animate-in fade-in-0 slide-in-from-top-2 duration-300",children:(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx(w.Z,{className:"h-4 w-4 text-red-400"}),f.jsx("p",{className:"text-sm text-red-400",children:l})]})}),(0,f.jsxs)("div",{className:"space-y-3",children:[f.jsx(e3._,{htmlFor:"username",className:"text-slate-300",children:"Username"}),f.jsx(e2.I,{id:"username",type:"text",placeholder:"Enter username",value:s,onChange:e=>r(e.target.value),className:"bg-slate-700/50 border-slate-600 text-white placeholder:text-slate-400 focus:ring-primary focus:border-primary",required:!0})]}),(0,f.jsxs)("div",{className:"space-y-3",children:[f.jsx(e3._,{htmlFor:"password",className:"text-slate-300",children:"Password"}),(0,f.jsxs)("div",{className:"relative",children:[f.jsx(e2.I,{id:"password",type:i?"text":"password",placeholder:"Enter password",value:a,onChange:e=>n(e.target.value),className:"bg-slate-700/50 border-slate-600 text-white placeholder:text-slate-400 focus:ring-primary focus:border-primary pr-10",required:!0}),f.jsx(g.z,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8 p-0 text-slate-400 hover:text-white hover:bg-slate-600/50",onClick:()=>o(!i),children:i?f.jsx(oi,{className:"h-4 w-4"}):f.jsx(on.Z,{className:"h-4 w-4"})})]})]}),(0,f.jsxs)("div",{className:"pt-2 space-y-3",children:[f.jsx(g.z,{type:"submit",className:"w-full h-12 text-base font-semibold bg-primary hover:bg-primary/90 focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-slate-800 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",disabled:d,children:d?(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[f.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),f.jsx("span",{children:"Authenticating..."})]}):(0,f.jsxs)(f.Fragment,{children:[f.jsx(j.Z,{className:"h-4 w-4 mr-2"}),"Access Dashboard"]})}),f.jsx(g.z,{type:"button",variant:"outline",onClick:t,className:"w-full h-12 text-base border-slate-600 text-slate-300 hover:bg-slate-700 hover:text-white hover:border-slate-500 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",disabled:d,children:"← Back to Welcome"})]})]}),f.jsx("div",{className:"mt-6 p-3 bg-blue-950/30 border border-blue-500/30 rounded-lg",children:(0,f.jsxs)("div",{className:"flex items-start space-x-2",children:[f.jsx(w.Z,{className:"h-4 w-4 text-blue-400 mt-0.5 flex-shrink-0"}),(0,f.jsxs)("div",{className:"text-xs text-blue-300",children:[f.jsx("p",{className:"font-medium",children:"Demo Credentials:"}),f.jsx("p",{children:"Username: admin"}),f.jsx("p",{children:"Password: admin"})]})]})})]})]})})}function lM(){let[e,t]=(0,x.useState)("welcome"),[s,r]=(0,x.useState)(null),[a,n]=(0,x.useState)(null),[i,o]=(0,x.useState)(!1);return(0,f.jsxs)("div",{className:"min-h-screen bg-background",children:["authority"!==e&&"authorityLogin"!==e&&f.jsx("div",{className:"fixed top-4 left-4 z-50",children:(0,f.jsxs)(g.z,{variant:"outline",size:"sm",onClick:()=>{i?t("authority"):t("authorityLogin")},className:"bg-background/80 backdrop-blur-sm hover:scale-110 hover:shadow-lg transition-all duration-300 animate-pulse border-primary/50 hover:border-primary group",children:[f.jsx(j.Z,{className:"h-4 w-4 mr-2 group-hover:rotate-12 transition-transform duration-300"}),"Authority Dashboard"]})}),"welcome"===e&&f.jsx(A,{onGetStarted:()=>{t("userInfo")}}),"userInfo"===e&&f.jsx(a2,{onSubmit:e=>{r(e),t("tripDetails")}}),"tripDetails"===e&&f.jsx(ns,{onSubmit:e=>{n(e),t("confirmation")},onBack:()=>{t("userInfo")}}),"confirmation"===e&&f.jsx(nr,{onContinue:()=>{t("dashboard")},userInfo:s,tripDetails:a}),"dashboard"===e&&f.jsx(lb,{userInfo:s,tripDetails:a}),"authorityLogin"===e&&f.jsx(lF,{onLogin:()=>{o(!0),t("authority")},onBack:()=>{t("welcome")}}),"authority"===e&&f.jsx(lP,{onBack:()=>{t("welcome")},onLogout:()=>{localStorage.removeItem("authorityAuth"),o(!1),t("welcome")}})]})}},4316:(e,t,s)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let s="color: "+this.color;t.splice(1,0,s,"color: inherit");let r=0,a=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(a=r))}),t.splice(a,0,s)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){let e;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=s(1994)(t);let{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},1994:(e,t,s)=>{e.exports=function(e){function t(e){let s,a,n;let i=null;function o(...e){if(!o.enabled)return;let r=Number(new Date),a=r-(s||r);o.diff=a,o.prev=s,o.curr=r,s=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let n=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(s,r)=>{if("%%"===s)return"%";n++;let a=t.formatters[r];if("function"==typeof a){let t=e[n];s=a.call(o,t),e.splice(n,1),n--}return s}),t.formatArgs.call(o,e),(o.log||t.log).apply(o,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=r,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(a!==t.namespaces&&(a=t.namespaces,n=t.enabled(e)),n),set:e=>{i=e}}),"function"==typeof t.init&&t.init(o),o}function r(e,s){let r=t(this.namespace+(void 0===s?":":s)+e);return r.log=this.log,r}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names.map(a),...t.skips.map(a).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let s;t.save(e),t.namespaces=e,t.names=[],t.skips=[];let r=("string"==typeof e?e:"").split(/[\s,]+/),a=r.length;for(s=0;s<a;s++)r[s]&&("-"===(e=r[s].replace(/\*/g,".*?"))[0]?t.skips.push(RegExp("^"+e.slice(1)+"$")):t.names.push(RegExp("^"+e+"$")))},t.enabled=function(e){let s,r;if("*"===e[e.length-1])return!0;for(s=0,r=t.skips.length;s<r;s++)if(t.skips[s].test(e))return!1;for(s=0,r=t.names.length;s<r;s++)if(t.names[s].test(e))return!0;return!1},t.humanize=s(8514),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(s=>{t[s]=e[s]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let s=0;for(let t=0;t<e.length;t++)s=(s<<5)-s+e.charCodeAt(t)|0;return t.colors[Math.abs(s)%t.colors.length]},t.enable(t.load()),t}},5356:(e,t,s)=>{"undefined"==typeof process||"renderer"===process.type||process.__nwjs?e.exports=s(4316):e.exports=s(884)},884:(e,t,s)=>{let r=s(4175),a=s(1764);t.init=function(e){e.inspectOpts={};let s=Object.keys(t.inspectOpts);for(let r=0;r<s.length;r++)e.inspectOpts[s[r]]=t.inspectOpts[s[r]]},t.log=function(...e){return process.stderr.write(a.formatWithOptions(t.inspectOpts,...e)+"\n")},t.formatArgs=function(s){let{namespace:r,useColors:a}=this;if(a){let t=this.color,a="\x1b[3"+(t<8?t:"8;5;"+t),n=`  ${a};1m${r} \u001B[0m`;s[0]=n+s[0].split("\n").join("\n"+n),s.push(a+"m+"+e.exports.humanize(this.diff)+"\x1b[0m")}else s[0]=(t.inspectOpts.hideDate?"":new Date().toISOString()+" ")+r+" "+s[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:r.isatty(process.stderr.fd)},t.destroy=a.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{let e=s(6839);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let s=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase()),r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[s]=r,e},{}),e.exports=s(1994)(t);let{formatters:n}=e.exports;n.o=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},n.O=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts)}},6407:(e,t,s)=>{"use strict";let{EMPTY_BUFFER:r}=s(4561),a=Buffer[Symbol.species];function n(e,t,s,r,a){for(let n=0;n<a;n++)s[r+n]=e[n]^t[3&n]}function i(e,t){for(let s=0;s<e.length;s++)e[s]^=t[3&s]}if(e.exports={concat:function(e,t){if(0===e.length)return r;if(1===e.length)return e[0];let s=Buffer.allocUnsafe(t),n=0;for(let t=0;t<e.length;t++){let r=e[t];s.set(r,n),n+=r.length}return n<t?new a(s.buffer,s.byteOffset,n):s},mask:n,toArrayBuffer:function(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:function e(t){let s;return(e.readOnly=!0,Buffer.isBuffer(t))?t:(t instanceof ArrayBuffer?s=new a(t):ArrayBuffer.isView(t)?s=new a(t.buffer,t.byteOffset,t.byteLength):(s=Buffer.from(t),e.readOnly=!1),s)},unmask:i},!process.env.WS_NO_BUFFER_UTIL)try{let t=s(8869);e.exports.mask=function(e,s,r,a,i){i<48?n(e,s,r,a,i):t.mask(e,s,r,a,i)},e.exports.unmask=function(e,s){e.length<32?i(e,s):t.unmask(e,s)}}catch(e){}},4561:e=>{"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},9389:(e,t,s)=>{"use strict";let{kForOnEventAttribute:r,kListener:a}=s(4561),n=Symbol("kCode"),i=Symbol("kData"),o=Symbol("kError"),l=Symbol("kMessage"),c=Symbol("kReason"),d=Symbol("kTarget"),u=Symbol("kType"),h=Symbol("kWasClean");class m{constructor(e){this[d]=null,this[u]=e}get target(){return this[d]}get type(){return this[u]}}Object.defineProperty(m.prototype,"target",{enumerable:!0}),Object.defineProperty(m.prototype,"type",{enumerable:!0});class p extends m{constructor(e,t={}){super(e),this[n]=void 0===t.code?0:t.code,this[c]=void 0===t.reason?"":t.reason,this[h]=void 0!==t.wasClean&&t.wasClean}get code(){return this[n]}get reason(){return this[c]}get wasClean(){return this[h]}}Object.defineProperty(p.prototype,"code",{enumerable:!0}),Object.defineProperty(p.prototype,"reason",{enumerable:!0}),Object.defineProperty(p.prototype,"wasClean",{enumerable:!0});class f extends m{constructor(e,t={}){super(e),this[o]=void 0===t.error?null:t.error,this[l]=void 0===t.message?"":t.message}get error(){return this[o]}get message(){return this[l]}}Object.defineProperty(f.prototype,"error",{enumerable:!0}),Object.defineProperty(f.prototype,"message",{enumerable:!0});class x extends m{constructor(e,t={}){super(e),this[i]=void 0===t.data?null:t.data}get data(){return this[i]}}function g(e,t,s){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,s):e.call(t,s)}Object.defineProperty(x.prototype,"data",{enumerable:!0}),e.exports={CloseEvent:p,ErrorEvent:f,Event:m,EventTarget:{addEventListener(e,t,s={}){let n;for(let n of this.listeners(e))if(!s[r]&&n[a]===t&&!n[r])return;if("message"===e)n=function(e,s){let r=new x("message",{data:s?e:e.toString()});r[d]=this,g(t,this,r)};else if("close"===e)n=function(e,s){let r=new p("close",{code:e,reason:s.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});r[d]=this,g(t,this,r)};else if("error"===e)n=function(e){let s=new f("error",{error:e,message:e.message});s[d]=this,g(t,this,s)};else{if("open"!==e)return;n=function(){let e=new m("open");e[d]=this,g(t,this,e)}}n[r]=!!s[r],n[a]=t,s.once?this.once(e,n):this.on(e,n)},removeEventListener(e,t){for(let s of this.listeners(e))if(s[a]===t&&!s[r]){this.removeListener(e,s);break}}},MessageEvent:x}},322:(e,t,s)=>{"use strict";let{tokenChars:r}=s(681);function a(e,t,s){void 0===e[t]?e[t]=[s]:e[t].push(s)}e.exports={format:function(e){return Object.keys(e).map(t=>{let s=e[t];return Array.isArray(s)||(s=[s]),s.map(e=>[t].concat(Object.keys(e).map(t=>{let s=e[t];return Array.isArray(s)||(s=[s]),s.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){let t,s;let n=Object.create(null),i=Object.create(null),o=!1,l=!1,c=!1,d=-1,u=-1,h=-1,m=0;for(;m<e.length;m++)if(u=e.charCodeAt(m),void 0===t){if(-1===h&&1===r[u])-1===d&&(d=m);else if(0!==m&&(32===u||9===u))-1===h&&-1!==d&&(h=m);else if(59===u||44===u){if(-1===d)throw SyntaxError(`Unexpected character at index ${m}`);-1===h&&(h=m);let s=e.slice(d,h);44===u?(a(n,s,i),i=Object.create(null)):t=s,d=h=-1}else throw SyntaxError(`Unexpected character at index ${m}`)}else if(void 0===s){if(-1===h&&1===r[u])-1===d&&(d=m);else if(32===u||9===u)-1===h&&-1!==d&&(h=m);else if(59===u||44===u){if(-1===d)throw SyntaxError(`Unexpected character at index ${m}`);-1===h&&(h=m),a(i,e.slice(d,h),!0),44===u&&(a(n,t,i),i=Object.create(null),t=void 0),d=h=-1}else if(61===u&&-1!==d&&-1===h)s=e.slice(d,m),d=h=-1;else throw SyntaxError(`Unexpected character at index ${m}`)}else if(l){if(1!==r[u])throw SyntaxError(`Unexpected character at index ${m}`);-1===d?d=m:o||(o=!0),l=!1}else if(c){if(1===r[u])-1===d&&(d=m);else if(34===u&&-1!==d)c=!1,h=m;else if(92===u)l=!0;else throw SyntaxError(`Unexpected character at index ${m}`)}else if(34===u&&61===e.charCodeAt(m-1))c=!0;else if(-1===h&&1===r[u])-1===d&&(d=m);else if(-1!==d&&(32===u||9===u))-1===h&&(h=m);else if(59===u||44===u){if(-1===d)throw SyntaxError(`Unexpected character at index ${m}`);-1===h&&(h=m);let r=e.slice(d,h);o&&(r=r.replace(/\\/g,""),o=!1),a(i,s,r),44===u&&(a(n,t,i),i=Object.create(null),t=void 0),s=void 0,d=h=-1}else throw SyntaxError(`Unexpected character at index ${m}`);if(-1===d||c||32===u||9===u)throw SyntaxError("Unexpected end of input");-1===h&&(h=m);let p=e.slice(d,h);return void 0===t?a(n,p,i):(void 0===s?a(i,p,!0):o?a(i,s,p.replace(/\\/g,"")):a(i,s,p),a(n,t,i)),n}}},6173:e=>{"use strict";let t=Symbol("kDone"),s=Symbol("kRun");class r{constructor(e){this[t]=()=>{this.pending--,this[s]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[s]()}[s](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[t])}}}e.exports=r},499:(e,t,s)=>{"use strict";let r;let a=s(1568),n=s(6407),i=s(6173),{kStatusCode:o}=s(4561),l=Buffer[Symbol.species],c=Buffer.from([0,0,255,255]),d=Symbol("permessage-deflate"),u=Symbol("total-length"),h=Symbol("callback"),m=Symbol("buffers"),p=Symbol("error");class f{constructor(e,t,s){this._maxPayload=0|s,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,r||(r=new i(void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10))}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[h];this._deflate.close(),this._deflate=null,e&&e(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,s=e.find(e=>(!1!==t.serverNoContextTakeover||!e.server_no_context_takeover)&&(!e.server_max_window_bits||!1!==t.serverMaxWindowBits&&("number"!=typeof t.serverMaxWindowBits||!(t.serverMaxWindowBits>e.server_max_window_bits)))&&("number"!=typeof t.clientMaxWindowBits||!!e.client_max_window_bits));if(!s)throw Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(s.server_no_context_takeover=!0),t.clientNoContextTakeover&&(s.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(s.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?s.client_max_window_bits=t.clientMaxWindowBits:(!0===s.client_max_window_bits||!1===t.clientMaxWindowBits)&&delete s.client_max_window_bits,s}acceptAsClient(e){let t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{let s=e[t];if(s.length>1)throw Error(`Parameter "${t}" must have only a single value`);if(s=s[0],"client_max_window_bits"===t){if(!0!==s){let e=+s;if(!Number.isInteger(e)||e<8||e>15)throw TypeError(`Invalid value for parameter "${t}": ${s}`);s=e}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${t}": ${s}`)}else if("server_max_window_bits"===t){let e=+s;if(!Number.isInteger(e)||e<8||e>15)throw TypeError(`Invalid value for parameter "${t}": ${s}`);s=e}else if("client_no_context_takeover"===t||"server_no_context_takeover"===t){if(!0!==s)throw TypeError(`Invalid value for parameter "${t}": ${s}`)}else throw Error(`Unknown parameter "${t}"`);e[t]=s})}),e}decompress(e,t,s){r.add(r=>{this._decompress(e,t,(e,t)=>{r(),s(e,t)})})}compress(e,t,s){r.add(r=>{this._compress(e,t,(e,t)=>{r(),s(e,t)})})}_decompress(e,t,s){let r=this._isServer?"client":"server";if(!this._inflate){let e=`${r}_max_window_bits`,t="number"!=typeof this.params[e]?a.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=a.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[d]=this,this._inflate[u]=0,this._inflate[m]=[],this._inflate.on("error",v),this._inflate.on("data",g)}this._inflate[h]=s,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush(()=>{let e=this._inflate[p];if(e){this._inflate.close(),this._inflate=null,s(e);return}let a=n.concat(this._inflate[m],this._inflate[u]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[u]=0,this._inflate[m]=[],t&&this.params[`${r}_no_context_takeover`]&&this._inflate.reset()),s(null,a)})}_compress(e,t,s){let r=this._isServer?"server":"client";if(!this._deflate){let e=`${r}_max_window_bits`,t="number"!=typeof this.params[e]?a.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=a.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[u]=0,this._deflate[m]=[],this._deflate.on("data",x)}this._deflate[h]=s,this._deflate.write(e),this._deflate.flush(a.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let e=n.concat(this._deflate[m],this._deflate[u]);t&&(e=new l(e.buffer,e.byteOffset,e.length-4)),this._deflate[h]=null,this._deflate[u]=0,this._deflate[m]=[],t&&this.params[`${r}_no_context_takeover`]&&this._deflate.reset(),s(null,e)})}}function x(e){this[m].push(e),this[u]+=e.length}function g(e){if(this[u]+=e.length,this[d]._maxPayload<1||this[u]<=this[d]._maxPayload){this[m].push(e);return}this[p]=RangeError("Max payload size exceeded"),this[p].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[p][o]=1009,this.removeListener("data",g),this.reset()}function v(e){this[d]._inflate=null,e[o]=1007,this[h](e)}e.exports=f},8054:(e,t,s)=>{"use strict";let{Writable:r}=s(6162),a=s(499),{BINARY_TYPES:n,EMPTY_BUFFER:i,kStatusCode:o,kWebSocket:l}=s(4561),{concat:c,toArrayBuffer:d,unmask:u}=s(6407),{isValidStatusCode:h,isValidUTF8:m}=s(681),p=Buffer[Symbol.species];class f extends r{constructor(e={}){super(),this._allowSynchronousEvents=void 0===e.allowSynchronousEvents||e.allowSynchronousEvents,this._binaryType=e.binaryType||n[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[l]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(e,t,s){if(8===this._opcode&&0==this._state)return s();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(s)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let t=this._buffers[0];return this._buffers[0]=new p(t.buffer,t.byteOffset+e,t.length-e),new p(t.buffer,t.byteOffset,e)}let t=Buffer.allocUnsafe(e);do{let s=this._buffers[0],r=t.length-e;e>=s.length?t.set(this._buffers.shift(),r):(t.set(new Uint8Array(s.buffer,s.byteOffset,e),r),this._buffers[0]=new p(s.buffer,s.byteOffset+e,s.length-e)),e-=s.length}while(e>0);return t}startLoop(e){this._loop=!0;do switch(this._state){case 0:this.getInfo(e);break;case 1:this.getPayloadLength16(e);break;case 2:this.getPayloadLength64(e);break;case 3:this.getMask();break;case 4:this.getData(e);break;case 5:case 6:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let t=this.consume(2);if((48&t[0])!=0){e(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));return}let s=(64&t[0])==64;if(s&&!this._extensions[a.extensionName]){e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));return}if(this._fin=(128&t[0])==128,this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(s){e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));return}if(!this._fragmented){e(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));return}this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented){e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));return}this._compressed=s}else if(this._opcode>7&&this._opcode<11){if(!this._fin){e(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));return}if(s){e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));return}if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength){e(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"));return}}else{e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));return}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&t[1])==128,this._isServer){if(!this._masked){e(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"));return}}else if(this._masked){e(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));return}126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let t=this.consume(8),s=t.readUInt32BE(0);if(s>2097151){e(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH"));return}this._payloadLength=4294967296*s+t.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){e(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));return}this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(e){let t=i;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!=0&&u(t,this._mask)}if(this._opcode>7){this.controlMessage(t,e);return}if(this._compressed){this._state=5,this.decompress(t,e);return}t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}decompress(e,t){this._extensions[a.extensionName].decompress(e,this._fin,(e,s)=>{if(e)return t(e);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0){t(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));return}this._fragments.push(s)}this.dataMessage(t),0===this._state&&this.startLoop(t)})}dataMessage(e){if(!this._fin){this._state=0;return}let t=this._messageLength,s=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let r;r="nodebuffer"===this._binaryType?c(s,t):"arraybuffer"===this._binaryType?d(c(s,t)):s,this._allowSynchronousEvents?(this.emit("message",r,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",r,!0),this._state=0,this.startLoop(e)}))}else{let r=c(s,t);if(!this._skipUTF8Validation&&!m(r)){e(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));return}5===this._state||this._allowSynchronousEvents?(this.emit("message",r,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",r,!1),this._state=0,this.startLoop(e)}))}}controlMessage(e,t){if(8===this._opcode){if(0===e.length)this._loop=!1,this.emit("conclude",1005,i),this.end();else{let s=e.readUInt16BE(0);if(!h(s)){t(this.createError(RangeError,`invalid status code ${s}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE"));return}let r=new p(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!m(r)){t(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));return}this._loop=!1,this.emit("conclude",s,r),this.end()}this._state=0;return}this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",e),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",e),this._state=0,this.startLoop(t)}))}createError(e,t,s,r,a){this._loop=!1,this._errored=!0;let n=new e(s?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(n,this.createError),n.code=a,n[o]=r,n}}e.exports=f},9114:(e,t,s)=>{"use strict";let r;let{Duplex:a}=s(6162),{randomFillSync:n}=s(4770),i=s(499),{EMPTY_BUFFER:o}=s(4561),{isValidStatusCode:l}=s(681),{mask:c,toBuffer:d}=s(6407),u=Symbol("kByteLength"),h=Buffer.alloc(4),m=8192;class p{constructor(e,t,s){this._extensions=t||{},s&&(this._generateMask=s,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){let s,a;let i=!1,o=2,l=!1;t.mask&&(s=t.maskBuffer||h,t.generateMask?t.generateMask(s):(8192===m&&(void 0===r&&(r=Buffer.alloc(8192)),n(r,0,8192),m=0),s[0]=r[m++],s[1]=r[m++],s[2]=r[m++],s[3]=r[m++]),l=(s[0]|s[1]|s[2]|s[3])==0,o=6),"string"==typeof e?a=(!t.mask||l)&&void 0!==t[u]?t[u]:(e=Buffer.from(e)).length:(a=e.length,i=t.mask&&t.readOnly&&!l);let d=a;a>=65536?(o+=8,d=127):a>125&&(o+=2,d=126);let p=Buffer.allocUnsafe(i?a+o:o);return(p[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(p[0]|=64),p[1]=d,126===d?p.writeUInt16BE(a,2):127===d&&(p[2]=p[3]=0,p.writeUIntBE(a,4,6)),t.mask)?(p[1]|=128,p[o-4]=s[0],p[o-3]=s[1],p[o-2]=s[2],p[o-1]=s[3],l)?[p,e]:i?(c(e,s,p,o,a),[p]):(c(e,s,e,0,a),[p,e]):[p,e]}close(e,t,s,r){let a;if(void 0===e)a=o;else if("number"==typeof e&&l(e)){if(void 0!==t&&t.length){let s=Buffer.byteLength(t);if(s>123)throw RangeError("The message must not be greater than 123 bytes");(a=Buffer.allocUnsafe(2+s)).writeUInt16BE(e,0),"string"==typeof t?a.write(t,2):a.set(t,2)}else(a=Buffer.allocUnsafe(2)).writeUInt16BE(e,0)}else throw TypeError("First argument must be a valid error code number");let n={[u]:a.length,fin:!0,generateMask:this._generateMask,mask:s,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,a,!1,n,r]):this.sendFrame(p.frame(a,n),r)}ping(e,t,s){let r,a;if("string"==typeof e?(r=Buffer.byteLength(e),a=!1):(r=(e=d(e)).length,a=d.readOnly),r>125)throw RangeError("The data size must not be greater than 125 bytes");let n={[u]:r,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:a,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,n,s]):this.sendFrame(p.frame(e,n),s)}pong(e,t,s){let r,a;if("string"==typeof e?(r=Buffer.byteLength(e),a=!1):(r=(e=d(e)).length,a=d.readOnly),r>125)throw RangeError("The data size must not be greater than 125 bytes");let n={[u]:r,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:a,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,n,s]):this.sendFrame(p.frame(e,n),s)}send(e,t,s){let r,a;let n=this._extensions[i.extensionName],o=t.binary?2:1,l=t.compress;if("string"==typeof e?(r=Buffer.byteLength(e),a=!1):(r=(e=d(e)).length,a=d.readOnly),this._firstFragment?(this._firstFragment=!1,l&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(l=r>=n._threshold),this._compress=l):(l=!1,o=0),t.fin&&(this._firstFragment=!0),n){let n={[u]:r,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:o,readOnly:a,rsv1:l};this._deflating?this.enqueue([this.dispatch,e,this._compress,n,s]):this.dispatch(e,this._compress,n,s)}else this.sendFrame(p.frame(e,{[u]:r,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:o,readOnly:a,rsv1:!1}),s)}dispatch(e,t,s,r){if(!t){this.sendFrame(p.frame(e,s),r);return}let a=this._extensions[i.extensionName];this._bufferedBytes+=s[u],this._deflating=!0,a.compress(e,s.fin,(e,t)=>{if(this._socket.destroyed){let e=Error("The socket was closed while data was being compressed");"function"==typeof r&&r(e);for(let t=0;t<this._queue.length;t++){let s=this._queue[t],r=s[s.length-1];"function"==typeof r&&r(e)}return}this._bufferedBytes-=s[u],this._deflating=!1,s.readOnly=!1,this.sendFrame(p.frame(t,s),r),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][u],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][u],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=p},3821:(e,t,s)=>{"use strict";let{Duplex:r}=s(6162);function a(e){e.emit("close")}function n(){!this.destroyed&&this._writableState.finished&&this.destroy()}function i(e){this.removeListener("error",i),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let s=!0,o=new r({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",function(t,s){let r=!s&&o._readableState.objectMode?t.toString():t;o.push(r)||e.pause()}),e.once("error",function(e){o.destroyed||(s=!1,o.destroy(e))}),e.once("close",function(){o.destroyed||o.push(null)}),o._destroy=function(t,r){if(e.readyState===e.CLOSED){r(t),process.nextTick(a,o);return}let n=!1;e.once("error",function(e){n=!0,r(e)}),e.once("close",function(){n||r(t),process.nextTick(a,o)}),s&&e.terminate()},o._final=function(t){if(e.readyState===e.CONNECTING){e.once("open",function(){o._final(t)});return}null!==e._socket&&(e._socket._writableState.finished?(t(),o._readableState.endEmitted&&o.destroy()):(e._socket.once("finish",function(){t()}),e.close()))},o._read=function(){e.isPaused&&e.resume()},o._write=function(t,s,r){if(e.readyState===e.CONNECTING){e.once("open",function(){o._write(t,s,r)});return}e.send(t,r)},o.on("end",n),o.on("error",i),o}},4852:(e,t,s)=>{"use strict";let{tokenChars:r}=s(681);e.exports={parse:function(e){let t=new Set,s=-1,a=-1,n=0;for(;n<e.length;n++){let i=e.charCodeAt(n);if(-1===a&&1===r[i])-1===s&&(s=n);else if(0!==n&&(32===i||9===i))-1===a&&-1!==s&&(a=n);else if(44===i){if(-1===s)throw SyntaxError(`Unexpected character at index ${n}`);-1===a&&(a=n);let r=e.slice(s,a);if(t.has(r))throw SyntaxError(`The "${r}" subprotocol is duplicated`);t.add(r),s=a=-1}else throw SyntaxError(`Unexpected character at index ${n}`)}if(-1===s||-1!==a)throw SyntaxError("Unexpected end of input");let i=e.slice(s,n);if(t.has(i))throw SyntaxError(`The "${i}" subprotocol is duplicated`);return t.add(i),t}}},681:(e,t,s)=>{"use strict";let{isUtf8:r}=s(8893);function a(e){let t=e.length,s=0;for(;s<t;)if((128&e[s])==0)s++;else if((224&e[s])==192){if(s+1===t||(192&e[s+1])!=128||(254&e[s])==192)return!1;s+=2}else if((240&e[s])==224){if(s+2>=t||(192&e[s+1])!=128||(192&e[s+2])!=128||224===e[s]&&(224&e[s+1])==128||237===e[s]&&(224&e[s+1])==160)return!1;s+=3}else{if((248&e[s])!=240||s+3>=t||(192&e[s+1])!=128||(192&e[s+2])!=128||(192&e[s+3])!=128||240===e[s]&&(240&e[s+1])==128||244===e[s]&&e[s+1]>143||e[s]>244)return!1;s+=4}return!0}if(e.exports={isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:a,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},r)e.exports.isValidUTF8=function(e){return e.length<24?a(e):r(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=s(4953);e.exports.isValidUTF8=function(e){return e.length<32?a(e):t(e)}}catch(e){}},9585:(e,t,s)=>{"use strict";let r=s(7702),a=s(2615),{Duplex:n}=s(6162),{createHash:i}=s(4770),o=s(322),l=s(499),c=s(4852),d=s(4150),{GUID:u,kWebSocket:h}=s(4561),m=/^[+/0-9A-Za-z]{22}==$/;class p extends r{constructor(e,t){if(super(),null==(e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:d,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=a.createServer((e,t)=>{let s=a.STATUS_CODES[426];t.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),t.end(s)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){let e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(let s of Object.keys(t))e.on(s,t[s]);return function(){for(let s of Object.keys(t))e.removeListener(s,t[s])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,s,r)=>{this.handleUpgrade(t,s,r,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state){e&&this.once("close",()=>{e(Error("The server is not running"))}),process.nextTick(f,this);return}if(e&&this.once("close",e),1!==this._state){if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(f,this);else{let e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close(()=>{f(this)})}}}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,s,r){t.on("error",x);let a=e.headers["sec-websocket-key"],n=e.headers.upgrade,i=+e.headers["sec-websocket-version"];if("GET"!==e.method){v(this,e,t,405,"Invalid HTTP method");return}if(void 0===n||"websocket"!==n.toLowerCase()){v(this,e,t,400,"Invalid Upgrade header");return}if(void 0===a||!m.test(a)){v(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");return}if(8!==i&&13!==i){v(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){g(t,400);return}let d=e.headers["sec-websocket-protocol"],u=new Set;if(void 0!==d)try{u=c.parse(d)}catch(s){v(this,e,t,400,"Invalid Sec-WebSocket-Protocol header");return}let h=e.headers["sec-websocket-extensions"],p={};if(this.options.perMessageDeflate&&void 0!==h){let s=new l(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let e=o.parse(h);e[l.extensionName]&&(s.accept(e[l.extensionName]),p[l.extensionName]=s)}catch(s){v(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let n={origin:e.headers[`${8===i?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(2===this.options.verifyClient.length){this.options.verifyClient(n,(n,i,o,l)=>{if(!n)return g(t,i||401,o,l);this.completeUpgrade(p,a,u,e,t,s,r)});return}if(!this.options.verifyClient(n))return g(t,401)}this.completeUpgrade(p,a,u,e,t,s,r)}completeUpgrade(e,t,s,r,a,n,c){if(!a.readable||!a.writable)return a.destroy();if(a[h])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return g(a,503);let d=i("sha1").update(t+u).digest("base64"),m=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${d}`],p=new this.options.WebSocket(null,void 0,this.options);if(s.size){let e=this.options.handleProtocols?this.options.handleProtocols(s,r):s.values().next().value;e&&(m.push(`Sec-WebSocket-Protocol: ${e}`),p._protocol=e)}if(e[l.extensionName]){let t=e[l.extensionName].params,s=o.format({[l.extensionName]:[t]});m.push(`Sec-WebSocket-Extensions: ${s}`),p._extensions=e}this.emit("headers",m,r),a.write(m.concat("\r\n").join("\r\n")),a.removeListener("error",x),p.setSocket(a,n,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(p),p.on("close",()=>{this.clients.delete(p),this._shouldEmitClose&&!this.clients.size&&process.nextTick(f,this)})),c(p,r)}}function f(e){e._state=2,e.emit("close")}function x(){this.destroy()}function g(e,t,s,r){s=s||a.STATUS_CODES[t],r={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(s),...r},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${a.STATUS_CODES[t]}\r
`+Object.keys(r).map(e=>`${e}: ${r[e]}`).join("\r\n")+"\r\n\r\n"+s)}function v(e,t,s,r,a){if(e.listenerCount("wsClientError")){let r=Error(a);Error.captureStackTrace(r,v),e.emit("wsClientError",r,s,t)}else g(s,r,a)}e.exports=p},4150:(e,t,s)=>{"use strict";let r=s(7702),a=s(5240),n=s(2615),i=s(8216),o=s(2452),{randomBytes:l,createHash:c}=s(4770),{Duplex:d,Readable:u}=s(6162),{URL:h}=s(7360),m=s(499),p=s(8054),f=s(9114),{BINARY_TYPES:x,EMPTY_BUFFER:g,GUID:v,kForOnEventAttribute:y,kListener:b,kStatusCode:j,kWebSocket:w,NOOP:N}=s(4561),{EventTarget:{addEventListener:_,removeEventListener:k}}=s(9389),{format:C,parse:S}=s(322),{toBuffer:E}=s(6407),T=Symbol("kAborted"),O=[8,13],I=["CONNECTING","OPEN","CLOSING","CLOSED"],A=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class R extends r{constructor(e,t,s){super(),this._binaryType=x[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=g,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=R.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(s=t,t=[]):t=[t]),function e(t,s,r,i){let o,d,u,p;let f={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:O[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...i,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(t._autoPong=f.autoPong,!O.includes(f.protocolVersion))throw RangeError(`Unsupported protocol version: ${f.protocolVersion} (supported versions: ${O.join(", ")})`);if(s instanceof h)o=s;else try{o=new h(s)}catch(e){throw SyntaxError(`Invalid URL: ${s}`)}"http:"===o.protocol?o.protocol="ws:":"https:"===o.protocol&&(o.protocol="wss:"),t._url=o.href;let x="wss:"===o.protocol,g="ws+unix:"===o.protocol;if("ws:"===o.protocol||x||g?g&&!o.pathname?d="The URL's pathname is empty":o.hash&&(d="The URL contains a fragment identifier"):d='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"',d){let e=SyntaxError(d);if(0===t._redirects)throw e;D(t,e);return}let y=x?443:80,b=l(16).toString("base64"),j=x?a.request:n.request,w=new Set;if(f.createConnection=f.createConnection||(x?P:L),f.defaultPort=f.defaultPort||y,f.port=o.port||y,f.host=o.hostname.startsWith("[")?o.hostname.slice(1,-1):o.hostname,f.headers={...f.headers,"Sec-WebSocket-Version":f.protocolVersion,"Sec-WebSocket-Key":b,Connection:"Upgrade",Upgrade:"websocket"},f.path=o.pathname+o.search,f.timeout=f.handshakeTimeout,f.perMessageDeflate&&(u=new m(!0!==f.perMessageDeflate?f.perMessageDeflate:{},!1,f.maxPayload),f.headers["Sec-WebSocket-Extensions"]=C({[m.extensionName]:u.offer()})),r.length){for(let e of r){if("string"!=typeof e||!A.test(e)||w.has(e))throw SyntaxError("An invalid or duplicated subprotocol was specified");w.add(e)}f.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(f.origin&&(f.protocolVersion<13?f.headers["Sec-WebSocket-Origin"]=f.origin:f.headers.Origin=f.origin),(o.username||o.password)&&(f.auth=`${o.username}:${o.password}`),g){let e=f.path.split(":");f.socketPath=e[0],f.path=e[1]}if(f.followRedirects){if(0===t._redirects){t._originalIpc=g,t._originalSecure=x,t._originalHostOrSocketPath=g?f.socketPath:o.host;let e=i&&i.headers;if(i={...i,headers:{}},e)for(let[t,s]of Object.entries(e))i.headers[t.toLowerCase()]=s}else if(0===t.listenerCount("redirect")){let e=g?!!t._originalIpc&&f.socketPath===t._originalHostOrSocketPath:!t._originalIpc&&o.host===t._originalHostOrSocketPath;e&&(!t._originalSecure||x)||(delete f.headers.authorization,delete f.headers.cookie,e||delete f.headers.host,f.auth=void 0)}f.auth&&!i.headers.authorization&&(i.headers.authorization="Basic "+Buffer.from(f.auth).toString("base64")),p=t._req=j(f),t._redirects&&t.emit("redirect",t.url,p)}else p=t._req=j(f);f.timeout&&p.on("timeout",()=>{F(t,p,"Opening handshake has timed out")}),p.on("error",e=>{null===p||p[T]||(p=t._req=null,D(t,e))}),p.on("response",a=>{let n=a.headers.location,o=a.statusCode;if(n&&f.followRedirects&&o>=300&&o<400){let a;if(++t._redirects>f.maxRedirects){F(t,p,"Maximum redirects exceeded");return}p.abort();try{a=new h(n,s)}catch(e){D(t,SyntaxError(`Invalid URL: ${n}`));return}e(t,a,r,i)}else t.emit("unexpected-response",p,a)||F(t,p,`Unexpected server response: ${a.statusCode}`)}),p.on("upgrade",(e,s,r)=>{let a;if(t.emit("upgrade",e),t.readyState!==R.CONNECTING)return;p=t._req=null;let n=e.headers.upgrade;if(void 0===n||"websocket"!==n.toLowerCase()){F(t,s,"Invalid Upgrade header");return}let i=c("sha1").update(b+v).digest("base64");if(e.headers["sec-websocket-accept"]!==i){F(t,s,"Invalid Sec-WebSocket-Accept header");return}let o=e.headers["sec-websocket-protocol"];if(void 0!==o?w.size?w.has(o)||(a="Server sent an invalid subprotocol"):a="Server sent a subprotocol but none was requested":w.size&&(a="Server sent no subprotocol"),a){F(t,s,a);return}o&&(t._protocol=o);let l=e.headers["sec-websocket-extensions"];if(void 0!==l){let e;if(!u){F(t,s,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}try{e=S(l)}catch(e){F(t,s,"Invalid Sec-WebSocket-Extensions header");return}let r=Object.keys(e);if(1!==r.length||r[0]!==m.extensionName){F(t,s,"Server indicated an extension that was not requested");return}try{u.accept(e[m.extensionName])}catch(e){F(t,s,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[m.extensionName]=u}t.setSocket(s,r,{allowSynchronousEvents:f.allowSynchronousEvents,generateMask:f.generateMask,maxPayload:f.maxPayload,skipUTF8Validation:f.skipUTF8Validation})}),f.finishRequest?f.finishRequest(p,t):p.end()}(this,e,t,s)):(this._autoPong=s.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){x.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,s){let r=new p({allowSynchronousEvents:s.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:s.maxPayload,skipUTF8Validation:s.skipUTF8Validation});this._sender=new f(e,this._extensions,s.generateMask),this._receiver=r,this._socket=e,r[w]=this,e[w]=this,r.on("conclude",Z),r.on("drain",z),r.on("error",$),r.on("message",U),r.on("ping",W),r.on("pong",V),e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",H),e.on("data",G),e.on("end",Y),e.on("error",X),this._readyState=R.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=R.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[m.extensionName]&&this._extensions[m.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=R.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==R.CLOSED){if(this.readyState===R.CONNECTING){F(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===R.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=R.CLOSING,this._sender.close(e,t,!this._isServer,e=>{!e&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)}}pause(){this.readyState!==R.CONNECTING&&this.readyState!==R.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,s){if(this.readyState===R.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof e?(s=e,e=t=void 0):"function"==typeof t&&(s=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState!==R.OPEN){M(this,e,s);return}void 0===t&&(t=!this._isServer),this._sender.ping(e||g,t,s)}pong(e,t,s){if(this.readyState===R.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof e?(s=e,e=t=void 0):"function"==typeof t&&(s=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState!==R.OPEN){M(this,e,s);return}void 0===t&&(t=!this._isServer),this._sender.pong(e||g,t,s)}resume(){this.readyState!==R.CONNECTING&&this.readyState!==R.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,s){if(this.readyState===R.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(s=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==R.OPEN){M(this,e,s);return}let r={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[m.extensionName]||(r.compress=!1),this._sender.send(e||g,r,s)}terminate(){if(this.readyState!==R.CLOSED){if(this.readyState===R.CONNECTING){F(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=R.CLOSING,this._socket.destroy())}}}function D(e,t){e._readyState=R.CLOSING,e.emit("error",t),e.emitClose()}function L(e){return e.path=e.socketPath,i.connect(e)}function P(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=i.isIP(e.host)?"":e.host),o.connect(e)}function F(e,t,s){e._readyState=R.CLOSING;let r=Error(s);Error.captureStackTrace(r,F),t.setHeader?(t[T]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(D,e,r)):(t.destroy(r),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function M(e,t,s){if(t){let s=E(t).length;e._socket?e._sender._bufferedBytes+=s:e._bufferedAmount+=s}if(s){let t=Error(`WebSocket is not open: readyState ${e.readyState} (${I[e.readyState]})`);process.nextTick(s,t)}}function Z(e,t){let s=this[w];s._closeFrameReceived=!0,s._closeMessage=t,s._closeCode=e,void 0!==s._socket[w]&&(s._socket.removeListener("data",G),process.nextTick(q,s._socket),1005===e?s.close():s.close(e,t))}function z(){let e=this[w];e.isPaused||e._socket.resume()}function $(e){let t=this[w];void 0!==t._socket[w]&&(t._socket.removeListener("data",G),process.nextTick(q,t._socket),t.close(e[j])),t.emit("error",e)}function B(){this[w].emitClose()}function U(e,t){this[w].emit("message",e,t)}function W(e){let t=this[w];t._autoPong&&t.pong(e,!this._isServer,N),t.emit("ping",e)}function V(e){this[w].emit("pong",e)}function q(e){e.resume()}function H(){let e;let t=this[w];this.removeListener("close",H),this.removeListener("data",G),this.removeListener("end",Y),t._readyState=R.CLOSING,this._readableState.endEmitted||t._closeFrameReceived||t._receiver._writableState.errorEmitted||null===(e=t._socket.read())||t._receiver.write(e),t._receiver.end(),this[w]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",B),t._receiver.on("finish",B))}function G(e){this[w]._receiver.write(e)||this.pause()}function Y(){let e=this[w];e._readyState=R.CLOSING,e._receiver.end(),this.end()}function X(){let e=this[w];this.removeListener("error",X),this.on("error",N),e&&(e._readyState=R.CLOSING,this.destroy())}Object.defineProperty(R,"CONNECTING",{enumerable:!0,value:I.indexOf("CONNECTING")}),Object.defineProperty(R.prototype,"CONNECTING",{enumerable:!0,value:I.indexOf("CONNECTING")}),Object.defineProperty(R,"OPEN",{enumerable:!0,value:I.indexOf("OPEN")}),Object.defineProperty(R.prototype,"OPEN",{enumerable:!0,value:I.indexOf("OPEN")}),Object.defineProperty(R,"CLOSING",{enumerable:!0,value:I.indexOf("CLOSING")}),Object.defineProperty(R.prototype,"CLOSING",{enumerable:!0,value:I.indexOf("CLOSING")}),Object.defineProperty(R,"CLOSED",{enumerable:!0,value:I.indexOf("CLOSED")}),Object.defineProperty(R.prototype,"CLOSED",{enumerable:!0,value:I.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(e=>{Object.defineProperty(R.prototype,e,{enumerable:!0})}),["open","error","close","message"].forEach(e=>{Object.defineProperty(R.prototype,`on${e}`,{enumerable:!0,get(){for(let t of this.listeners(e))if(t[y])return t[b];return null},set(t){for(let t of this.listeners(e))if(t[y]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[y]:!0})}})}),R.prototype.addEventListener=_,R.prototype.removeEventListener=k,e.exports=R},8060:e=>{"use strict";e.exports=(e,t=process.argv)=>{let s=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(s+e),a=t.indexOf("--");return -1!==r&&(-1===a||r<a)}},8514:e=>{function t(e,t,s,r){return Math.round(e/s)+" "+r+(t>=1.5*s?"s":"")}e.exports=function(e,s){s=s||{};var r,a,n=typeof e;if("string"===n&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return 864e5*s;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*s;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*s;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===n&&isFinite(e))return s.long?(r=Math.abs(e))>=864e5?t(e,r,864e5,"day"):r>=36e5?t(e,r,36e5,"hour"):r>=6e4?t(e,r,6e4,"minute"):r>=1e3?t(e,r,1e3,"second"):e+" ms":(a=Math.abs(e))>=864e5?Math.round(e/864e5)+"d":a>=36e5?Math.round(e/36e5)+"h":a>=6e4?Math.round(e/6e4)+"m":a>=1e3?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},9326:(e,t,s)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let s="color: "+this.color;t.splice(1,0,s,"color: inherit");let r=0,a=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(a=r))}),t.splice(a,0,s)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){let e;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=s(9211)(t);let{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},9211:(e,t,s)=>{e.exports=function(e){function t(e){let s,a,n;let i=null;function o(...e){if(!o.enabled)return;let r=Number(new Date),a=r-(s||r);o.diff=a,o.prev=s,o.curr=r,s=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let n=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(s,r)=>{if("%%"===s)return"%";n++;let a=t.formatters[r];if("function"==typeof a){let t=e[n];s=a.call(o,t),e.splice(n,1),n--}return s}),t.formatArgs.call(o,e),(o.log||t.log).apply(o,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=r,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(a!==t.namespaces&&(a=t.namespaces,n=t.enabled(e)),n),set:e=>{i=e}}),"function"==typeof t.init&&t.init(o),o}function r(e,s){let r=t(this.namespace+(void 0===s?":":s)+e);return r.log=this.log,r}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names.map(a),...t.skips.map(a).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let s;t.save(e),t.namespaces=e,t.names=[],t.skips=[];let r=("string"==typeof e?e:"").split(/[\s,]+/),a=r.length;for(s=0;s<a;s++)r[s]&&("-"===(e=r[s].replace(/\*/g,".*?"))[0]?t.skips.push(RegExp("^"+e.slice(1)+"$")):t.names.push(RegExp("^"+e+"$")))},t.enabled=function(e){let s,r;if("*"===e[e.length-1])return!0;for(s=0,r=t.skips.length;s<r;s++)if(t.skips[s].test(e))return!1;for(s=0,r=t.names.length;s<r;s++)if(t.names[s].test(e))return!0;return!1},t.humanize=s(8514),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(s=>{t[s]=e[s]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let s=0;for(let t=0;t<e.length;t++)s=(s<<5)-s+e.charCodeAt(t)|0;return t.colors[Math.abs(s)%t.colors.length]},t.enable(t.load()),t}},943:(e,t,s)=>{"undefined"==typeof process||"renderer"===process.type||process.__nwjs?e.exports=s(9326):e.exports=s(8742)},8742:(e,t,s)=>{let r=s(4175),a=s(1764);t.init=function(e){e.inspectOpts={};let s=Object.keys(t.inspectOpts);for(let r=0;r<s.length;r++)e.inspectOpts[s[r]]=t.inspectOpts[s[r]]},t.log=function(...e){return process.stderr.write(a.formatWithOptions(t.inspectOpts,...e)+"\n")},t.formatArgs=function(s){let{namespace:r,useColors:a}=this;if(a){let t=this.color,a="\x1b[3"+(t<8?t:"8;5;"+t),n=`  ${a};1m${r} \u001B[0m`;s[0]=n+s[0].split("\n").join("\n"+n),s.push(a+"m+"+e.exports.humanize(this.diff)+"\x1b[0m")}else s[0]=(t.inspectOpts.hideDate?"":new Date().toISOString()+" ")+r+" "+s[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:r.isatty(process.stderr.fd)},t.destroy=a.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{let e=s(6839);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let s=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase()),r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[s]=r,e},{}),e.exports=s(9211)(t);let{formatters:n}=e.exports;n.o=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},n.O=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts)}},9683:(e,t,s)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let s="color: "+this.color;t.splice(1,0,s,"color: inherit");let r=0,a=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(a=r))}),t.splice(a,0,s)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){let e;return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=s(6440)(t);let{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},6440:(e,t,s)=>{e.exports=function(e){function t(e){let s,a,n;let i=null;function o(...e){if(!o.enabled)return;let r=Number(new Date),a=r-(s||r);o.diff=a,o.prev=s,o.curr=r,s=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let n=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(s,r)=>{if("%%"===s)return"%";n++;let a=t.formatters[r];if("function"==typeof a){let t=e[n];s=a.call(o,t),e.splice(n,1),n--}return s}),t.formatArgs.call(o,e),(o.log||t.log).apply(o,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=r,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(a!==t.namespaces&&(a=t.namespaces,n=t.enabled(e)),n),set:e=>{i=e}}),"function"==typeof t.init&&t.init(o),o}function r(e,s){let r=t(this.namespace+(void 0===s?":":s)+e);return r.log=this.log,r}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names.map(a),...t.skips.map(a).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let s;t.save(e),t.namespaces=e,t.names=[],t.skips=[];let r=("string"==typeof e?e:"").split(/[\s,]+/),a=r.length;for(s=0;s<a;s++)r[s]&&("-"===(e=r[s].replace(/\*/g,".*?"))[0]?t.skips.push(RegExp("^"+e.slice(1)+"$")):t.names.push(RegExp("^"+e+"$")))},t.enabled=function(e){let s,r;if("*"===e[e.length-1])return!0;for(s=0,r=t.skips.length;s<r;s++)if(t.skips[s].test(e))return!1;for(s=0,r=t.names.length;s<r;s++)if(t.names[s].test(e))return!0;return!1},t.humanize=s(8514),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(s=>{t[s]=e[s]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let s=0;for(let t=0;t<e.length;t++)s=(s<<5)-s+e.charCodeAt(t)|0;return t.colors[Math.abs(s)%t.colors.length]},t.enable(t.load()),t}},4946:(e,t,s)=>{"undefined"==typeof process||"renderer"===process.type||process.__nwjs?e.exports=s(9683):e.exports=s(8541)},8541:(e,t,s)=>{let r=s(4175),a=s(1764);t.init=function(e){e.inspectOpts={};let s=Object.keys(t.inspectOpts);for(let r=0;r<s.length;r++)e.inspectOpts[s[r]]=t.inspectOpts[s[r]]},t.log=function(...e){return process.stderr.write(a.formatWithOptions(t.inspectOpts,...e)+"\n")},t.formatArgs=function(s){let{namespace:r,useColors:a}=this;if(a){let t=this.color,a="\x1b[3"+(t<8?t:"8;5;"+t),n=`  ${a};1m${r} \u001B[0m`;s[0]=n+s[0].split("\n").join("\n"+n),s.push(a+"m+"+e.exports.humanize(this.diff)+"\x1b[0m")}else s[0]=(t.inspectOpts.hideDate?"":new Date().toISOString()+" ")+r+" "+s[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?!!t.inspectOpts.colors:r.isatty(process.stderr.fd)},t.destroy=a.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{let e=s(6839);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let s=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase()),r=process.env[t];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),e[s]=r,e},{}),e.exports=s(6440)(t);let{formatters:n}=e.exports;n.o=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},n.O=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts)}},6839:(e,t,s)=>{"use strict";let r;let a=s(9801),n=s(4175),i=s(8060),{env:o}=process;function l(e,t={}){var s;return 0!==(s=function(e,{streamIsTTY:t,sniffFlags:s=!0}={}){let n=function(){if("FORCE_COLOR"in o)return"true"===o.FORCE_COLOR?1:"false"===o.FORCE_COLOR?0:0===o.FORCE_COLOR.length?1:Math.min(Number.parseInt(o.FORCE_COLOR,10),3)}();void 0!==n&&(r=n);let l=s?r:n;if(0===l)return 0;if(s){if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2}if(e&&!t&&void 0===l)return 0;let c=l||0;if("dumb"===o.TERM)return c;if("win32"===process.platform){let e=a.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(e=>e in o)||"codeship"===o.CI_NAME?1:c;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){let e=Number.parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:c}(e,{streamIsTTY:e&&e.isTTY,...t}))&&{level:s,hasBasic:!0,has256:s>=2,has16m:s>=3}}i("no-color")||i("no-colors")||i("color=false")||i("color=never")?r=0:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(r=1),e.exports={supportsColor:l,stdout:l({isTTY:n.isatty(1)}),stderr:l({isTTY:n.isatty(2)})}},7427:(e,t,s)=>{"use strict";var r=s(8964),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=r.useState,i=r.useEffect,o=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!a(e,s)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var s=t(),r=n({inst:{value:s,getSnapshot:t}}),a=r[0].inst,d=r[1];return o(function(){a.value=s,a.getSnapshot=t,c(a)&&d({inst:a})},[e,s,t]),i(function(){return c(a)&&d({inst:a}),e(function(){c(a)&&d({inst:a})})},[e]),l(s),s};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:d},4455:(e,t,s)=>{"use strict";e.exports=s(7427)},5367:(e,t,s)=>{var r=s(2048),a=s(7360),n=s(1282).spawn;function i(e){"use strict";e=e||{};var t,i,o=this,l=s(2615),c=s(5240),d={},u=!1,h={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},m=Object.assign({},h),p=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],f=["TRACE","TRACK","CONNECT"],x=!1,g=!1,v=!1,y={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),this.status=null,this.statusText=null,this.open=function(e,t,s,r,a){if(this.abort(),g=!1,v=!1,!(e&&-1===f.indexOf(e)))throw Error("SecurityError: Request method not allowed");d={method:e,url:t.toString(),async:"boolean"!=typeof s||s,user:r||null,password:a||null},b(this.OPENED)},this.setDisableHeaderCheck=function(e){u=e},this.setRequestHeader=function(e,t){if(this.readyState!=this.OPENED)throw Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!u&&(!e||-1!==p.indexOf(e.toLowerCase())))return console.warn('Refused to set unsafe header "'+e+'"'),!1;if(x)throw Error("INVALID_STATE_ERR: send flag is true");return m[e]=t,!0},this.getResponseHeader=function(e){return"string"==typeof e&&this.readyState>this.OPENED&&i.headers[e.toLowerCase()]&&!g?i.headers[e.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||g)return"";var e="";for(var t in i.headers)"set-cookie"!==t&&"set-cookie2"!==t&&(e+=t+": "+i.headers[t]+"\r\n");return e.substr(0,e.length-2)},this.getRequestHeader=function(e){return"string"==typeof e&&m[e]?m[e]:""},this.send=function(s){if(this.readyState!=this.OPENED)throw Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(x)throw Error("INVALID_STATE_ERR: send has already been called");var u,h=!1,p=!1,f=a.parse(d.url);switch(f.protocol){case"https:":h=!0;case"http:":u=f.hostname;break;case"file:":p=!0;break;case void 0:case"":u="localhost";break;default:throw Error("Protocol not supported.")}if(p){if("GET"!==d.method)throw Error("XMLHttpRequest: Only GET method is supported");if(d.async)r.readFile(unescape(f.pathname),function(e,t){e?o.handleError(e,e.errno||-1):(o.status=200,o.responseText=t.toString("utf8"),o.response=t,b(o.DONE))});else try{this.response=r.readFileSync(unescape(f.pathname)),this.responseText=this.response.toString("utf8"),this.status=200,b(o.DONE)}catch(e){this.handleError(e,e.errno||-1)}return}var v=f.port||(h?443:80),y=f.pathname+(f.search?f.search:"");if(m.Host=u,h&&443===v||80===v||(m.Host+=":"+f.port),d.user){void 0===d.password&&(d.password="");var j=new Buffer(d.user+":"+d.password);m.Authorization="Basic "+j.toString("base64")}"GET"===d.method||"HEAD"===d.method?s=null:s?(m["Content-Length"]=Buffer.isBuffer(s)?s.length:Buffer.byteLength(s),Object.keys(m).some(function(e){return"content-type"===e.toLowerCase()})||(m["Content-Type"]="text/plain;charset=UTF-8")):"POST"===d.method&&(m["Content-Length"]=0);var w=e.agent||!1,N={host:u,port:v,path:y,method:d.method,headers:m,agent:w};if(h&&(N.pfx=e.pfx,N.key=e.key,N.passphrase=e.passphrase,N.cert=e.cert,N.ca=e.ca,N.ciphers=e.ciphers,N.rejectUnauthorized=!1!==e.rejectUnauthorized),g=!1,d.async){var _=h?c.request:l.request;x=!0,o.dispatchEvent("readystatechange");var k=function(s){if(302===(i=s).statusCode||303===i.statusCode||307===i.statusCode){d.url=i.headers.location;var r=a.parse(d.url);u=r.hostname;var n={hostname:r.hostname,port:r.port,path:r.path,method:303===i.statusCode?"GET":d.method,headers:m};h&&(n.pfx=e.pfx,n.key=e.key,n.passphrase=e.passphrase,n.cert=e.cert,n.ca=e.ca,n.ciphers=e.ciphers,n.rejectUnauthorized=!1!==e.rejectUnauthorized),(t=_(n,k).on("error",C)).end();return}b(o.HEADERS_RECEIVED),o.status=i.statusCode,i.on("data",function(e){if(e){var t=Buffer.from(e);o.response=Buffer.concat([o.response,t])}x&&b(o.LOADING)}),i.on("end",function(){x&&(x=!1,b(o.DONE),o.responseText=o.response.toString("utf8"))}),i.on("error",function(e){o.handleError(e)})},C=function(e){if(t.reusedSocket&&"ECONNRESET"===e.code)return _(N,k).on("error",C);o.handleError(e)};t=_(N,k).on("error",C),e.autoUnref&&t.on("socket",e=>{e.unref()}),s&&t.write(s),t.end(),o.dispatchEvent("loadstart")}else{var S=".node-xmlhttprequest-content-"+process.pid,E=".node-xmlhttprequest-sync-"+process.pid;r.writeFileSync(E,"","utf8");for(var T="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(h?"s":"")+".request;var options = "+JSON.stringify(N)+";var responseText = '';var responseData = Buffer.alloc(0);var req = doRequest(options, function(response) {response.on('data', function(chunk) {  var data = Buffer.from(chunk);  responseText += data.toString('utf8');  responseData = Buffer.concat([responseData, data]);});response.on('end', function() {fs.writeFileSync('"+S+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText, data: responseData.toString('base64')}}), 'utf8');fs.unlinkSync('"+E+"');});response.on('error', function(error) {fs.writeFileSync('"+S+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+E+"');});}).on('error', function(error) {fs.writeFileSync('"+S+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+E+"');});"+(s?"req.write('"+JSON.stringify(s).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",O=n(process.argv[0],["-e",T]);r.existsSync(E););if(o.responseText=r.readFileSync(S,"utf8"),O.stdin.end(),r.unlinkSync(S),o.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var I=JSON.parse(o.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,""));o.handleError(I,503)}else{o.status=o.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1");var A=JSON.parse(o.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"));i={statusCode:o.status,headers:A.data.headers},o.responseText=A.data.text,o.response=Buffer.from(A.data.data,"base64"),b(o.DONE,!0)}}},this.handleError=function(e,t){this.status=t||0,this.statusText=e,this.responseText=e.stack,g=!0,b(this.DONE)},this.abort=function(){t&&(t.abort(),t=null),m=Object.assign({},h),this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),g=v=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||x)&&this.readyState!==this.DONE&&(x=!1,b(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(e,t){e in y||(y[e]=[]),y[e].push(t)},this.removeEventListener=function(e,t){e in y&&(y[e]=y[e].filter(function(e){return e!==t}))},this.dispatchEvent=function(e){if("function"==typeof o["on"+e]&&(this.readyState===this.DONE&&d.async?setTimeout(function(){o["on"+e]()},0):o["on"+e]()),e in y)for(let t=0,s=y[e].length;t<s;t++)this.readyState===this.DONE?setTimeout(function(){y[e][t].call(o)},0):y[e][t].call(o)};var b=function(e){if(o.readyState!==e&&(o.readyState!==o.UNSENT||!v)&&(o.readyState=e,(d.async||o.readyState<o.OPENED||o.readyState===o.DONE)&&o.dispatchEvent("readystatechange"),o.readyState===o.DONE)){let e;e=v?"abort":g?"error":"load",o.dispatchEvent(e),o.dispatchEvent("loadend")}}}e.exports=i,i.XMLHttpRequest=i},8646:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(5347).createProxy)(String.raw`/workspaces/NaviSafe/app/page.tsx#default`)}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[746,843,18],()=>s(7032));module.exports=r})();